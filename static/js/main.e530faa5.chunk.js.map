{"version":3,"sources":["redux/types.ts","redux/state/masterPlayerInfo/selectors.ts","redux/state/offsets/selectors.ts","redux/state/playersInfo/reducer.ts","redux/state/playersInfo/selectors.ts","redux/state/settings/selectors.ts","redux/state/playersInfo/actions.ts","redux/state/masterPlayerInfo/actions.ts","redux/state/offsets/actions.ts","redux/state/settings/actions.ts","redux/middlewares/masterPlayerMiddleware.ts","redux/state/masterPlayerInfo/reducer.ts","redux/state/offsets/reducer.ts","redux/state/settings/reducer.ts","redux/state/videos/reducer.ts","redux/state/index.ts","redux/index.ts","redux/middlewares/offsetsMiddleware.ts","redux/middlewares/playerGroupsMiddleware.ts","serviceWorkerRegistration.ts","reportWebVitals.ts","components/AddVideosDialog/style.ts","components/AddVideosDialog/AddVideosDialog.tsx","redux/state/videos/actions.ts","components/AppBar/AppBar.tsx","components/KeyboardEventHandler/KeyboardEventHandler.tsx","utils/formatSeconds.ts","utils/getOptimalGridPlayerSize.ts","utils/getPlayerGridPositions.ts","components/PlaybackSlider/style.ts","components/PlaybackSlider/PlaybackSlider.tsx","components/VolumeControl/style.ts","components/VolumeControl/VolumeControl.tsx","components/PlaybackControlBar/style.ts","components/PlaybackControlBar/PlaybackControlBar.tsx","components/IndividualPlaybackControlBar/IndividualPlaybackControlBarActions.tsx","components/IndividualPlaybackControlBar/IndividualPlaybackControlBar.tsx","components/MasterPlaybackControlBar/style.ts","components/MasterPlaybackControlBar/MasterPlaybackControlBarSettingsMenu.tsx","components/MasterPlaybackControlBar/MasterPlaybackControlBarActions.tsx","components/MasterPlaybackControlBar/MasterPlaybackControlBar.tsx","components/PlayerControlOverlay/style.ts","components/PlayerControlOverlay/PlayerControlOverlay.tsx","components/VideoPlayer/style.ts","components/VideoPlayer/VideoPlayer.tsx","components/PlayersView/style.ts","components/PlayersView/PlayersView.tsx","redux/state/videos/selectors.ts","utils/getPlayerLinePositions.ts","style.ts","App.tsx","index.tsx","redux/state/playersInfo/types.ts","redux/state/masterPlayerInfo/types.ts","redux/state/settings/types.ts","redux/state/offsets/types.ts","redux/state/videos/types.ts"],"names":["getMasterPlayerInfo","state","masterPlayerInfo","getIsMasterPlayerPlaying","createSelector","getOr","getIsMasterPlayerBuffering","getMasterPlayerDurationSeconds","getMasterPlayerPlayedTime","playedSeconds","playedFraction","getMasterPlayerPlayedSeconds","getMasterPlayerPlayedFraction","getMasterPlayerLoadedTime","loadedSeconds","loadedFraction","getMasterPlayerLoadedFraction","getMasterPlayerVolume","getIsMasterPlayerMuted","getMasterPendingSeek","getOffsetsState","offsets","getOffsetsReferencePlayerId","get","getOffsets","getPlayerOffset","memoize","id","playersInfoInitialState","playerInfoInitialState","isReady","isPlaying","isBuffering","hasEnded","durationSeconds","volume","isMuted","pendingSeeks","getPlayersInfoState","playersInfo","getPlayerInfo","getIsPlayerPlaying","getIsPlayerBuffering","getPlayerDurationSeconds","getPlayerPlayedTime","getPlayerPlayedFraction","getPlayerLoadedTime","getPlayerLoadedFraction","getPlayerVolume","getIsPlayerMuted","getPlayerPendingSeeks","getMaxDurationPlayerId","compose","reduce","acc","curr","playerId","playerInfo","duration","entries","shouldPlayerCurrentlyPlay","maxDurationPlayerId","playerDuration","playerOffset","masterPlayedSeconds","areAllCorrectPlayersPlaying","Object","every","getSettingsState","settings","getIsFullscreen","getControlsMode","getLayout","getMainPlayerIds","getSecondaryPlayerIds","getIsPlayerMain","contains","canMovePlayerLeft","mainPlayerIds","secondaryPlayerIds","layout","indexInMain","indexOf","indexInSecondary","Layout","Overlay","canMovePlayerRight","length","getFocusedPlayerId","getFocusedPlayerInfo","focusedPlayerId","getIsFocusedPlayerPlaying","getFocusedPlayerDurationSeconds","getFocusedPlayerPlayedSeconds","getFocusedPlayerVolume","getIsFocusedPlayerMuted","playerStartPlaying","type","PLAYER_STARTED_PLAYING","payload","playerStopPlaying","PLAYER_STOPPED_PLAYING","playerStartBuffering","PLAYER_STARTED_BUFFERING","playerEndVideo","PLAYER_VIDEO_ENDED","playerUpdateVolume","PLAYER_VOLUME_UPDATED","playerMute","PLAYER_MUTED","playerUnmute","PLAYER_UNMUTED","playerPushPendingSeek","seekToSeconds","PLAYER_PENDING_SEEK_PUSHED","masterPlayerUpdateVolume","MASTER_PLAYER_VOLUME_UPDATED","masterPlayerMute","MASTER_PLAYER_MUTED","masterPlayerUnmute","MASTER_PLAYER_UNMUTED","startPlayback","dispatch","getState","isMasterReady","isMasterBuffering","keys","forEach","stopPlayback","seekTo","seconds","MASTER_PLAYER_PENDING_SEEK_SET","playerPlayedTime","PLAYER_VIDEO_RESTARTED","changeOffsetsReferencePlayerId","referenceId","OFFSETS_REFERENCE_PLAYER_ID_CHANGED","changePlayerOffset","offset","PLAYER_OFFSET_CHANGED","changeControlsMode","controlsMode","SETTINGS_CONTROLS_MODE_CHANGED","setMainAndSecondaryPlayerIds","SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED","enterFullscreen","SETTINGS_FULLSCREEN_ENTERED","ControlsMode","Grouped","exitFullscreen","SETTINGS_FULLSCREEN_EXITED","Individual","movePlayerToMainPlayers","filter","movePlayerToSecondaryPlayers","everyOtherPlayer","condition","currentId","masterPlayerInfoInitialState","pendingSeek","offsetsInitialState","referencePlayerId","settingsInitialState","isFullscreen","videosInitialState","rootReducer","combineReducers","action","MASTER_PLAYER_READY","MASTER_PLAYER_NOT_READY","MASTER_PLAYER_STARTED_PLAYING","MASTER_PLAYER_STOPPED_PLAYING","MASTER_PLAYER_STARTED_BUFFERING","MASTER_PLAYER_STOPPED_BUFFERING","MASTER_PLAYER_ENDED","MASTER_PLAYER_PENDING_SEEK_REMOVED","MASTER_PLAYER_DURATION_UPDATED","MASTER_PLAYER_PLAYED_TIME_UPDATED","MASTER_PLAYER_LOADED_TIME_UPDATED","MASTER_PLAYER_PROGRESS_UPDATED","PLAYER_INITIALIZED","PLAYER_READY","PLAYER_STOPPED_BUFFERING","PLAYER_DURATION_UPDATED","PLAYER_PLAYED_TIME_UPDATED","PLAYER_LOADED_TIME_UPDATED","PLAYER_PROGRESS_UPDATED","progress","PLAYER_PENDING_SEEK_POPPED","slice","SETTINGS_LAYOUT_CHANGED","SETTINGS_FOCUSED_PLAYER_ID_CHANGED","SETTINGS_MAIN_PLAYER_IDS_CHANGED","SETTINGS_SECONDARY_PLAYER_IDS_CHANGED","videos","VIDEOS_ADDED","VIDEO_REMOVED","omit","store","createStore","composeWithDevTools","applyMiddleware","thunk","next","prevState","maxOffset","maxOffsetPlayerId","Math","abs","player","masterDurationSeconds","newMasterDurationSeconds","max","min","masterPlayerUpdatePlayedTime","masterLoadedSeconds","masterPlayerUpdateLoadedTime","i","newMainPlayerId","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","UrlTextFieldContainer","styled","div","OrDividerContainer","OrDividerLine","props","color","OrDividerTextContainer","AddFilesContainer","isDragActive","activeColor","FilesListContainer","FileItemContainer","connect","addVideos","open","onClose","theme","useTheme","useState","uuidv4","url","urls","setUrls","files","setFiles","fileNames","setFileNames","useDropzone","accept","onDropAccepted","acceptedFiles","parsedFiles","map","file","name","URL","createObjectURL","acceptedVideos","fromEntries","acceptedNames","getRootProps","getInputProps","handleConfirm","useCallback","filterEmpty","handleKeyPress","e","key","useEffect","addEventListener","removeEventListener","handleUrlInputChange","target","value","handleUrlInputBlur","some","handleFileDelete","isConfirmActive","addFilesContainerProps","palette","primary","main","Dialog","fullWidth","DialogTitle","DialogContent","Typography","variant","index","urlTextFieldProps","onChange","onBlur","placeholder","TextField","divider","IconButton","size","onClick","Delete","fontSize","style","width","DialogActions","Button","disabled","createStructuredSelector","onAddVideosClick","Slide","in","position","Toolbar","src","process","alt","height","flex","masterPlayerStartPlaying","masterPlayerStopPlaying","playerSeekTo","masterPlayerSeekTo","isActive","shouldPreventDefault","code","newVolume","preventDefault","formatSeconds","totalSeconds","roundedSeconds","round","hours","floor","minutes","paddedHours","paddedMinutes","paddedSeconds","getOptimalGridPlayerSize","containerWidth","containerHeight","numberOfPlayers","left","right","iters","middle","ceil","playerWidth","playerHeight","canFitPlayersOfSize","playersInRow","getPlayerGridPositions","alignToRight","cols","rows","Array","from","_","row","leftOffset","top","PlaybackSliderInteractionContainer","PlaybackSliderContainer","wide","PlaybackSliderBar","attrs","PlaybackSliderScrubber","visible","PlaybackSliderTimePreviewContainer","throttledHandleSeek","throttle","onSeek","PlaybackSlider","isHovered","setIsHovered","isScrubberGrabbed","setIsScrubberGrabbed","internalPlayedFraction","setInternalPlayedFraction","mousePosFraction","setMousePosFraction","sliderContainerRef","useRef","getMousePosFraction","mouseX","sliderContainer","current","getBoundingClientRect","sliderContainerWidth","relativeMouseX","x","handleNewPlayedFractionSelected","newMousePosFraction","handleWindowMouseMove","event","clientX","handleMouseUp","isInteractable","interactionContainerProps","onMouseEnter","onMouseLeave","onMouseMove","onMouseDown","onMouseUp","Infinity","cursor","ref","light","VolumeControlContainer","isSliderVisible","VolumeControlIconContainer","VolumeControlSliderContainer","VolumeSlider","withStyles","root","thumb","boxShadow","active","track","marginTop","rail","Slider","throttledOnVolumeChange","onVolumeChange","getVolumeIcon","VolumeOff","VolumeDown","VolumeUp","VolumeControl","onMuteUnmute","isMouseOver","setIsMouseOver","isAdjustingVolume","setIsAdjustingVolume","internalVolume","setInternalVolume","volumeControlContainerProps","volumeControlSliderContainerProps","volumeSliderProps","step","v","parsedVolume","isArray","PlaybackControlBarContainer","PlaybackControlBarOuterWrapper","PlaybackControlBarInnerWrapper","PlaybackControlBarProgressTextWrapper","PlaybackControlBarButtonsSpacer","PlaybackControlBarActionsWrapper","PlaybackControlBar","onPlay","onPause","actions","playbackSliderProps","seekFraction","volumeControlProps","isLive","Pause","PlayArrow","ownProps","isMainPlayer","canMoveLeft","canMoveRight","makePlayerMain","movePlayerLeft","Grid","movePlayerRight","removeVideo","onHide","dense","settingsButtonRef","isSettingsMenuOpen","setIsSettingsMenuOpen","isDeleteConfirmationDialogShown","setIsDeleteConfirmationDialogShown","handleSettingsMenuHide","isShown","Focused","title","icon","CenterFocusWeak","ArrowBack","ArrowDownward","ArrowUpward","ArrowForward","VisibilityOff","Settings","Menu","anchorEl","MenuItem","ListItemIcon","Tooltip","DialogContentText","other","playbackControlBarProps","SettingsMenuContainer","SettingsMenuPaper","SettingsMenuListItemContainer","SettingsMenuListItemValueContainer","SettingsMenuListItemTitle","span","SettingsMenuListItemValue","SettingsMenuSectionHeader","SettingsMenuDescriptionListItemContainer","SettingsMenuDescriptionListItemCheckmarContainer","SettingsMenuDescriptionListItemTextContainer","SettingsMenuDescriptionListItemTitleContainer","SettingsMenuDescriptionListItemSubitleContainer","changeLayout","isOpen","anchorElement","selectedMenuIndex","setSelectedMenuIndex","popperProps","placement","zIndex","pointerEvents","settingsMenuContainerHeight","slideBaseProps","appear","mountOnEnter","unmountOnExit","Popper","direction","List","ListItem","button","Icon","ChevronRight","marginLeft","marginRight","ChevronLeft","Divider","backgroundColor","Check","toggleFullscreen","isVisible","settingsMenuProps","ClickAwayListener","onClickAway","display","justifyContent","alignItems","FullscreenExit","Fullscreen","updateVolume","mute","unmute","PlayerControlOverlayContainer","isBlockingPointerEvents","isCursorHidden","PlaybackControlBarWrapper","PlaybackControlOverlayBottomShadow","PlayerControlOverlayClickCapture","PlaybackControlBarFlexSpacer","MinimizedButtonContainer","changeFocusedPlayerId","hideControlsTimeoutId","isMinimized","setIsMinimized","isMouseOverPlayer","setIsMouseOverPlayer","isControlBarVisible","setIsControlBarVisible","updateHideTimeout","clearTimeout","setTimeout","isMaster","isOverlaid","playbackControlOverlayContainerProps","Fab","Visibility","VideoPlayerContainer","shadow","ReactPlayerWrapper","masterVolume","isPlayerMuted","isMasterMuted","initializePlayer","playerReady","playerStopBuffering","playerUpdateDuration","playerUpdateProgress","playerPopPendingSeek","video","playerRef","playerProps","controls","playing","onReady","onBuffer","onBufferEnd","onEnded","onDuration","onProgress","played","loaded","youtube","playerVars","disablekb","PlayersViewContainer","PlayersViewPlayerWrapper","padding","PlayersFocusedViewGrabber","heightFraction","PlayersFocusedViewGrabberDashes","PlayersOverlayViewGrabber","PlayersOverlayViewGrabberDashes","minPlayerHeight","containerRef","playerPositions","setPlayerPositions","isGrabberGrabbed","setIsGrabberGrabbed","focusedGrabberHeightFraction","setFocusedGrabberHeightFraction","overlayGrabberWidthFraction","setOverlayGrabberWidthFraction","overlayDimensions","setOverlayDimensions","updatePlayersFocusedPosition","container","mainContainerHeight","secondaryContainerHeight","mainPlayersSize","secondaryPlayersSize","mainPlayerPositions","secondaryPlayerPositions","pos","keyedMainPlayerPositions","positions","keyedSecondaryPlayerPositions","updatePlayersOverlayPosition","mainPlayerSize","mainPlayerPosition","lineWidth","minPlayerWidth","newCols","newRows","getPlayerLinePositions","offsetSecondaryPlayerPositions","overlayRows","overlayCols","updatePlayersGridPosition","playersSize","keyedPlayerPositions","getPlayerPosition","updateOverlayGrabberWidthFraction","mainPlayerWidth","overlayWidth","mouseY","clientY","relativeMouseY","y","clampedMouseY","mainPlayerLeft","clampedMouseX","handleGrabberMouseDown","handleGrabberMouseUp","focusedGrabberProps","overlayGrabberProps","mainPlayerTop","secondaryPlayerHeight","getOverlayGrabberPosition","playerPosition","isOverlaidSecondary","wrapperProps","undefined","GlobalStyle","createGlobalStyle","AppContainer","createMuiTheme","red","App","isAddVideosDialogOpen","setIsAddVideosDialogOpen","ThemeProvider","CssBaseline","ReactDOM","render","StrictMode","document","getElementById","href","origin","fetch","headers","response","contentType","status","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.e530faa5.chunk.js","sourcesContent":["export * from './state/types';\r\nexport * from './state/masterPlayerInfo/types';\r\nexport * from './state/offsets/types';\r\nexport * from './state/playersInfo/types';\r\nexport * from './state/settings/types';\r\nexport * from './state/videos/types';\r\n","import { createSelector } from 'reselect';\r\nimport { getOr } from 'lodash/fp';\r\nimport { State } from '../types';\r\nimport { MasterPlayerInfoState } from './types';\r\n\r\nexport const getMasterPlayerInfo = (state: State) => state.masterPlayerInfo;\r\n\r\nexport const getIsMasterPlayerPlaying = createSelector(\r\n    getMasterPlayerInfo,\r\n    getOr(false, 'isPlaying'),\r\n);\r\n\r\nexport const getIsMasterPlayerBuffering = createSelector(\r\n    getMasterPlayerInfo,\r\n    getOr(false, 'isBuffering'),\r\n);\r\n\r\nexport const getMasterPlayerDurationSeconds = createSelector(\r\n    getMasterPlayerInfo,\r\n    getOr(0, 'durationSeconds'),\r\n);\r\n\r\nexport const getMasterPlayerPlayedTime = createSelector(\r\n    getMasterPlayerInfo,\r\n    ({ playedSeconds, playedFraction }: MasterPlayerInfoState) => ({ playedSeconds, playedFraction }),\r\n);\r\n\r\nexport const getMasterPlayerPlayedSeconds = createSelector(\r\n    getMasterPlayerPlayedTime,\r\n    getOr(0, 'playedSeconds'),\r\n);\r\n\r\nexport const getMasterPlayerPlayedFraction = createSelector(\r\n    getMasterPlayerPlayedTime,\r\n    getOr(0, 'playedFraction'),\r\n);\r\n\r\nexport const getMasterPlayerLoadedTime = createSelector(\r\n    getMasterPlayerInfo,\r\n    ({ loadedSeconds, loadedFraction }: MasterPlayerInfoState) => ({ loadedSeconds, loadedFraction }),\r\n);\r\n\r\nexport const getMasterPlayerLoadedSeconds = createSelector(\r\n    getMasterPlayerLoadedTime,\r\n    getOr(0, 'loadedSeconds'),\r\n);\r\n\r\nexport const getMasterPlayerLoadedFraction = createSelector(\r\n    getMasterPlayerLoadedTime,\r\n    getOr(0, 'loadedFraction'),\r\n);\r\n\r\nexport const getMasterPlayerVolume = createSelector(\r\n    getMasterPlayerInfo,\r\n    getOr(1, 'volume'),\r\n);\r\n\r\nexport const getIsMasterPlayerMuted = createSelector(\r\n    getMasterPlayerInfo,\r\n    getOr(false, 'isMuted'),\r\n);\r\n\r\nexport const getMasterPendingSeek = createSelector(\r\n    getMasterPlayerInfo,\r\n    getOr(null, 'pendingSeek'),\r\n);\r\n","import memoize from 'fast-memoize';\r\nimport { createSelector } from 'reselect';\r\nimport { get, getOr } from 'lodash/fp';\r\nimport { State } from '../types';\r\nimport { OffsetsState } from './types';\r\n\r\nexport const getOffsetsState = (state: State) => state.offsets;\r\n\r\nexport const getOffsetsReferencePlayerId = createSelector<State, OffsetsState, string | null>(\r\n    getOffsetsState,\r\n    get('referencePlayerId'),\r\n);\r\n\r\nexport const getOffsets = createSelector<State, OffsetsState, Record<string, number>>(\r\n    getOffsetsState,\r\n    get('offsets'),\r\n);\r\n\r\nconst getPlayerOffsetBase = (id: string) => createSelector(\r\n    getOffsets,\r\n    getOr(0, id),\r\n);\r\nexport const getPlayerOffset = memoize(getPlayerOffsetBase);\r\n","import {\r\n    PlayerInfo,\r\n    PlayersInfoState,\r\n    PlayersInfoAction,\r\n    PLAYER_INITIALIZED,\r\n    PLAYER_READY,\r\n    PLAYER_STARTED_PLAYING,\r\n    PLAYER_STOPPED_PLAYING,\r\n    PLAYER_STARTED_BUFFERING,\r\n    PLAYER_STOPPED_BUFFERING,\r\n    PLAYER_VIDEO_ENDED,\r\n    PLAYER_VIDEO_RESTARTED,\r\n    PLAYER_DURATION_UPDATED,\r\n    PLAYER_PLAYED_TIME_UPDATED,\r\n    PLAYER_LOADED_TIME_UPDATED,\r\n    PLAYER_PROGRESS_UPDATED,\r\n    PLAYER_VOLUME_UPDATED,\r\n    PLAYER_MUTED,\r\n    PLAYER_UNMUTED,\r\n    PLAYER_PENDING_SEEK_PUSHED,\r\n    PLAYER_PENDING_SEEK_POPPED,\r\n} from './types';\r\n\r\nexport const playersInfoInitialState: PlayersInfoState = {};\r\n\r\nexport const playerInfoInitialState: PlayerInfo = {\r\n    isReady: false,\r\n    isPlaying: false,\r\n    isBuffering: false,\r\n    hasEnded: false,\r\n    durationSeconds: 0,\r\n    playedSeconds: 0,\r\n    playedFraction: 0,\r\n    loadedSeconds: 0,\r\n    loadedFraction: 0,\r\n    volume: 1,\r\n    isMuted: false,\r\n    pendingSeeks: [],\r\n};\r\n\r\nexport const playersInfoReducer = (state = playersInfoInitialState, action: PlayersInfoAction) => {\r\n    switch (action.type) {\r\n        case PLAYER_INITIALIZED:\r\n            return { ...state, [action.payload.id]: { ...playerInfoInitialState } };\r\n\r\n        case PLAYER_READY:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                isReady: true,\r\n            } };\r\n\r\n        case PLAYER_STARTED_PLAYING:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                isPlaying: true,\r\n                isBuffering: false,\r\n                hasEnded: false,\r\n            } };\r\n\r\n        case PLAYER_STOPPED_PLAYING:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                isPlaying: false,\r\n            } };\r\n\r\n        case PLAYER_STARTED_BUFFERING:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                isBuffering: true,\r\n            } };\r\n\r\n        case PLAYER_STOPPED_BUFFERING:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                isBuffering: false,\r\n            } };\r\n\r\n        case PLAYER_VIDEO_ENDED:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                hasEnded: true,\r\n                isBuffering: false,\r\n            } };\r\n\r\n        case PLAYER_VIDEO_RESTARTED:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                hasEnded: false,\r\n            } };\r\n\r\n        case PLAYER_DURATION_UPDATED:\r\n            const { durationSeconds } = action.payload;\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                durationSeconds,\r\n            } };\r\n\r\n        case PLAYER_PLAYED_TIME_UPDATED:\r\n            const { playedSeconds, playedFraction } = action.payload;\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                playedSeconds,\r\n                playedFraction,\r\n            } };\r\n\r\n        case PLAYER_LOADED_TIME_UPDATED:\r\n            const { loadedSeconds, loadedFraction } = action.payload;\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                loadedSeconds,\r\n                loadedFraction,\r\n            } };\r\n\r\n        case PLAYER_PROGRESS_UPDATED:\r\n            const { id, ...progress } = action.payload;\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                ...progress,\r\n            } };\r\n\r\n        case PLAYER_VOLUME_UPDATED:\r\n            const { volume } = action.payload;\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                volume,\r\n                isMuted: false,\r\n            } };\r\n\r\n        case PLAYER_MUTED:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                isMuted: true,\r\n            } };\r\n\r\n        case PLAYER_UNMUTED:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                isMuted: false,\r\n            } };\r\n\r\n        case PLAYER_PENDING_SEEK_PUSHED:\r\n            const { seekToSeconds } = action.payload;\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                pendingSeeks: [\r\n                    ...state[action.payload.id].pendingSeeks,\r\n                    seekToSeconds,\r\n                ],\r\n            } };\r\n\r\n        case PLAYER_PENDING_SEEK_POPPED:\r\n            return { ...state, [action.payload.id]: {\r\n                ...state[action.payload.id],\r\n                pendingSeeks: [\r\n                    ...state[action.payload.id].pendingSeeks.slice(1),\r\n                ],\r\n            } };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import memoize from 'fast-memoize';\r\nimport { createSelector } from 'reselect';\r\nimport { compose, entries, get, getOr, reduce } from 'lodash/fp';\r\nimport { getMasterPlayerPlayedSeconds } from '../masterPlayerInfo/selectors';\r\nimport { getPlayerOffset } from '../offsets/selectors';\r\nimport { State } from '../types';\r\nimport { PlayerInfo, PlayersInfoState } from './types';\r\nimport { playerInfoInitialState } from './reducer';\r\n\r\nexport const getPlayersInfoState = (state: State) => state.playersInfo;\r\n\r\nconst getPlayerInfoBase = (id: string) => createSelector(\r\n    getPlayersInfoState,\r\n    getOr(playerInfoInitialState, id),\r\n);\r\nexport const getPlayerInfo = memoize(getPlayerInfoBase);\r\n\r\nconst getIsPlayerPlayingBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    getOr(false, 'isPlaying'),\r\n);\r\nexport const getIsPlayerPlaying = memoize(getIsPlayerPlayingBase);\r\n\r\nconst getIsPlayerBufferingBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    getOr(false, 'isBuffering'),\r\n);\r\nexport const getIsPlayerBuffering = memoize(getIsPlayerBufferingBase);\r\n\r\nconst getPlayerDurationSecondsBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    getOr(0, 'durationSeconds'),\r\n);\r\nexport const getPlayerDurationSeconds = memoize(getPlayerDurationSecondsBase);\r\n\r\nconst getPlayerPlayedTimeBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    ({ playedSeconds, playedFraction }: PlayerInfo) => ({ playedSeconds, playedFraction }),\r\n);\r\nexport const getPlayerPlayedTime = memoize(getPlayerPlayedTimeBase);\r\n\r\nconst getPlayerPlayedSecondsBase = (id: string) => createSelector(\r\n    getPlayerPlayedTime(id),\r\n    getOr(0, 'playedSeconds'),\r\n);\r\nexport const getPlayerPlayedSeconds = memoize(getPlayerPlayedSecondsBase);\r\n\r\nconst getPlayerPlayedFractionBase = (id: string) => createSelector(\r\n    getPlayerPlayedTime(id),\r\n    getOr(0, 'playedFraction'),\r\n);\r\nexport const getPlayerPlayedFraction = memoize(getPlayerPlayedFractionBase);\r\n\r\nconst getPlayerLoadedTimeBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    ({ loadedSeconds, loadedFraction }: PlayerInfo) => ({ loadedSeconds, loadedFraction }),\r\n);\r\nexport const getPlayerLoadedTime = memoize(getPlayerLoadedTimeBase);\r\n\r\nconst getPlayerLoadedSecondsBase = (id: string) => createSelector(\r\n    getPlayerLoadedTime(id),\r\n    getOr(0, 'loadedSeconds'),\r\n);\r\nexport const getPlayerLoadedSeconds = memoize(getPlayerLoadedSecondsBase);\r\n\r\nconst getPlayerLoadedFractionBase = (id: string) => createSelector(\r\n    getPlayerLoadedTime(id),\r\n    getOr(0, 'loadedFraction'),\r\n);\r\nexport const getPlayerLoadedFraction = memoize(getPlayerLoadedFractionBase);\r\n\r\nconst hasPlayerEndedBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    getOr(false, 'hasEnded'),\r\n);\r\nexport const hasPlayerEnded = memoize(hasPlayerEndedBase);\r\n\r\nconst getPlayerVolumeBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    getOr(1, 'volume'),\r\n);\r\nexport const getPlayerVolume = memoize(getPlayerVolumeBase);\r\n\r\nconst getIsPlayerMutedBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    getOr(false, 'isMuted'),\r\n);\r\nexport const getIsPlayerMuted = memoize(getIsPlayerMutedBase);\r\n\r\nconst getPlayerPendingSeeksBase = (id: string) => createSelector(\r\n    getPlayerInfo(id),\r\n    getOr([], 'pendingSeeks'),\r\n);\r\nexport const getPlayerPendingSeeks = memoize(getPlayerPendingSeeksBase);\r\n\r\nexport const getMaxDurationPlayerId = createSelector<State, PlayersInfoState, string | null>(\r\n    getPlayersInfoState,\r\n    compose(\r\n        get('id'),\r\n        reduce<[string, PlayerInfo], { duration: number; id: string | null }>(\r\n            (acc, curr) => {\r\n                const [playerId, playerInfo] = curr;\r\n\r\n                if (playerInfo.durationSeconds > acc.duration) {\r\n                    return {\r\n                        duration: playerInfo.durationSeconds,\r\n                        id: playerId,\r\n                    };\r\n                }\r\n\r\n                return acc;\r\n            },\r\n            { duration: 0, id: null },\r\n        ),\r\n        entries,\r\n    ),\r\n);\r\n\r\nexport const getMaxDuration = createSelector(\r\n    getPlayersInfoState,\r\n    getMaxDurationPlayerId,\r\n    (playersInfo: PlayersInfoState, maxDurationPlayerId: string | null) => maxDurationPlayerId ? get(maxDurationPlayerId, playersInfo).durationSeconds : 0,\r\n);\r\n\r\nconst shouldPlayerCurrentlyPlayBase = (id: string) => createSelector(\r\n    getPlayerDurationSeconds(id),\r\n    getPlayerOffset(id),\r\n    getMasterPlayerPlayedSeconds,\r\n    (playerDuration: number, playerOffset: number, masterPlayedSeconds: number) => (\r\n        -playerOffset <= masterPlayedSeconds && masterPlayedSeconds <= playerDuration - playerOffset\r\n    ),\r\n);\r\nexport const shouldPlayerCurrentlyPlay = memoize(shouldPlayerCurrentlyPlayBase);\r\n\r\nexport const areAllCorrectPlayersPlaying = (state: State) => (\r\n    Object.entries(getPlayersInfoState(state)).every(([playerId, playerInfo]) => (\r\n        !shouldPlayerCurrentlyPlay(playerId)(state) || (playerInfo.isPlaying && shouldPlayerCurrentlyPlay(playerId)(state))\r\n    ))\r\n);\r\n","import memoize from 'fast-memoize';\r\nimport { createSelector } from 'reselect';\r\nimport { contains, get, getOr } from 'lodash/fp';\r\nimport { State } from '../types';\r\nimport { getPlayersInfoState } from '../playersInfo/selectors';\r\nimport { getMasterPlayerInfo } from '../masterPlayerInfo/selectors';\r\nimport { SettingsState, ControlsMode, Layout } from './types';\r\n\r\nexport const getSettingsState = (state: State) => state.settings;\r\n\r\nexport const getIsFullscreen = createSelector<State, SettingsState, boolean>(\r\n    getSettingsState,\r\n    get('isFullscreen'),\r\n);\r\n\r\nexport const getControlsMode = createSelector<State, SettingsState, ControlsMode>(\r\n    getSettingsState,\r\n    get('controlsMode'),\r\n);\r\n\r\nexport const getLayout = createSelector<State, SettingsState, Layout>(\r\n    getSettingsState,\r\n    get('layout'),\r\n);\r\n\r\nexport const getMainPlayerIds = createSelector<State, SettingsState, string[]>(\r\n    getSettingsState,\r\n    get('mainPlayerIds'),\r\n);\r\n\r\nexport const getSecondaryPlayerIds = createSelector<State, SettingsState, string[]>(\r\n    getSettingsState,\r\n    get('secondaryPlayerIds'),\r\n);\r\n\r\nconst getIsPlayerMainBase = (id: string) => createSelector<State, string[], boolean>(\r\n    getMainPlayerIds,\r\n    contains(id),\r\n);\r\nexport const getIsPlayerMain = memoize(getIsPlayerMainBase);\r\n\r\nconst getIsPlayerSecondaryBase = (id: string) => createSelector<State, string[], boolean>(\r\n    getSecondaryPlayerIds,\r\n    contains(id),\r\n);\r\nexport const getIsPlayerSecondary = memoize(getIsPlayerSecondaryBase);\r\n\r\nconst canMovePlayerLeftBase = (id: string) => createSelector<State, string[], string[], Layout, boolean>(\r\n    getMainPlayerIds,\r\n    getSecondaryPlayerIds,\r\n    getLayout,\r\n    (mainPlayerIds, secondaryPlayerIds, layout) => {\r\n        const indexInMain = mainPlayerIds.indexOf(id);\r\n        const indexInSecondary = secondaryPlayerIds.indexOf(id);\r\n\r\n        if (indexInMain === 0) {\r\n            return false;\r\n        }\r\n\r\n        if (indexInSecondary === 0 && layout === Layout.Overlay) {\r\n            return false;\r\n        }\r\n        \r\n        return true;\r\n    },\r\n);\r\nexport const canMovePlayerLeft = memoize(canMovePlayerLeftBase);\r\n\r\nconst canMovePlayerRightBase = (id: string) => createSelector<State, string[], string[], Layout, boolean>(\r\n    getMainPlayerIds,\r\n    getSecondaryPlayerIds,\r\n    getLayout,\r\n    (mainPlayerIds, secondaryPlayerIds, layout) => {\r\n        const indexInMain = mainPlayerIds.indexOf(id);\r\n        const indexInSecondary = secondaryPlayerIds.indexOf(id);\r\n\r\n        if (indexInSecondary === secondaryPlayerIds.length - 1) {\r\n            return false;\r\n        }\r\n\r\n        if (indexInMain === mainPlayerIds.length - 1 && layout === Layout.Overlay) {\r\n            return false;\r\n        }\r\n        \r\n        return true;\r\n    },\r\n);\r\nexport const canMovePlayerRight = memoize(canMovePlayerRightBase);\r\n\r\nexport const getFocusedPlayerId = createSelector<State, SettingsState, string | null>(\r\n    getSettingsState,\r\n    get('focusedPlayerId'),\r\n);\r\n\r\nexport const getFocusedPlayerInfo = createSelector(\r\n    getFocusedPlayerId,\r\n    getPlayersInfoState,\r\n    getMasterPlayerInfo,\r\n    (focusedPlayerId, playersInfo, masterPlayerInfo) => {\r\n        if (focusedPlayerId) {\r\n            return playersInfo[focusedPlayerId];\r\n        }\r\n\r\n        return masterPlayerInfo;\r\n    },\r\n);\r\n\r\nexport const getIsFocusedPlayerPlaying = createSelector(\r\n    getFocusedPlayerInfo,\r\n    getOr(false, 'isPlaying'),\r\n);\r\n\r\nexport const getFocusedPlayerDurationSeconds = createSelector(\r\n    getFocusedPlayerInfo,\r\n    getOr(0, 'durationSeconds'),\r\n);\r\n\r\nexport const getFocusedPlayerPlayedSeconds = createSelector(\r\n    getFocusedPlayerInfo,\r\n    getOr(0, 'playedSeconds'),\r\n);\r\n\r\nexport const getFocusedPlayerVolume = createSelector(\r\n    getFocusedPlayerInfo,\r\n    getOr(1, 'volume'),\r\n);\r\n\r\nexport const getIsFocusedPlayerMuted = createSelector(\r\n    getFocusedPlayerInfo,\r\n    getOr(false, 'isMuted'),\r\n);\r\n","import {\r\n    PlayerInitializedAction,\r\n    PlayerReadyAction,\r\n    PlayerStartedPlayingAction,\r\n    PlayerStoppedPlayingAction,\r\n    PlayerStartedBufferingAction,\r\n    PlayerStoppedBufferingAction,\r\n    PlayerVideoEndedAction,\r\n    PlayerVideoRestartedAction,\r\n    PlayerDurationUpdatedAction,\r\n    PlayerPlayedTimeUpdatedAction,\r\n    PlayerLoadedTimeUpdatedAction,\r\n    PlayerProgressUpdatedAction,\r\n    PlayerVolumeUpdatedAction,\r\n    PlayerMutedAction,\r\n    PlayerUnmutedAction,\r\n    PlayerPendingSeekPushedAction,\r\n    PlayerPendingSeekPoppedAction,\r\n    PLAYER_INITIALIZED,\r\n    PLAYER_READY,\r\n    PLAYER_STARTED_PLAYING,\r\n    PLAYER_STOPPED_PLAYING,\r\n    PLAYER_STARTED_BUFFERING,\r\n    PLAYER_STOPPED_BUFFERING,\r\n    PLAYER_VIDEO_ENDED,\r\n    PLAYER_VIDEO_RESTARTED,\r\n    PLAYER_DURATION_UPDATED,\r\n    PLAYER_PLAYED_TIME_UPDATED,\r\n    PLAYER_LOADED_TIME_UPDATED,\r\n    PLAYER_PROGRESS_UPDATED,\r\n    PLAYER_VOLUME_UPDATED,\r\n    PLAYER_MUTED,\r\n    PLAYER_UNMUTED,\r\n    PLAYER_PENDING_SEEK_PUSHED,\r\n    PLAYER_PENDING_SEEK_POPPED,\r\n} from './types';\r\n\r\nexport const initializePlayer = (id: string): PlayerInitializedAction => ({\r\n    type: PLAYER_INITIALIZED,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerReady = (id: string): PlayerReadyAction => ({\r\n    type: PLAYER_READY,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerStartPlaying = (id: string): PlayerStartedPlayingAction => ({\r\n    type: PLAYER_STARTED_PLAYING,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerStopPlaying = (id: string): PlayerStoppedPlayingAction => ({\r\n    type: PLAYER_STOPPED_PLAYING,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerStartBuffering = (id: string): PlayerStartedBufferingAction => ({\r\n    type: PLAYER_STARTED_BUFFERING,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerStopBuffering = (id: string): PlayerStoppedBufferingAction => ({\r\n    type: PLAYER_STOPPED_BUFFERING,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerEndVideo = (id: string): PlayerVideoEndedAction => ({\r\n    type: PLAYER_VIDEO_ENDED,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerRestartVideo = (id: string): PlayerVideoRestartedAction => ({\r\n    type: PLAYER_VIDEO_RESTARTED,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerUpdateDuration = (id: string, { durationSeconds }: { durationSeconds: number }): PlayerDurationUpdatedAction => ({\r\n    type: PLAYER_DURATION_UPDATED,\r\n    payload: { id, durationSeconds },\r\n});\r\n\r\ninterface PlayedProgress {\r\n    playedSeconds: number;\r\n    playedFraction: number;\r\n}\r\n\r\nexport const playerUpdatePlayedTime = (id: string, { playedSeconds, playedFraction }: PlayedProgress): PlayerPlayedTimeUpdatedAction => ({\r\n    type: PLAYER_PLAYED_TIME_UPDATED,\r\n    payload: { id, playedSeconds, playedFraction },\r\n});\r\n\r\ninterface LoadedProgress {\r\n    loadedSeconds: number;\r\n    loadedFraction: number;\r\n}\r\n\r\nexport const playerUpdateLoadedTime = (id: string, { loadedSeconds, loadedFraction }: LoadedProgress): PlayerLoadedTimeUpdatedAction => ({\r\n    type: PLAYER_LOADED_TIME_UPDATED,\r\n    payload: { id, loadedSeconds, loadedFraction },\r\n});\r\n\r\nexport const playerUpdateProgress = (id: string, progress: PlayedProgress & LoadedProgress): PlayerProgressUpdatedAction => ({\r\n    type: PLAYER_PROGRESS_UPDATED,\r\n    payload: { id, ...progress },\r\n});\r\n\r\nexport const playerUpdateVolume = (id: string, { volume }: { volume: number }): PlayerVolumeUpdatedAction => ({\r\n    type: PLAYER_VOLUME_UPDATED,\r\n    payload: { id, volume },\r\n});\r\n\r\nexport const playerMute = (id: string): PlayerMutedAction => ({\r\n    type: PLAYER_MUTED,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerUnmute = (id: string): PlayerUnmutedAction => ({\r\n    type: PLAYER_UNMUTED,\r\n    payload: { id },\r\n});\r\n\r\nexport const playerPushPendingSeek = (id: string, { seekToSeconds }: { seekToSeconds: number }): PlayerPendingSeekPushedAction => ({\r\n    type: PLAYER_PENDING_SEEK_PUSHED,\r\n    payload: { id, seekToSeconds },\r\n});\r\n\r\nexport const playerPopPendingSeek = (id: string): PlayerPendingSeekPoppedAction => ({\r\n    type: PLAYER_PENDING_SEEK_POPPED,\r\n    payload: { id },\r\n});\r\n","import { AppThunkAction } from '../types';\r\nimport { playerEndVideo, playerPushPendingSeek, playerRestartVideo, playerStartPlaying, playerStopPlaying } from '../playersInfo/actions';\r\nimport { getPlayersInfoState, shouldPlayerCurrentlyPlay } from '../playersInfo/selectors';\r\nimport { getPlayerOffset } from '../offsets/selectors';\r\nimport { getMasterPlayerInfo } from './selectors';\r\nimport {\r\n    MasterPlayerReadyAction,\r\n    MasterPlayerNotReadyAction,\r\n    MasterPlayerStartedPlayingAction,\r\n    MasterPlayerStoppedPlayingAction,\r\n    MasterPlayerStartedBufferingAction,\r\n    MasterPlayerStoppedBufferingAction,\r\n    MasterPlayerEndedAction,\r\n    MasterPlayerDurationUpdatedAction,\r\n    MasterPlayerPlayedTimeUpdatedAction,\r\n    MasterPlayerLoadedTimeUpdatedAction,\r\n    MasterPlayerProgressUpdatedAction,\r\n    MasterPlayerVolumeUpdatedAction,\r\n    MasterPlayerMutedAction,\r\n    MasterPlayerUnmutedAction,\r\n    MasterPlayerPendingSeekSetAction,\r\n    MasterPlayerPendingSeekRemovedAction,\r\n    MASTER_PLAYER_READY,\r\n    MASTER_PLAYER_NOT_READY,\r\n    MASTER_PLAYER_STARTED_PLAYING,\r\n    MASTER_PLAYER_STOPPED_PLAYING,\r\n    MASTER_PLAYER_STARTED_BUFFERING,\r\n    MASTER_PLAYER_STOPPED_BUFFERING,\r\n    MASTER_PLAYER_ENDED,\r\n    MASTER_PLAYER_DURATION_UPDATED,\r\n    MASTER_PLAYER_PLAYED_TIME_UPDATED,\r\n    MASTER_PLAYER_LOADED_TIME_UPDATED,\r\n    MASTER_PLAYER_PROGRESS_UPDATED,\r\n    MASTER_PLAYER_VOLUME_UPDATED,\r\n    MASTER_PLAYER_MUTED,\r\n    MASTER_PLAYER_UNMUTED,\r\n    MASTER_PLAYER_PENDING_SEEK_SET,\r\n    MASTER_PLAYER_PENDING_SEEK_REMOVED,\r\n} from './types';\r\n\r\nexport const masterPlayerReady = (): MasterPlayerReadyAction => ({\r\n    type: MASTER_PLAYER_READY,\r\n});\r\n\r\nexport const masterPlayerNotReady = (): MasterPlayerNotReadyAction => ({\r\n    type: MASTER_PLAYER_NOT_READY,\r\n});\r\n\r\nexport const masterPlayerStartPlaying = (): MasterPlayerStartedPlayingAction => ({\r\n    type: MASTER_PLAYER_STARTED_PLAYING,\r\n});\r\n\r\nexport const masterPlayerStopPlaying = (): MasterPlayerStoppedPlayingAction => ({\r\n    type: MASTER_PLAYER_STOPPED_PLAYING,\r\n});\r\n\r\nexport const masterPlayerStartBuffering = (): MasterPlayerStartedBufferingAction => ({\r\n    type: MASTER_PLAYER_STARTED_BUFFERING,\r\n});\r\n\r\nexport const masterPlayerStopBuffering = (): MasterPlayerStoppedBufferingAction => ({\r\n    type: MASTER_PLAYER_STOPPED_BUFFERING,\r\n});\r\n\r\nexport const masterPlayerEnd = (): MasterPlayerEndedAction => ({\r\n    type: MASTER_PLAYER_ENDED,\r\n});\r\n\r\nexport const masterPlayerUpdateDuration = (durationSeconds: number): MasterPlayerDurationUpdatedAction => ({\r\n    type: MASTER_PLAYER_DURATION_UPDATED,\r\n    payload: { durationSeconds },\r\n});\r\n\r\ninterface PlayedProgress {\r\n    playedSeconds: number;\r\n    playedFraction: number;\r\n}\r\n\r\nexport const masterPlayerUpdatePlayedTime = ({ playedSeconds, playedFraction }: PlayedProgress): MasterPlayerPlayedTimeUpdatedAction => ({\r\n    type: MASTER_PLAYER_PLAYED_TIME_UPDATED,\r\n    payload: { playedSeconds, playedFraction },\r\n});\r\n\r\ninterface LoadedProgress {\r\n    loadedSeconds: number;\r\n    loadedFraction: number;\r\n}\r\n\r\nexport const masterPlayerUpdateLoadedTime = ({ loadedSeconds, loadedFraction }: LoadedProgress): MasterPlayerLoadedTimeUpdatedAction => ({\r\n    type: MASTER_PLAYER_LOADED_TIME_UPDATED,\r\n    payload: { loadedSeconds, loadedFraction },\r\n});\r\n\r\nexport const masterPlayerUpdateProgress = (progress: PlayedProgress & LoadedProgress): MasterPlayerProgressUpdatedAction => ({\r\n    type: MASTER_PLAYER_PROGRESS_UPDATED,\r\n    payload: { ...progress },\r\n});\r\n\r\nexport const masterPlayerUpdateVolume = (volume: number): MasterPlayerVolumeUpdatedAction => ({\r\n    type: MASTER_PLAYER_VOLUME_UPDATED,\r\n    payload: { volume },\r\n});\r\n\r\nexport const masterPlayerMute = (): MasterPlayerMutedAction => ({\r\n    type: MASTER_PLAYER_MUTED,\r\n});\r\n\r\nexport const masterPlayerUnmute = (): MasterPlayerUnmutedAction => ({\r\n    type: MASTER_PLAYER_UNMUTED,\r\n});\r\n\r\nexport const masterPlayerSetPendingSeek = (seekToSeconds: number): MasterPlayerPendingSeekSetAction => ({\r\n    type: MASTER_PLAYER_PENDING_SEEK_SET,\r\n    payload: { seekToSeconds },\r\n});\r\n\r\nexport const masterPlayerRemovePendingSeek = (): MasterPlayerPendingSeekRemovedAction => ({\r\n    type: MASTER_PLAYER_PENDING_SEEK_REMOVED,\r\n});\r\n\r\nexport const startPlayback = (): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const {\r\n        isReady: isMasterReady,\r\n        isBuffering: isMasterBuffering,\r\n    } = getMasterPlayerInfo(state);\r\n\r\n    if (isMasterReady && !isMasterBuffering) {\r\n        Object.keys(getPlayersInfoState(state)).forEach(id => {\r\n            if (shouldPlayerCurrentlyPlay(id)(state)) {\r\n                dispatch(playerStartPlaying(id));\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport const stopPlayback = (): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    Object.keys(state.playersInfo).forEach(id => dispatch(playerStopPlaying(id)));\r\n};\r\n\r\nexport const seekTo = (seconds: number): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    dispatch(masterPlayerSetPendingSeek(seconds));\r\n\r\n    Object.entries(getPlayersInfoState(state)).forEach(([playerId, playerInfo]) => {\r\n        const { playedSeconds, durationSeconds } = playerInfo;\r\n        const playerOffset = getPlayerOffset(playerId)(state);\r\n\r\n        if (-playerOffset > seconds) {\r\n            if (playedSeconds > 0) {\r\n                dispatch(playerPushPendingSeek(playerId, { seekToSeconds: 0 }));\r\n            }\r\n\r\n            dispatch(playerStopPlaying(playerId));\r\n        } else if (seconds >= durationSeconds - playerOffset) {\r\n            if (playedSeconds < durationSeconds) {\r\n                dispatch(playerPushPendingSeek(playerId, { seekToSeconds: durationSeconds }));\r\n            }\r\n\r\n            dispatch(playerStopPlaying(playerId));\r\n            dispatch(playerEndVideo(playerId));\r\n        } else {\r\n            const playerPlayedTime = seconds + playerOffset;\r\n            dispatch(playerRestartVideo(playerId));\r\n            dispatch(playerPushPendingSeek(playerId, { seekToSeconds: playerPlayedTime }));\r\n\r\n            if (getMasterPlayerInfo(state).isPlaying) {\r\n                dispatch(playerStartPlaying(playerId));\r\n            }\r\n        }\r\n    });\r\n};\r\n","import { AppThunkAction } from '../types';\r\nimport { getOffsets } from './selectors';\r\nimport { OffsetsReferencePlayerIdChangedAction, PlayerOffsetChangedAction, OFFSETS_REFERENCE_PLAYER_ID_CHANGED, PLAYER_OFFSET_CHANGED } from './types';\r\n\r\nexport const changeOffsetsReferencePlayerId = (referenceId: string): OffsetsReferencePlayerIdChangedAction => ({\r\n    type: OFFSETS_REFERENCE_PLAYER_ID_CHANGED,\r\n    payload: { referenceId },\r\n});\r\n\r\nexport const changePlayerOffset = (id: string, { offset }: { offset: number }): PlayerOffsetChangedAction => ({\r\n    type: PLAYER_OFFSET_CHANGED,\r\n    payload: { id, offset },\r\n});\r\n\r\nexport const normalizeOffsets = (): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const { maxOffset, maxOffsetPlayerId } = Object.entries(getOffsets(state)).reduce(\r\n        (acc, [playerId, playerOffset]) => {\r\n            if (playerOffset > acc.maxOffset) {\r\n                return {\r\n                    maxOffset: playerOffset,\r\n                    maxOffsetPlayerId: playerId,\r\n                };\r\n            }\r\n\r\n            return acc;\r\n        },\r\n        {\r\n            maxOffset: -Infinity,\r\n            maxOffsetPlayerId: '',\r\n        },\r\n    );\r\n\r\n    if (maxOffsetPlayerId !== '' && Math.abs(maxOffset) > 1.5) {\r\n        dispatch(changeOffsetsReferencePlayerId(maxOffsetPlayerId));\r\n        dispatch(changePlayerOffset(maxOffsetPlayerId, { offset: 0 }));\r\n        \r\n        Object.entries(getOffsets(state)).forEach(([playerId, playerOffset]) => {\r\n            if (playerId !== maxOffsetPlayerId) {\r\n                dispatch(changePlayerOffset(playerId, {\r\n                    offset: playerOffset - maxOffset,\r\n                }));\r\n            }\r\n        });\r\n    }\r\n};\r\n","import { AppThunkAction } from '../types';\r\nimport { getIsFullscreen, getLayout, getMainPlayerIds, getSecondaryPlayerIds } from './selectors';\r\nimport {\r\n    ControlsMode,\r\n    Layout,\r\n    SettingsFullscreenEnteredAction,\r\n    SettingsFullscreenExitedAction,\r\n    SettingsControlsModeChangedAction,\r\n    SettingsLayoutChangedAction,\r\n    SettingsFocusedPlayerIdChangedAction,\r\n    SettingsMainPlayerIdsChangedAction,\r\n    SettingsSecondaryPlayerIdsChangedAction,\r\n    SETTINGS_FULLSCREEN_ENTERED,\r\n    SETTINGS_FULLSCREEN_EXITED,\r\n    SETTINGS_CONTROLS_MODE_CHANGED,\r\n    SETTINGS_LAYOUT_CHANGED,\r\n    SETTINGS_FOCUSED_PLAYER_ID_CHANGED,\r\n    SETTINGS_MAIN_PLAYER_IDS_CHANGED,\r\n    SETTINGS_SECONDARY_PLAYER_IDS_CHANGED,\r\n    SettingsMainAndSecondaryPlayerIdsChanged,\r\n    SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED,\r\n} from './types';\r\n\r\nexport const setFullscreenOn = (): SettingsFullscreenEnteredAction => ({\r\n    type: SETTINGS_FULLSCREEN_ENTERED,\r\n});\r\n\r\nexport const setFullscreenOff = (): SettingsFullscreenExitedAction => ({\r\n    type: SETTINGS_FULLSCREEN_EXITED,\r\n});\r\n\r\nexport const changeControlsMode = (controlsMode: ControlsMode): SettingsControlsModeChangedAction => ({\r\n    type: SETTINGS_CONTROLS_MODE_CHANGED,\r\n    payload: { controlsMode },\r\n});\r\n\r\nexport const changeLayout = (layout: Layout): SettingsLayoutChangedAction => ({\r\n    type: SETTINGS_LAYOUT_CHANGED,\r\n    payload: { layout },\r\n});\r\n\r\nexport const changeFocusedPlayerId = (focusedPlayerId: string | null): SettingsFocusedPlayerIdChangedAction => ({\r\n    type: SETTINGS_FOCUSED_PLAYER_ID_CHANGED,\r\n    payload: { focusedPlayerId },\r\n});\r\n\r\nexport const setMainPlayerIds = (mainPlayerIds: string[]): SettingsMainPlayerIdsChangedAction => ({\r\n    type: SETTINGS_MAIN_PLAYER_IDS_CHANGED,\r\n    payload: { mainPlayerIds },\r\n});\r\n\r\nexport const setSecondaryPlayerIds = (secondaryPlayerIds: string[]): SettingsSecondaryPlayerIdsChangedAction => ({\r\n    type: SETTINGS_SECONDARY_PLAYER_IDS_CHANGED,\r\n    payload: { secondaryPlayerIds },\r\n});\r\n\r\nexport const setMainAndSecondaryPlayerIds = (payload: { mainPlayerIds: string[]; secondaryPlayerIds: string[] }): SettingsMainAndSecondaryPlayerIdsChanged => ({\r\n    type: SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED,\r\n    payload,\r\n});\r\n\r\nexport const enterFullscreen = (): AppThunkAction => dispatch => {\r\n    dispatch(setFullscreenOn());\r\n    dispatch(changeControlsMode(ControlsMode.Grouped));\r\n};\r\n\r\nexport const exitFullscreen = (): AppThunkAction => dispatch => {\r\n    dispatch(setFullscreenOff());\r\n    dispatch(changeControlsMode(ControlsMode.Individual));\r\n};\r\n\r\nexport const toggleFullscreen = (): AppThunkAction => (dispatch, getState) => {\r\n    const isFullscreen = getIsFullscreen(getState());\r\n\r\n    if (isFullscreen) {\r\n        dispatch(exitFullscreen());\r\n    } else {\r\n        dispatch(enterFullscreen());\r\n    }\r\n};\r\n\r\nexport const movePlayerToMainPlayers = (playerId: string): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const mainPlayerIds = getMainPlayerIds(state);\r\n    const secondaryPlayerIds = getSecondaryPlayerIds(state);\r\n\r\n    dispatch(setMainAndSecondaryPlayerIds({\r\n        mainPlayerIds: [...mainPlayerIds, playerId],\r\n        secondaryPlayerIds: secondaryPlayerIds.filter(id => id !== playerId),\r\n    }));\r\n};\r\n\r\nexport const movePlayerToSecondaryPlayers = (playerId: string): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const mainPlayerIds = getMainPlayerIds(state);\r\n    const secondaryPlayerIds = getSecondaryPlayerIds(state);\r\n\r\n    dispatch(setMainAndSecondaryPlayerIds({\r\n        mainPlayerIds: mainPlayerIds.filter(id => id !== playerId),\r\n        secondaryPlayerIds: [...secondaryPlayerIds, playerId],\r\n    }));\r\n};\r\n\r\nexport const makePlayerMain = (playerId: string): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const mainPlayerIds = getMainPlayerIds(state);\r\n    const secondaryPlayerIds = getSecondaryPlayerIds(state);\r\n\r\n    dispatch(setMainAndSecondaryPlayerIds({\r\n        mainPlayerIds: [playerId],\r\n        secondaryPlayerIds: [...mainPlayerIds, ...secondaryPlayerIds].filter(id => id !== playerId),\r\n    }));\r\n};\r\n\r\nexport const movePlayerLeft = (playerId: string): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const layout = getLayout(state);\r\n    let mainPlayerIds = [...getMainPlayerIds(state)];\r\n    let secondaryPlayerIds = [...getSecondaryPlayerIds(state)];\r\n\r\n    const indexInMain = mainPlayerIds.indexOf(playerId);\r\n    const indexInSecondary = secondaryPlayerIds.indexOf(playerId);\r\n\r\n    if (indexInMain > 0) {\r\n        mainPlayerIds[indexInMain] = mainPlayerIds[indexInMain - 1];\r\n        mainPlayerIds[indexInMain - 1] = playerId;\r\n    } else if (indexInSecondary > 0) {\r\n        secondaryPlayerIds[indexInSecondary] = secondaryPlayerIds[indexInSecondary - 1];\r\n        secondaryPlayerIds[indexInSecondary - 1] = playerId;\r\n    } else if (indexInSecondary === 0) {\r\n        if (layout === Layout.Grid) {\r\n            secondaryPlayerIds[0] = mainPlayerIds[mainPlayerIds.length - 1];\r\n            mainPlayerIds[mainPlayerIds.length - 1] = playerId;\r\n        } else {\r\n            mainPlayerIds = [...mainPlayerIds, playerId];\r\n            secondaryPlayerIds = secondaryPlayerIds.slice(1, secondaryPlayerIds.length);\r\n        }\r\n    }\r\n\r\n    dispatch(setMainAndSecondaryPlayerIds({\r\n        mainPlayerIds: [...mainPlayerIds],\r\n        secondaryPlayerIds: [...secondaryPlayerIds],\r\n    }));\r\n};\r\n\r\nexport const movePlayerRight = (playerId: string): AppThunkAction => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const layout = getLayout(state);\r\n    let mainPlayerIds = [...getMainPlayerIds(state)];\r\n    let secondaryPlayerIds = [...getSecondaryPlayerIds(state)];\r\n\r\n    const indexInMain = mainPlayerIds.indexOf(playerId);\r\n    const indexInSecondary = secondaryPlayerIds.indexOf(playerId);\r\n\r\n    if (indexInMain !== -1 && indexInMain < mainPlayerIds.length - 1) {\r\n        mainPlayerIds[indexInMain] = mainPlayerIds[indexInMain + 1];\r\n        mainPlayerIds[indexInMain + 1] = playerId;\r\n    } else if (indexInMain === mainPlayerIds.length - 1) {\r\n        if (layout === Layout.Grid) {\r\n            mainPlayerIds[indexInMain] = secondaryPlayerIds[0];\r\n            secondaryPlayerIds[0] = playerId;\r\n        } else {\r\n            mainPlayerIds = mainPlayerIds.slice(0, mainPlayerIds.length - 1);\r\n            secondaryPlayerIds = [playerId, ...secondaryPlayerIds];\r\n        }\r\n    } else if (indexInSecondary !== -1 && indexInSecondary < secondaryPlayerIds.length - 1) {\r\n        secondaryPlayerIds[indexInSecondary] = secondaryPlayerIds[indexInSecondary + 1];\r\n        secondaryPlayerIds[indexInSecondary + 1] = playerId;\r\n    }\r\n\r\n    dispatch(setMainAndSecondaryPlayerIds({\r\n        mainPlayerIds: [...mainPlayerIds],\r\n        secondaryPlayerIds: [...secondaryPlayerIds],\r\n    }));\r\n};\r\n","import { Middleware } from 'redux';\r\nimport {\r\n    Action,\r\n    AppThunkDispatch,\r\n    State,\r\n    VIDEOS_ADDED,\r\n    PLAYER_OFFSET_CHANGED,\r\n    PlayerInfo,\r\n    PLAYER_LOADED_TIME_UPDATED,\r\n    PLAYER_PLAYED_TIME_UPDATED,\r\n    PLAYER_PROGRESS_UPDATED,\r\n    PLAYER_READY,\r\n    PLAYER_STARTED_BUFFERING,\r\n    PLAYER_STARTED_PLAYING,\r\n    PLAYER_STOPPED_BUFFERING,\r\n    PLAYER_STOPPED_PLAYING,\r\n    MASTER_PLAYER_PLAYED_TIME_UPDATED,\r\n} from '../types';\r\nimport {\r\n    getOffsets,\r\n    getPlayerOffset,\r\n    getPlayersInfoState,\r\n    getPlayerDurationSeconds,\r\n    getPlayerInfo,\r\n    getMasterPendingSeek,\r\n    getMasterPlayerDurationSeconds,\r\n    getMasterPlayerPlayedSeconds,\r\n} from '../selectors';\r\nimport {\r\n    masterPlayerReady,\r\n    masterPlayerNotReady,\r\n    masterPlayerStartPlaying,\r\n    masterPlayerStopPlaying,\r\n    masterPlayerStartBuffering,\r\n    masterPlayerStopBuffering,\r\n    masterPlayerUpdateDuration,\r\n    masterPlayerUpdatePlayedTime,\r\n    masterPlayerUpdateLoadedTime,\r\n    masterPlayerRemovePendingSeek,\r\n} from '../actions';\r\n\r\nconst everyOtherPlayer = (condition: (playerInfo: PlayerInfo) => boolean, state: State, currentId: string) => (\r\n    Object.entries(getPlayersInfoState(state)).every(([id, playerInfo]) => id === currentId || condition(playerInfo))\r\n);\r\n\r\nexport const masterPlayerMiddleware: Middleware<{}, State, AppThunkDispatch> = store => next => (action: Action) => {\r\n    const { dispatch, getState } = store;\r\n\r\n    next(action);\r\n    const state = getState();\r\n\r\n    switch (action.type) {\r\n        case PLAYER_READY:\r\n            if (everyOtherPlayer(player => player.isReady, state, action.payload.id)) {\r\n                dispatch(masterPlayerReady());\r\n            }\r\n            break;\r\n\r\n        case PLAYER_STARTED_PLAYING:\r\n            dispatch(masterPlayerStartPlaying());\r\n            break;\r\n\r\n        case PLAYER_STOPPED_PLAYING:\r\n            if (everyOtherPlayer(player => !player.isPlaying, state, action.payload.id)) {\r\n                dispatch(masterPlayerStopPlaying());\r\n            }\r\n            break;\r\n\r\n        case PLAYER_STARTED_BUFFERING:\r\n            if (!getPlayerInfo(action.payload.id)(state).hasEnded) {\r\n                dispatch(masterPlayerStartBuffering());\r\n            }\r\n            break;\r\n\r\n        case PLAYER_STOPPED_BUFFERING:\r\n            if (everyOtherPlayer(player => (!player.isBuffering || player.hasEnded), state, action.payload.id)) {\r\n                dispatch(masterPlayerStopBuffering());\r\n            }\r\n            break;\r\n\r\n        case PLAYER_PLAYED_TIME_UPDATED:\r\n        case PLAYER_LOADED_TIME_UPDATED:\r\n        case PLAYER_PROGRESS_UPDATED:\r\n        case PLAYER_OFFSET_CHANGED:\r\n            let masterDurationSeconds = getMasterPlayerDurationSeconds(state);\r\n\r\n            if (action.type === PLAYER_OFFSET_CHANGED) {\r\n                const newMasterDurationSeconds = Object.entries(getOffsets(state)).reduce(\r\n                    (acc, curr) => {\r\n                        const [playerId, offset] = curr;\r\n                        const playerDuration = getPlayerDurationSeconds(playerId)(state);\r\n\r\n                        return Math.max(acc, playerDuration - offset);\r\n                    },\r\n                    0,\r\n                );\r\n\r\n                // Account for slight delays in onProgress calls.\r\n                if (Math.abs(newMasterDurationSeconds - masterDurationSeconds) >= 1) {\r\n                    masterDurationSeconds = newMasterDurationSeconds;\r\n                    dispatch(masterPlayerUpdateDuration(newMasterDurationSeconds));\r\n                }\r\n            }\r\n\r\n            if (action.type === PLAYER_PLAYED_TIME_UPDATED || action.type === PLAYER_PROGRESS_UPDATED || action.type === PLAYER_OFFSET_CHANGED) {\r\n                const masterPlayedSeconds = Object.entries(getPlayersInfoState(state)).reduce(\r\n                    (acc, curr) => {\r\n                        const [playerId, playerInfo] = curr;\r\n                        const { playedSeconds, hasEnded } = playerInfo;\r\n                        const offset = getPlayerOffset(playerId)(state);\r\n\r\n                        if (hasEnded) {\r\n                            return acc;\r\n                        }\r\n\r\n                        return Math.min(acc, playedSeconds - offset);\r\n                    },\r\n                    masterDurationSeconds,\r\n                );\r\n\r\n                const masterPlayedFraction = masterPlayedSeconds / masterDurationSeconds;\r\n\r\n                dispatch(masterPlayerUpdatePlayedTime({\r\n                    playedSeconds: masterPlayedSeconds,\r\n                    playedFraction: masterPlayedFraction,\r\n                }));\r\n            }\r\n\r\n            if (action.type === PLAYER_LOADED_TIME_UPDATED || action.type === PLAYER_PROGRESS_UPDATED || action.type === PLAYER_OFFSET_CHANGED) {\r\n                const masterLoadedSeconds = Object.entries(getPlayersInfoState(state)).reduce(\r\n                    (acc, curr) => {\r\n                        const [playerId, playerInfo] = curr;\r\n                        const { loadedSeconds, durationSeconds, hasEnded } = playerInfo;\r\n                        const offset = getPlayerOffset(playerId)(state);\r\n\r\n                        // If a player is completely loaded, it should not affect the overall loaded time.\r\n                        if (hasEnded || loadedSeconds >= (durationSeconds - 0.01)) {\r\n                            return acc;\r\n                        }\r\n\r\n                        return Math.min(acc, loadedSeconds - offset);\r\n                    },\r\n                    masterDurationSeconds,\r\n                );\r\n\r\n                const masterLoadedFraction = masterLoadedSeconds / masterDurationSeconds;\r\n\r\n                dispatch(masterPlayerUpdateLoadedTime({\r\n                    loadedSeconds: masterLoadedSeconds,\r\n                    loadedFraction: masterLoadedFraction,\r\n                }));\r\n            }\r\n\r\n            break;\r\n\r\n        case MASTER_PLAYER_PLAYED_TIME_UPDATED:\r\n            const pendingSeek = getMasterPendingSeek(state);\r\n            const playedSeconds = getMasterPlayerPlayedSeconds(state);\r\n\r\n            if (pendingSeek && Math.abs(playedSeconds - pendingSeek) < 1) {\r\n                dispatch(masterPlayerRemovePendingSeek());\r\n            }\r\n\r\n            break;\r\n\r\n\r\n        case VIDEOS_ADDED:\r\n            dispatch(masterPlayerNotReady());\r\n            break;\r\n    }\r\n};\r\n","import {\r\n    MasterPlayerInfoState,\r\n    MasterPlayerInfoAction,\r\n    MASTER_PLAYER_READY,\r\n    MASTER_PLAYER_NOT_READY,\r\n    MASTER_PLAYER_STARTED_PLAYING,\r\n    MASTER_PLAYER_STOPPED_PLAYING,\r\n    MASTER_PLAYER_STARTED_BUFFERING,\r\n    MASTER_PLAYER_STOPPED_BUFFERING,\r\n    MASTER_PLAYER_ENDED,\r\n    MASTER_PLAYER_DURATION_UPDATED,\r\n    MASTER_PLAYER_PLAYED_TIME_UPDATED,\r\n    MASTER_PLAYER_LOADED_TIME_UPDATED,\r\n    MASTER_PLAYER_PROGRESS_UPDATED,\r\n    MASTER_PLAYER_VOLUME_UPDATED,\r\n    MASTER_PLAYER_MUTED,\r\n    MASTER_PLAYER_UNMUTED,\r\n    MASTER_PLAYER_PENDING_SEEK_SET,\r\n    MASTER_PLAYER_PENDING_SEEK_REMOVED,\r\n} from './types';\r\n\r\nconst masterPlayerInfoInitialState: MasterPlayerInfoState = {\r\n    isReady: false,\r\n    isPlaying: false,\r\n    isBuffering: false,\r\n    hasEnded: false,\r\n    durationSeconds: 0,\r\n    playedSeconds: 0,\r\n    playedFraction: 0,\r\n    loadedSeconds: 0,\r\n    loadedFraction: 0,\r\n    volume: 1,\r\n    isMuted: false,\r\n    pendingSeek: null,\r\n};\r\n\r\nexport const masterPlayerInfoReducer = (state = masterPlayerInfoInitialState, action: MasterPlayerInfoAction) => {\r\n    switch (action.type) {\r\n        case MASTER_PLAYER_READY:\r\n            return { ...state, isReady: true };\r\n\r\n        case MASTER_PLAYER_NOT_READY:\r\n            return { ...state, isReady: false };\r\n\r\n        case MASTER_PLAYER_STARTED_PLAYING:\r\n            return { ...state, isPlaying: true };\r\n\r\n        case MASTER_PLAYER_STOPPED_PLAYING:\r\n            return { ...state, isPlaying: false };\r\n\r\n        case MASTER_PLAYER_STARTED_BUFFERING:\r\n            return { ...state, isBuffering: true };\r\n\r\n        case MASTER_PLAYER_STOPPED_BUFFERING:\r\n            return { ...state, isBuffering: false };\r\n\r\n        case MASTER_PLAYER_ENDED:\r\n            return { ...state, hasEnded: true };\r\n\r\n        case MASTER_PLAYER_VOLUME_UPDATED:\r\n            return { ...state, isMuted: false, ...action.payload };\r\n\r\n        case MASTER_PLAYER_MUTED:\r\n            return { ...state, isMuted: true };\r\n\r\n        case MASTER_PLAYER_UNMUTED:\r\n            return { ...state, isMuted: false };\r\n\r\n        case MASTER_PLAYER_PENDING_SEEK_SET:\r\n            return { ...state, pendingSeek: action.payload.seekToSeconds };\r\n\r\n        case MASTER_PLAYER_PENDING_SEEK_REMOVED:\r\n            return { ...state, pendingSeek: null };\r\n\r\n        case MASTER_PLAYER_DURATION_UPDATED:\r\n        case MASTER_PLAYER_PLAYED_TIME_UPDATED:\r\n        case MASTER_PLAYER_LOADED_TIME_UPDATED:\r\n        case MASTER_PLAYER_PROGRESS_UPDATED:\r\n            return { ...state, ...action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};","import { OffsetsState, OffsetsAction, OFFSETS_REFERENCE_PLAYER_ID_CHANGED, PLAYER_OFFSET_CHANGED } from './types';\r\n\r\nexport const offsetsInitialState: OffsetsState = {\r\n    referencePlayerId: null,\r\n    offsets: {},\r\n};\r\n\r\nexport const offsetsReducer = (state = offsetsInitialState, action: OffsetsAction) => {\r\n    switch (action.type) {\r\n        case OFFSETS_REFERENCE_PLAYER_ID_CHANGED:\r\n            return { ...state, referencePlayerId: action.payload.referenceId };\r\n\r\n        case PLAYER_OFFSET_CHANGED:\r\n            const { id, offset } = action.payload;\r\n            return {\r\n                ...state,\r\n                offsets: {\r\n                    ...state.offsets,\r\n                    [id]: offset,\r\n                },\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {\r\n    ControlsMode,\r\n    Layout,\r\n    SettingsState,\r\n    SettingsAction,\r\n    SETTINGS_FULLSCREEN_ENTERED,\r\n    SETTINGS_FULLSCREEN_EXITED,\r\n    SETTINGS_CONTROLS_MODE_CHANGED,\r\n    SETTINGS_LAYOUT_CHANGED,\r\n    SETTINGS_FOCUSED_PLAYER_ID_CHANGED,\r\n    SETTINGS_MAIN_PLAYER_IDS_CHANGED,\r\n    SETTINGS_SECONDARY_PLAYER_IDS_CHANGED,\r\n    SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED,\r\n} from './types';\r\n\r\nconst settingsInitialState: SettingsState = {\r\n    isFullscreen: false,\r\n    controlsMode: ControlsMode.Individual,\r\n    layout: Layout.Overlay,\r\n    focusedPlayerId: null,\r\n    mainPlayerIds: [],\r\n    secondaryPlayerIds: [],\r\n};\r\n\r\nexport const settingsReducer = (state = settingsInitialState, action: SettingsAction) => {\r\n    switch (action.type) {\r\n        case SETTINGS_FULLSCREEN_ENTERED:\r\n            return { ...state, isFullscreen: true };\r\n\r\n        case SETTINGS_FULLSCREEN_EXITED:\r\n            return { ...state, isFullscreen: false };\r\n\r\n        case SETTINGS_CONTROLS_MODE_CHANGED:\r\n        case SETTINGS_LAYOUT_CHANGED:\r\n        case SETTINGS_FOCUSED_PLAYER_ID_CHANGED:\r\n        case SETTINGS_MAIN_PLAYER_IDS_CHANGED:\r\n        case SETTINGS_SECONDARY_PLAYER_IDS_CHANGED:\r\n        case SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED:\r\n            return { ...state, ...action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { omit } from 'lodash/fp';\r\nimport { VideosState, VideosAction, VIDEOS_ADDED, VIDEO_REMOVED } from './types';\r\n\r\nconst videosInitialState: VideosState = {};\r\n\r\nexport const videosReducer = (state = videosInitialState, action: VideosAction) => {\r\n    switch (action.type) {\r\n        case VIDEOS_ADDED:\r\n            return { ...state, ...action.payload };\r\n\r\n        case VIDEO_REMOVED:\r\n            return omit(action.payload.id, state);\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { masterPlayerInfoReducer } from './masterPlayerInfo/reducer';\r\nimport { offsetsReducer } from './offsets/reducer';\r\nimport { playersInfoReducer } from './playersInfo/reducer';\r\nimport { settingsReducer } from './settings/reducer';\r\nimport { videosReducer } from './videos/reducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n    masterPlayerInfo: masterPlayerInfoReducer,\r\n    offsets: offsetsReducer,\r\n    playersInfo: playersInfoReducer,\r\n    settings: settingsReducer,\r\n    videos: videosReducer,\r\n});\r\n","import thunk from 'redux-thunk';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { masterPlayerMiddleware, offsetsMiddleware, playerGroupsMiddleware } from './middlewares';\r\nimport { rootReducer } from './state';\r\n\r\nexport const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(applyMiddleware(\r\n        thunk,\r\n        offsetsMiddleware,\r\n        masterPlayerMiddleware,\r\n        playerGroupsMiddleware,\r\n    )),\r\n);\r\n","import { Middleware } from 'redux';\r\nimport {\r\n    Action,\r\n    AppThunkDispatch,\r\n    State,\r\n    PLAYER_PLAYED_TIME_UPDATED,\r\n    PLAYER_PROGRESS_UPDATED,\r\n} from '../types';\r\nimport {\r\n    areAllCorrectPlayersPlaying,\r\n    getPlayersInfoState,\r\n    shouldPlayerCurrentlyPlay,\r\n    getOffsetsReferencePlayerId,\r\n    getMasterPendingSeek,\r\n    getMasterPlayerPlayedSeconds,\r\n} from '../selectors';\r\nimport {\r\n    changeOffsetsReferencePlayerId,\r\n    changePlayerOffset,\r\n    normalizeOffsets,\r\n    playerStartPlaying,\r\n} from '../actions';\r\n\r\nexport const offsetsMiddleware: Middleware<{}, State, AppThunkDispatch> = store => next => (action: Action) => {\r\n    const { dispatch, getState } = store;\r\n\r\n    const prevState = getState();\r\n    next(action);\r\n    const state = getState();\r\n\r\n    switch (action.type) {\r\n        case PLAYER_PLAYED_TIME_UPDATED:\r\n        case PLAYER_PROGRESS_UPDATED:\r\n            const { id } = action.payload;\r\n            const referencePlayerId = getOffsetsReferencePlayerId(state);\r\n\r\n            if (referencePlayerId === null) {\r\n                dispatch(changeOffsetsReferencePlayerId(id));\r\n                dispatch(changePlayerOffset(id, { offset: 0 }));\r\n                break;\r\n            }\r\n\r\n            if (areAllCorrectPlayersPlaying(state) || getMasterPendingSeek(prevState) !== null) {\r\n                break;\r\n            }\r\n\r\n            if (areAllCorrectPlayersPlaying(prevState) && !areAllCorrectPlayersPlaying(state)) {\r\n                Object.keys(getPlayersInfoState(state)).forEach(playerId => {\r\n                    if (shouldPlayerCurrentlyPlay(playerId)(state)) {\r\n                        dispatch(playerStartPlaying(playerId));\r\n                    }\r\n                });\r\n            }\r\n\r\n            Object.entries(getPlayersInfoState(state)).forEach(([playerId, playerInfo]) => {\r\n                if (shouldPlayerCurrentlyPlay(playerId)(prevState)) {\r\n                    dispatch(changePlayerOffset(playerId, {\r\n                        offset: playerInfo.playedSeconds - getMasterPlayerPlayedSeconds(state),\r\n                    }));\r\n                }\r\n            });\r\n\r\n            dispatch(normalizeOffsets());\r\n            break;\r\n    }\r\n};\r\n","import { Middleware } from 'redux';\r\nimport {\r\n    Action,\r\n    AppThunkDispatch,\r\n    State,\r\n    Layout,\r\n    VIDEOS_ADDED,\r\n    VIDEO_REMOVED,\r\n    SETTINGS_LAYOUT_CHANGED,\r\n} from '../types';\r\nimport {\r\n    movePlayerToMainPlayers,\r\n    movePlayerToSecondaryPlayers,\r\n    setMainAndSecondaryPlayerIds,\r\n} from '../actions';\r\nimport {\r\n    getMainPlayerIds,\r\n    getSecondaryPlayerIds,\r\n} from '../selectors';\r\n\r\nexport const playerGroupsMiddleware: Middleware<{}, State, AppThunkDispatch> = store => next => (action: Action) => {\r\n    const { dispatch, getState } = store;\r\n\r\n    const state = getState();\r\n    const mainPlayerIds = getMainPlayerIds(state);\r\n    const secondaryPlayerIds = getSecondaryPlayerIds(state);\r\n\r\n    switch (action.type) {\r\n        case VIDEOS_ADDED:\r\n            Object.keys(action.payload).forEach((id, i) => {\r\n                if (i === 0 && mainPlayerIds.length === 0) {\r\n                    dispatch(movePlayerToMainPlayers(id));\r\n                } else {\r\n                    dispatch(movePlayerToSecondaryPlayers(id));\r\n                }\r\n            });\r\n            break;\r\n\r\n        case VIDEO_REMOVED:\r\n            if (mainPlayerIds.length === 1 && mainPlayerIds[0] === action.payload.id && secondaryPlayerIds.length > 0) {\r\n                const newMainPlayerId = secondaryPlayerIds[0];\r\n                dispatch(setMainAndSecondaryPlayerIds({\r\n                    mainPlayerIds: [newMainPlayerId],\r\n                    secondaryPlayerIds: secondaryPlayerIds.filter(id => id !== newMainPlayerId),\r\n                }));\r\n                break;\r\n            }\r\n\r\n            dispatch(setMainAndSecondaryPlayerIds({\r\n                mainPlayerIds: mainPlayerIds.filter(id => id !== action.payload.id),\r\n                secondaryPlayerIds: secondaryPlayerIds.filter(id => id !== action.payload.id),\r\n            }));\r\n            break;\r\n\r\n        case SETTINGS_LAYOUT_CHANGED:\r\n            if (action.payload.layout === Layout.Overlay) {\r\n                if (mainPlayerIds.length > 1) {\r\n                    dispatch(setMainAndSecondaryPlayerIds({\r\n                        mainPlayerIds: [mainPlayerIds[0]],\r\n                        secondaryPlayerIds: [...mainPlayerIds.slice(1), ...secondaryPlayerIds],\r\n                    }));\r\n                }\r\n\r\n                if (mainPlayerIds.length === 0) {\r\n                    dispatch(setMainAndSecondaryPlayerIds({\r\n                        mainPlayerIds: [secondaryPlayerIds[0]],\r\n                        secondaryPlayerIds: [...secondaryPlayerIds.slice(1)],\r\n                    }));\r\n                }\r\n            }\r\n\r\n            break;\r\n    }\r\n\r\n    next(action);\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === '[::1]' ||\r\n        // 127.0.0.0/8 are considered localhost for IPv4.\r\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('load', () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Let's check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl, config);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\r\n                        'This web app is being served cache-first by a service ' +\r\n                            'worker. To learn more, visit https://cra.link/PWA'\r\n                    );\r\n                });\r\n            } else {\r\n                // Is not localhost. Just register service worker\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then((registration) => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                if (installingWorker == null) {\r\n                    return;\r\n                }\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === 'installed') {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the updated precached content has been fetched,\r\n                            // but the previous service worker will still serve the older\r\n                            // content until all client tabs are closed.\r\n                            console.log(\r\n                                'New content is available and will be used when all ' +\r\n                                    'tabs for this page are closed. See https://cra.link/PWA.'\r\n                            );\r\n\r\n                            // Execute callback\r\n                            if (config && config.onUpdate) {\r\n                                config.onUpdate(registration);\r\n                            }\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log('Content is cached for offline use.');\r\n\r\n                            // Execute callback\r\n                            if (config && config.onSuccess) {\r\n                                config.onSuccess(registration);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch((error) => {\r\n            console.error('Error during service worker registration:', error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl, {\r\n        headers: { 'Service-Worker': 'script' },\r\n    })\r\n        .then((response) => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            const contentType = response.headers.get('content-type');\r\n            if (\r\n                response.status === 404 ||\r\n                (contentType != null && contentType.indexOf('javascript') === -1)\r\n            ) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then((registration) => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log('No internet connection found. App is running in offline mode.');\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n        navigator.serviceWorker.ready\r\n            .then((registration) => {\r\n                registration.unregister();\r\n            })\r\n            .catch((error) => {\r\n                console.error(error.message);\r\n            });\r\n    }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n    if (onPerfEntry && onPerfEntry instanceof Function) {\r\n        import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n            getCLS(onPerfEntry);\r\n            getFID(onPerfEntry);\r\n            getFCP(onPerfEntry);\r\n            getLCP(onPerfEntry);\r\n            getTTFB(onPerfEntry);\r\n        });\r\n    }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import styled from 'styled-components';\r\n\r\nexport const UrlTextFieldContainer = styled.div`\r\n    padding-top: 8px;\r\n`;\r\n\r\nexport const OrDividerContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n\r\n    padding-top: 24px;\r\n    padding-bottom: 24px;\r\n`;\r\n\r\nexport const OrDividerLine = styled.div<{ color: string }>`\r\n    flex: 1;\r\n    height: 1px;\r\n    box-shadow: inset 0 0 0 1px ${props => props.color};\r\n`;\r\n\r\nexport const OrDividerTextContainer = styled.div`\r\n    padding-left: 8px;\r\n    padding-right: 8px;\r\n    color: rgba(255, 255, 255, 0.4);\r\n`;\r\n\r\ninterface AddFilesContainerProps {\r\n    activeColor: string;\r\n    isDragActive?: boolean;\r\n}\r\n\r\nexport const AddFilesContainer = styled.div<AddFilesContainerProps>`\r\n    width: 100%;\r\n    height: 72px;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    border-radius: 8px;\r\n    border: 1px dashed rgba(255, 255, 255, 0.7);\r\n    color: white;\r\n\r\n    ${props => props.isDragActive && `\r\n        border-color: ${props.activeColor};\r\n        color: ${props.activeColor};\r\n    `}\r\n\r\n    cursor: pointer;\r\n`;\r\n\r\nexport const FilesListContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-top: 8px;\r\n`;\r\n\r\nexport const FileItemContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n`;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { omit } from 'lodash/fp';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { useTheme, Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField, Typography, IconButton } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\nimport { Video } from '../../redux/types';\r\nimport { addVideos } from '../../redux/actions';\r\nimport { AddFilesContainer, FileItemContainer, FilesListContainer, OrDividerContainer, OrDividerLine, OrDividerTextContainer, UrlTextFieldContainer } from './style';\r\n\r\ninterface OwnProps {\r\n    open: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\ninterface DispatchProps {\r\n    addVideos: typeof addVideos;\r\n}\r\n\r\nexport type AddVideosDialogProps = OwnProps & DispatchProps;\r\n\r\nconst AddVideosDialog: React.FC<AddVideosDialogProps> = ({ open, onClose, addVideos }) => {\r\n    const theme = useTheme();\r\n\r\n    const [urls, setUrls] = useState<Record<string, Video>>({ [uuidv4()]: { url: '' } });\r\n    const [files, setFiles] = useState<Record<string, Video>>({});\r\n    const [fileNames, setFileNames] = useState<Record<string, string>>({});\r\n\r\n    const {\r\n        getRootProps,\r\n        getInputProps,\r\n        isDragActive,\r\n    } = useDropzone({\r\n        accept: 'video/*',\r\n        onDropAccepted: (acceptedFiles: File[]) => {\r\n            const parsedFiles = acceptedFiles.map(file => {\r\n                const id = uuidv4();\r\n                const { name } = file;\r\n                const url = URL.createObjectURL(file);\r\n\r\n                return { id, name, url };\r\n            });\r\n\r\n            const acceptedVideos = Object.fromEntries(parsedFiles.map(({ id, url }) => [id, { url }]));\r\n            const acceptedNames = Object.fromEntries(parsedFiles.map(({ id, name }) => [id, name ]));\r\n\r\n            setFiles({ ...files, ...acceptedVideos });\r\n            setFileNames({ ...fileNames, ...acceptedNames });\r\n        },\r\n    });\r\n\r\n    const handleConfirm = useCallback(() => {\r\n        const filterEmpty = (videos: Record<string, Video>) => Object.fromEntries(Object.entries(videos).filter(([_, value]) => value.url !== ''));\r\n\r\n        addVideos({\r\n            ...filterEmpty(urls),\r\n            ...filterEmpty(files),\r\n        });\r\n\r\n        onClose();\r\n\r\n        setUrls({ [uuidv4()]: { url: '' } });\r\n        setFiles({});\r\n        setFileNames({});\r\n    }, [addVideos, onClose, urls, files]);\r\n\r\n    const handleKeyPress = useCallback((e: KeyboardEvent) => {\r\n        if (e.key === 'Enter') {\r\n            handleConfirm();\r\n        }\r\n    }, [handleConfirm]);\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            window.addEventListener('keypress', handleKeyPress);\r\n        } else {\r\n            window.removeEventListener('keypress', handleKeyPress);\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('keypress', handleKeyPress);\r\n        };\r\n    }, [open, handleKeyPress]);\r\n\r\n    const handleUrlInputChange = (id: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        // Adds a new TextField if all others are non-empty.\r\n        if (e.target.value !== '' && Object.keys(urls).every(i => i === id || urls[i].url !== '')) {\r\n            urls[uuidv4()] = { url: '' };\r\n        }\r\n\r\n        setUrls({ ...urls, [id]: { url: e.target.value } });\r\n    };\r\n\r\n    const handleUrlInputBlur = (id: string) => () => {\r\n        if (urls[id].url === '' && Object.keys(urls).some(i => i !== id && urls[i].url === '')) {\r\n            setUrls(omit(id, urls));\r\n        }\r\n    };\r\n\r\n    const handleFileDelete = (id: string) => () => {\r\n        setFiles(omit(id, files));\r\n        setFileNames(omit(id, fileNames));\r\n    };\r\n\r\n    const isConfirmActive = Object.keys(files).length > 0 || Object.keys(urls).some(id => urls[id].url !== '');\r\n\r\n    const addFilesContainerProps = {\r\n        ...getRootProps({ isDragActive }),\r\n        activeColor: theme.palette.primary.main,\r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={open} onClose={onClose}>\r\n            <DialogTitle>Add new videos</DialogTitle>\r\n            <DialogContent>\r\n                <Typography variant=\"body1\">\r\n                    Paste links to the videos here\r\n                </Typography>\r\n                {Object.keys(urls).map((id, index) => {\r\n                    const urlTextFieldProps = {\r\n                        value: urls[id].url,\r\n                        onChange: handleUrlInputChange(id),\r\n                        onBlur: handleUrlInputBlur(id),\r\n                        placeholder: `Video ${index + 1}`,\r\n                        fullWidth: true,\r\n                    };\r\n\r\n                    return (\r\n                        <UrlTextFieldContainer key={id}>\r\n                            <TextField {...urlTextFieldProps} />\r\n                        </UrlTextFieldContainer>\r\n                    );\r\n                })}\r\n\r\n                <OrDividerContainer>\r\n                    <OrDividerLine color={theme.palette.divider} />\r\n                    <OrDividerTextContainer>\r\n                        <Typography variant=\"h6\">OR</Typography>\r\n                    </OrDividerTextContainer>\r\n                    <OrDividerLine color={theme.palette.divider} />\r\n                </OrDividerContainer>\r\n\r\n                <AddFilesContainer {...addFilesContainerProps}>\r\n                    <input {...getInputProps()} />\r\n                    <Typography variant=\"body1\">Add files</Typography>\r\n                </AddFilesContainer>\r\n                <FilesListContainer>\r\n                    {Object.keys(files).map(id => (\r\n                        <FileItemContainer key={id}>\r\n                            <IconButton size=\"small\" onClick={handleFileDelete(id)}>\r\n                                <Delete fontSize=\"small\" />\r\n                            </IconButton>\r\n                            <div style={{ width: '4px' }} />\r\n                            <Typography variant=\"body1\">{fileNames[id]}</Typography>\r\n                        </FileItemContainer>\r\n                    ))}\r\n                </FilesListContainer>\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Button onClick={onClose}>\r\n                    Cancel\r\n                </Button>\r\n                <Button color=\"primary\" variant=\"contained\" onClick={handleConfirm} disabled={!isConfirmActive}>\r\n                    Confirm\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default connect(\r\n    null,\r\n    {\r\n        addVideos,\r\n    },\r\n)(AddVideosDialog);\r\n","import { Video, VideosAddedAction, VideoRemovedAction, VIDEOS_ADDED, VIDEO_REMOVED} from './types';\r\n\r\nexport const addVideos = (videos: Record<string, Video>): VideosAddedAction => ({\r\n    type: VIDEOS_ADDED,\r\n    payload: videos,\r\n});\r\n\r\nexport const removeVideo = (id: string): VideoRemovedAction => ({\r\n    type: VIDEO_REMOVED,\r\n    payload: { id },\r\n});\r\n","import { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { AppBar as MaterialAppBar, Button, Slide, Toolbar, Typography } from '@material-ui/core';\r\nimport { State } from '../../redux/types';\r\nimport { getIsFullscreen } from '../../redux/selectors';\r\n\r\ninterface OwnProps {\r\n    onAddVideosClick?: () => void;\r\n}\r\n\r\ninterface StateProps {\r\n    isFullscreen: boolean;\r\n}\r\n\r\nexport type AppBarProps = OwnProps & StateProps;\r\n\r\nconst AppBar: React.FC<AppBarProps> = ({ onAddVideosClick, isFullscreen }) => {\r\n    const handleAddVideosClick = () => {\r\n        if (onAddVideosClick) {\r\n            onAddVideosClick();\r\n        }\r\n    };\r\n\r\n    if (isFullscreen) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Slide in={!isFullscreen}>\r\n            <MaterialAppBar position=\"static\" color=\"inherit\">\r\n                <Toolbar variant=\"dense\">\r\n                    <img src={`${process.env.PUBLIC_URL}/logo192-clean.png`} alt=\"Multiview\" width=\"30px\" height=\"30px\" />\r\n                    <div style={{ width: '12px' }} />\r\n                    <Typography variant=\"h6\">\r\n                        Multiview\r\n                    </Typography>\r\n                    <div style={{ flex: 1 }} />\r\n                    <Button variant=\"outlined\" color=\"default\" onClick={handleAddVideosClick}>Add videos</Button>\r\n                </Toolbar>\r\n            </MaterialAppBar>\r\n        </Slide>\r\n    );\r\n};\r\n\r\nexport default connect<StateProps, {}, OwnProps, State>(\r\n    createStructuredSelector({\r\n        isFullscreen: getIsFullscreen,\r\n    })\r\n)(AppBar);\r\n","import { useEffect, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { State } from '../../redux/types';\r\nimport {\r\n    getFocusedPlayerDurationSeconds,\r\n    getFocusedPlayerId,\r\n    getFocusedPlayerPlayedSeconds,\r\n    getIsFocusedPlayerPlaying,\r\n    getFocusedPlayerVolume,\r\n    getIsFocusedPlayerMuted,\r\n} from '../../redux/selectors';\r\nimport {\r\n    playerStartPlaying,\r\n    startPlayback,\r\n    playerStopPlaying,\r\n    stopPlayback,\r\n    playerPushPendingSeek,\r\n    seekTo,\r\n    playerUpdateVolume,\r\n    masterPlayerUpdateVolume,\r\n    playerMute,\r\n    masterPlayerMute,\r\n    playerUnmute,\r\n    masterPlayerUnmute,\r\n} from '../../redux/actions';\r\n\r\nconst ARROW_SEEK_AMOUNT = 5;\r\nconst ARROW_VOLUME_AMOUNT = 0.1;\r\n\r\ninterface OwnProps {\r\n    isActive: boolean;\r\n}\r\n\r\ninterface StateProps {\r\n    isPlaying: boolean;\r\n    focusedPlayerId: string | null;\r\n    playedSeconds: number;\r\n    durationSeconds: number;\r\n    volume: number;\r\n    isMuted: boolean;\r\n}\r\n\r\ninterface DispatchProps {\r\n    playerStartPlaying: (id: string) => void;\r\n    masterPlayerStartPlaying: () => void;\r\n    playerStopPlaying: (id: string) => void;\r\n    masterPlayerStopPlaying: () => void;\r\n    playerSeekTo: (id: string, { seekToSeconds }: { seekToSeconds: number }) => void;\r\n    masterPlayerSeekTo: (seekToSeconds: number) => void;\r\n    playerUpdateVolume: (id: string, { volume }: { volume: number }) => void;\r\n    masterPlayerUpdateVolume: (volume: number) => void;\r\n    playerMute: (id: string) => void;\r\n    masterPlayerMute: () => void;\r\n    playerUnmute: (id: string) => void;\r\n    masterPlayerUnmute: () => void;\r\n}\r\n\r\nexport type KeyboardEventHandlerProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst KeyboardEventHandler: React.FC<KeyboardEventHandlerProps> = ({\r\n    isActive,\r\n    isPlaying,\r\n    focusedPlayerId,\r\n    playedSeconds,\r\n    durationSeconds,\r\n    volume,\r\n    isMuted,\r\n    playerStartPlaying,\r\n    masterPlayerStartPlaying,\r\n    playerStopPlaying,\r\n    masterPlayerStopPlaying,\r\n    playerSeekTo,\r\n    masterPlayerSeekTo,\r\n    playerUpdateVolume,\r\n    masterPlayerUpdateVolume,\r\n    playerMute,\r\n    masterPlayerMute,\r\n    playerUnmute,\r\n    masterPlayerUnmute,\r\n}) => {\r\n    const handleKeyPress = useCallback((e: KeyboardEvent) => {\r\n        if (!isActive) {\r\n            return;\r\n        }\r\n\r\n        let shouldPreventDefault = true;\r\n        switch (e.code) {\r\n            case 'Space':\r\n                if (isPlaying) {\r\n                    if (focusedPlayerId) {\r\n                        playerStopPlaying(focusedPlayerId);\r\n                    } else {\r\n                        masterPlayerStopPlaying();\r\n                    }\r\n                } else {\r\n                    if (focusedPlayerId) {\r\n                        playerStartPlaying(focusedPlayerId);\r\n                    } else {\r\n                        masterPlayerStartPlaying();\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case 'ArrowLeft':\r\n            case 'ArrowRight':\r\n                const seekToSeconds = Math.max(0, Math.min(durationSeconds, playedSeconds + (e.code === 'ArrowLeft' ? -1 : 1) * ARROW_SEEK_AMOUNT));\r\n\r\n                if (focusedPlayerId) {\r\n                    playerSeekTo(focusedPlayerId, { seekToSeconds });\r\n                } else {\r\n                    masterPlayerSeekTo(seekToSeconds);\r\n                }\r\n\r\n                break;\r\n\r\n            case 'ArrowUp':\r\n            case 'ArrowDown':\r\n                const newVolume = Math.max(0, Math.min(1, volume + (e.code === 'ArrowDown' ? -1 : 1) * ARROW_VOLUME_AMOUNT));\r\n\r\n                if (focusedPlayerId) {\r\n                    playerUpdateVolume(focusedPlayerId, { volume: newVolume });\r\n                } else {\r\n                    masterPlayerUpdateVolume(newVolume);\r\n                }\r\n\r\n                break;\r\n\r\n            case 'KeyM':\r\n                if (isMuted) {\r\n                    if (focusedPlayerId) {\r\n                        playerUnmute(focusedPlayerId);\r\n                    } else {\r\n                        masterPlayerUnmute();\r\n                    }\r\n                } else {\r\n                    if (focusedPlayerId) {\r\n                        playerMute(focusedPlayerId);\r\n                    } else {\r\n                        masterPlayerMute();\r\n                    }\r\n                }\r\n                break;\r\n\r\n            default:\r\n                shouldPreventDefault = false;\r\n                break;\r\n        }\r\n\r\n        if (shouldPreventDefault) {\r\n            e.preventDefault();\r\n        }\r\n    }, [\r\n        isActive,\r\n        isPlaying,\r\n        focusedPlayerId,\r\n        durationSeconds,\r\n        playedSeconds,\r\n        volume,\r\n        isMuted,\r\n        playerStartPlaying,\r\n        masterPlayerStartPlaying,\r\n        playerStopPlaying,\r\n        masterPlayerStopPlaying,\r\n        playerSeekTo,\r\n        masterPlayerSeekTo,\r\n        playerUpdateVolume,\r\n        masterPlayerUpdateVolume,\r\n        playerMute,\r\n        masterPlayerMute,\r\n        playerUnmute,\r\n        masterPlayerUnmute,\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyPress);\r\n\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyPress);\r\n        }\r\n    }, [handleKeyPress]);\r\n\r\n\r\n    return null;\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, {}, State>(\r\n    createStructuredSelector({\r\n        focusedPlayerId: getFocusedPlayerId,\r\n        isPlaying: getIsFocusedPlayerPlaying,\r\n        durationSeconds: getFocusedPlayerDurationSeconds,\r\n        playedSeconds: getFocusedPlayerPlayedSeconds,\r\n        volume: getFocusedPlayerVolume,\r\n        isMuted: getIsFocusedPlayerMuted,\r\n    }),\r\n    {\r\n        playerStartPlaying,\r\n        masterPlayerStartPlaying: startPlayback,\r\n        playerStopPlaying,\r\n        masterPlayerStopPlaying: stopPlayback,\r\n        playerSeekTo: playerPushPendingSeek,\r\n        masterPlayerSeekTo: seekTo,\r\n        playerUpdateVolume,\r\n        masterPlayerUpdateVolume,\r\n        playerMute,\r\n        masterPlayerMute,\r\n        playerUnmute,\r\n        masterPlayerUnmute,\r\n    },\r\n)(KeyboardEventHandler);\r\n","export const formatSeconds = (totalSeconds: number) => {\r\n    const roundedSeconds = Math.round(totalSeconds);\r\n\r\n    const hours = Math.floor(roundedSeconds / (60 * 60));\r\n    const minutes = Math.floor((roundedSeconds % (60 * 60)) / 60);\r\n    const seconds = roundedSeconds % 60;\r\n\r\n    const paddedHours = hours > 0 ? `${hours}:` : '';\r\n    const paddedMinutes = (hours > 0 && minutes < 10) ? `0${minutes}` : `${minutes}:`;\r\n    const paddedSeconds = seconds < 10 ? `0${seconds}` : seconds;\r\n\r\n    return `${paddedHours}${paddedMinutes}${paddedSeconds}`;\r\n};\r\n","export interface GetOptimalGridPlayerSizeProps {\r\n    containerWidth: number;\r\n    containerHeight: number;\r\n    numberOfPlayers: number;\r\n}\r\n\r\nexport const getOptimalGridPlayerSize = ({ containerWidth, containerHeight, numberOfPlayers }: GetOptimalGridPlayerSizeProps) => {\r\n    let left = 0;\r\n    let right = containerWidth;\r\n\r\n    let iters = 0;\r\n    while (Math.abs(left - right) >= 1e-5 && iters <= 1000) {\r\n        let middle = Math.ceil((right + left) / 2);\r\n\r\n        const playerWidth = middle;\r\n        const playerHeight = Math.ceil(playerWidth / 16 * 9);\r\n\r\n        if (canFitPlayersOfSize({ containerWidth, containerHeight, playerWidth, playerHeight, numberOfPlayers })) {\r\n            left = middle;\r\n        } else {\r\n            right = middle - 1;\r\n        }\r\n\r\n        iters += 1;\r\n    }\r\n\r\n    const playerWidth = left;\r\n    const playerHeight = Math.ceil(playerWidth / 16 * 9);\r\n\r\n    return { playerWidth, playerHeight };\r\n};\r\n\r\ninterface CanFitPlayersOfSizeProps {\r\n    containerWidth: number;\r\n    containerHeight: number;\r\n    playerWidth: number;\r\n    playerHeight: number;\r\n    numberOfPlayers: number;\r\n}\r\n\r\nconst canFitPlayersOfSize = ({ containerWidth, containerHeight, playerWidth, playerHeight, numberOfPlayers }: CanFitPlayersOfSizeProps) => {\r\n    const playersInRow = Math.floor(containerWidth / playerWidth);\r\n    const playersInColumn = Math.ceil(numberOfPlayers / playersInRow);\r\n\r\n    return (playersInColumn * playerHeight) <= containerHeight;\r\n};\r\n","export interface GetPlayerGridPositionsProps {\r\n    playerWidth: number;\r\n    playerHeight: number;\r\n    containerWidth: number;\r\n    containerHeight: number;\r\n    numberOfPlayers: number;\r\n    alignToRight?: boolean;\r\n}\r\n\r\nexport const getPlayerGridPositions = ({ playerWidth, playerHeight, containerWidth, containerHeight, numberOfPlayers, alignToRight }: GetPlayerGridPositionsProps) => {\r\n    const cols = Math.floor(containerWidth / playerWidth);\r\n    const rows = Math.floor(containerHeight / playerHeight);\r\n\r\n    return Array.from({ length: numberOfPlayers }).map((_, i) => {\r\n        const row = Math.floor(i / cols);\r\n        const col = i % cols;\r\n\r\n        const playersInCol = (row === rows - 1) ? (cols - (cols * rows - numberOfPlayers)) : cols;\r\n\r\n        const topOffset = (containerHeight - rows * playerHeight) / 2;\r\n        let leftOffset = (containerWidth - playersInCol * playerWidth) / 2;\r\n\r\n        if (alignToRight) {\r\n            leftOffset *= 2;\r\n        }\r\n\r\n        const top = row * playerHeight + topOffset;\r\n        const left = col * playerWidth + leftOffset;\r\n\r\n        return {\r\n            top,\r\n            left,\r\n            width: playerWidth,\r\n            height: playerHeight,\r\n        };\r\n    });\r\n};","import styled from 'styled-components';\r\n\r\nexport const PlaybackSliderInteractionContainer = styled.div`\r\n    height: 19px;\r\n    margin-left: 8px;\r\n    margin-right: 8px;\r\n\r\n    position: relative;\r\n    top: -8px;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    z-index: 1000;\r\n    cursor: pointer;\r\n`;\r\n\r\nexport const PlaybackSliderContainer = styled.div<{ wide: boolean }>`\r\n    height: 3px;\r\n\r\n    position: relative;\r\n    top: 8px;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    transition: 100ms;\r\n\r\n    ${props => props.wide ? `\r\n        height: 4px;\r\n        top: 7.5px;\r\n    ` : null}\r\n`;\r\n\r\nexport const PlaybackSliderBar = styled.div.attrs<{ progress: number; color: string }>(props => ({\r\n    style: { right: `calc(100% - 100% * ${props.progress})` },\r\n}))<{ progress: number; color: string }>`\r\n    width: auto;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n\r\n    background-color: ${props => props.color};\r\n`;\r\n\r\nexport const PlaybackSliderScrubber = styled.div.attrs<{ progress: number; color: string; visible: boolean }>(props => ({\r\n    style: { right: `calc(100% - 100% * ${props.progress} - 6px)` },\r\n}))<{ progress: number; color: string; visible: boolean }>`\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background-color: ${props => props.color};\r\n\r\n    position: absolute;\r\n    top: -4px;\r\n\r\n    transform: scale(${props => props.visible ? 1 : 0});\r\n    transition: transform 100ms;\r\n`;\r\n\r\nexport const PlaybackSliderTimePreviewContainer = styled.div.attrs<{ progress: number; visible: boolean }>(props => ({\r\n    style: { left: `max(0px, min(calc(100% - 64px), calc(100% * ${props.progress} - 32px)))` },\r\n}))<{ progress: number; visible: boolean }>`\r\n    width: 64px;\r\n    height: 32px;\r\n\r\n    position: absolute;\r\n    top: -32px;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    opacity: ${props => props.visible ? 1 : 0};\r\n    transition: opacity 100ms;\r\n\r\n    pointer-events: none;\r\n`;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Typography, useTheme } from '@material-ui/core';\r\nimport { throttle } from 'lodash/fp';\r\nimport { formatSeconds } from '../../utils';\r\nimport { PlaybackSliderBar, PlaybackSliderContainer, PlaybackSliderInteractionContainer, PlaybackSliderScrubber, PlaybackSliderTimePreviewContainer } from './style'\r\n\r\nexport interface PlaybackSliderProps {\r\n    playedFraction: number;\r\n    loadedFraction: number;\r\n    durationSeconds: number;\r\n    isBuffering: boolean;\r\n    onSeek?: (playedFraction: number) => void;\r\n}\r\n\r\nconst throttledHandleSeek = throttle(1000, (playedFraction: number, onSeek?: (playedFraction: number) => void) => {\r\n    if (onSeek) {\r\n        onSeek(playedFraction);\r\n    }\r\n});\r\n\r\nconst PlaybackSlider: React.FC<PlaybackSliderProps> = ({ playedFraction, loadedFraction, durationSeconds, isBuffering, onSeek }) => {\r\n    const theme = useTheme();\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [isScrubberGrabbed, setIsScrubberGrabbed] = useState(false);\r\n    const [internalPlayedFraction, setInternalPlayedFraction] = useState(playedFraction);\r\n    const [mousePosFraction, setMousePosFraction] = useState(0);\r\n\r\n    const sliderContainerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!isScrubberGrabbed && !isBuffering) {\r\n            setInternalPlayedFraction(playedFraction);\r\n        }\r\n    }, [playedFraction, isScrubberGrabbed, isBuffering]);\r\n\r\n    const handleMouseEnter = () => setIsHovered(true);\r\n    const handleMouseLeave = () => setIsHovered(false);\r\n\r\n    const getMousePosFraction = (mouseX: number) => {\r\n        const { current: sliderContainer } = sliderContainerRef;\r\n        if (sliderContainer) {\r\n            const { width: sliderContainerWidth, x: sliderContainerX } = sliderContainer.getBoundingClientRect();\r\n\r\n            const relativeMouseX = mouseX - sliderContainerX;\r\n            const clampedMouseX = Math.max(0, Math.min(sliderContainerWidth, relativeMouseX));\r\n\r\n            return clampedMouseX / sliderContainerWidth;\r\n        }\r\n\r\n        return 0;\r\n    };\r\n\r\n    const handleNewPlayedFractionSelected = (mouseX: number) => {\r\n        const newMousePosFraction = getMousePosFraction(mouseX);\r\n        setMousePosFraction(newMousePosFraction);\r\n        setInternalPlayedFraction(newMousePosFraction);\r\n        throttledHandleSeek(newMousePosFraction, onSeek);\r\n    };\r\n\r\n    const handleWindowMouseMove = (event: MouseEvent) => {\r\n        handleNewPlayedFractionSelected(event.clientX);\r\n        event.preventDefault();\r\n    };\r\n\r\n    const handleMouseMove = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n        const newMousePosFraction = getMousePosFraction(event.clientX);\r\n        setMousePosFraction(newMousePosFraction);\r\n    };\r\n\r\n    const handleMouseDown = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n        setIsScrubberGrabbed(true);\r\n        handleNewPlayedFractionSelected(event.clientX);\r\n\r\n        window.addEventListener('mousemove', handleWindowMouseMove);\r\n        window.addEventListener('mouseup', handleMouseUp);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        setIsScrubberGrabbed(false);\r\n\r\n        window.removeEventListener('mousemove', handleWindowMouseMove);\r\n        window.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n\r\n    const isInteractable = isHovered || isScrubberGrabbed;\r\n\r\n    const interactionContainerProps = {\r\n        onMouseEnter: handleMouseEnter,\r\n        onMouseLeave: handleMouseLeave,\r\n        onMouseMove: handleMouseMove,\r\n        onMouseDown: handleMouseDown,\r\n        onMouseUp: handleMouseUp,\r\n    };\r\n\r\n    if (durationSeconds === null || durationSeconds === Infinity) {\r\n        return (\r\n            <PlaybackSliderInteractionContainer style={{ cursor: 'initial '}}>\r\n                <PlaybackSliderContainer wide={false}>\r\n                    <PlaybackSliderBar progress={1} color=\"rgba(255, 255, 255, 0.2)\" />\r\n                </PlaybackSliderContainer>\r\n            </PlaybackSliderInteractionContainer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <PlaybackSliderInteractionContainer {...interactionContainerProps}>\r\n            <PlaybackSliderContainer wide={isInteractable} ref={sliderContainerRef}>\r\n                <PlaybackSliderBar progress={1} color=\"rgba(255, 255, 255, 0.2)\" />\r\n                <PlaybackSliderBar progress={loadedFraction} color=\"rgba(255, 255, 255, 0.6)\" />\r\n                <PlaybackSliderBar progress={internalPlayedFraction} color={theme.palette.primary.light} />\r\n\r\n                <PlaybackSliderScrubber progress={internalPlayedFraction} color={theme.palette.primary.light} visible={isInteractable} />\r\n\r\n                <PlaybackSliderTimePreviewContainer progress={mousePosFraction} visible={isInteractable}>\r\n                    <Typography variant=\"caption\">\r\n                        {formatSeconds(Math.round(mousePosFraction * durationSeconds))}\r\n                    </Typography>\r\n                </PlaybackSliderTimePreviewContainer>\r\n            </PlaybackSliderContainer>\r\n        </PlaybackSliderInteractionContainer>\r\n    );\r\n};\r\n\r\nexport default PlaybackSlider;\r\n","import styled from 'styled-components';\r\n\r\nexport const VolumeControlContainer = styled.div<{ isSliderVisible: boolean }>`\r\n    width: ${props => props.isSliderVisible ? 114 : 30}px;\r\n    height: 30px;\r\n    overflow: hidden;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n\r\n    transition: width 100ms;\r\n`;\r\n\r\nexport const VolumeControlIconContainer = styled.div`\r\n    margin-right: 12px;\r\n    z-index: 1;\r\n`;\r\n\r\nexport const VolumeControlSliderContainer = styled.div`\r\n    width: 62px;\r\n    height: 28px;\r\n    z-index: 0;\r\n`;\r\n","import { useState, useEffect } from 'react';\r\nimport { throttle } from 'lodash/fp';\r\nimport { IconButton, Slider, withStyles } from '@material-ui/core';\r\nimport { VolumeOff, VolumeDown, VolumeUp } from '@material-ui/icons';\r\nimport { VolumeControlContainer, VolumeControlIconContainer, VolumeControlSliderContainer } from './style';\r\n\r\nconst VolumeSlider = withStyles({\r\n    root: {\r\n        color: 'white',\r\n        height: 4,\r\n    },\r\n    thumb: {\r\n        '&:focus, &:hover, &$active': {\r\n            boxShadow: 'inherit',\r\n        },\r\n    },\r\n    active: {},\r\n    track: {\r\n        height: 4,\r\n        marginTop: -1,\r\n    },\r\n    rail: {\r\n        height: 4,\r\n        marginTop: -1,\r\n    },\r\n})(Slider);\r\n\r\ninterface VolumeControlProps {\r\n    volume: number;\r\n    isMuted?: boolean;\r\n    onVolumeChange?: (volume: number) => void;\r\n    onMuteUnmute?: (isMuted: boolean) => void;\r\n}\r\n\r\nconst throttledOnVolumeChange = throttle(100, (volume: number, onVolumeChange?: (volume: number) => void) => {\r\n    if (onVolumeChange) {\r\n        onVolumeChange(volume);\r\n    }\r\n});\r\n\r\nconst VolumeControl: React.FC<VolumeControlProps> = ({ volume, isMuted, onVolumeChange, onMuteUnmute }) => {\r\n    const [isMouseOver, setIsMouseOver] = useState(false);\r\n    const [isAdjustingVolume, setIsAdjustingVolume] = useState(false);\r\n    const [internalVolume, setInternalVolume] = useState(volume);\r\n\r\n    useEffect(() => {\r\n        if (!isAdjustingVolume) {\r\n            setInternalVolume(volume);\r\n        }\r\n    }, [volume, isAdjustingVolume, setInternalVolume]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('mouseup', () => setIsAdjustingVolume(false));\r\n\r\n        return () => {\r\n            window.removeEventListener('mouseup', () => setIsAdjustingVolume(false));\r\n        };\r\n    }, [setIsAdjustingVolume]);\r\n\r\n    const handleVolumeChange = (_: React.ChangeEvent<{}>, v: number | number[]) => {\r\n        const parsedVolume = (Array.isArray(v) ? v[0] : v) || 0;\r\n\r\n        throttledOnVolumeChange(parsedVolume, onVolumeChange);\r\n        setInternalVolume(parsedVolume);\r\n    };\r\n\r\n    const handleIconClick = () => {\r\n        if (onMuteUnmute) {\r\n            onMuteUnmute(!isMuted);\r\n        }\r\n    };\r\n\r\n    const volumeControlContainerProps = {\r\n        isSliderVisible: isMouseOver || isAdjustingVolume,\r\n        onMouseEnter: () => setIsMouseOver(true),\r\n        onMouseLeave: () => setIsMouseOver(false),\r\n    };\r\n\r\n    const volumeControlSliderContainerProps = {\r\n        onMouseDown: () => setIsAdjustingVolume(true),\r\n        onMouseUp: () => setIsAdjustingVolume(false),\r\n    };\r\n\r\n    const volumeSliderProps = {\r\n        value: internalVolume,\r\n        min: 0,\r\n        max: 1,\r\n        step: 0.01,\r\n        onChange: handleVolumeChange,\r\n    };\r\n\r\n    return (\r\n        <VolumeControlContainer {...volumeControlContainerProps}>\r\n            <VolumeControlIconContainer>\r\n                <IconButton size=\"small\" onClick={handleIconClick}>\r\n                    {getVolumeIcon(volume, isMuted)}\r\n                </IconButton>\r\n            </VolumeControlIconContainer>\r\n            <VolumeControlSliderContainer {...volumeControlSliderContainerProps}>\r\n                <VolumeSlider {...volumeSliderProps} />\r\n            </VolumeControlSliderContainer>\r\n        </VolumeControlContainer>\r\n    );\r\n};\r\n\r\nconst getVolumeIcon = (volume: number, isMuted?: boolean) => {\r\n    if (isMuted || volume === 0) {\r\n        return <VolumeOff />;\r\n    } else if (volume < 0.5) {\r\n        return <VolumeDown />;\r\n    } else {\r\n        return <VolumeUp />;\r\n    }\r\n};\r\n\r\nexport default VolumeControl;\r\n","import styled from 'styled-components';\r\n\r\nexport const PlaybackControlBarContainer = styled.div`\r\n    width: 100%;\r\n    height: 46px;\r\n`;\r\n\r\nexport const PlaybackControlBarOuterWrapper = styled.div`\r\n    width: 100%;\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n`;\r\n\r\nexport const PlaybackControlBarInnerWrapper = styled.div`\r\n    height: 30px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex: 1;\r\n`;\r\n\r\nexport const PlaybackControlBarProgressTextWrapper = styled.div`\r\n    height: 100%;\r\n    padding-left: 12px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n\r\n    user-select: none;\r\n`;\r\n\r\nexport const PlaybackControlBarButtonsSpacer = styled.div`\r\n    flex: 1;\r\n`;\r\n\r\nexport const PlaybackControlBarActionsWrapper = styled.div`\r\n    height: 28px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: right;\r\n    align-items: center;\r\n`;\r\n","import { IconButton, Typography } from '@material-ui/core';\r\nimport { PlayArrow, Pause } from '@material-ui/icons';\r\nimport { formatSeconds } from '../../utils';\r\nimport { PlaybackSlider } from '../PlaybackSlider';\r\nimport { VolumeControl } from '../VolumeControl';\r\nimport {\r\n    PlaybackControlBarContainer,\r\n    PlaybackControlBarOuterWrapper,\r\n    PlaybackControlBarInnerWrapper,\r\n    PlaybackControlBarProgressTextWrapper,\r\n    PlaybackControlBarButtonsSpacer,\r\n    PlaybackControlBarActionsWrapper,\r\n} from './style';\r\n\r\ninterface PlaybackControlBarProps {\r\n    isPlaying: boolean;\r\n    isBuffering: boolean;\r\n    isMuted: boolean;\r\n    volume: number;\r\n    durationSeconds: number;\r\n    playedFraction: number;\r\n    loadedFraction: number;\r\n\r\n    onPlay: () => void;\r\n    onPause: () => void;\r\n    onMuteUnmute: (isMuted: boolean) => void;\r\n    onVolumeChange: (volume: number) => void;\r\n    onSeek: (seconds: number) => void;\r\n\r\n    actions: JSX.Element;\r\n}\r\n\r\nconst PlaybackControlBar: React.FC<PlaybackControlBarProps> = ({\r\n    isPlaying,\r\n    isBuffering,\r\n    isMuted,\r\n    volume,\r\n    durationSeconds,\r\n    playedFraction,\r\n    loadedFraction,\r\n    onPlay,\r\n    onPause,\r\n    onMuteUnmute,\r\n    onVolumeChange,\r\n    onSeek,\r\n    actions,\r\n}) => {\r\n    const handlePlayPauseClick = () => {\r\n        if (isPlaying) {\r\n            onPause();\r\n        } else {\r\n            onPlay();\r\n        }\r\n    };\r\n\r\n    const handleSeek = (seekFraction: number) => {\r\n        onSeek(seekFraction * durationSeconds);\r\n    };\r\n\r\n    const playbackSliderProps = {\r\n        playedFraction,\r\n        loadedFraction,\r\n        durationSeconds,\r\n        isBuffering,\r\n        onSeek: handleSeek,\r\n    };\r\n\r\n    const volumeControlProps = {\r\n        volume: isMuted ? 0 : volume,\r\n        onMuteUnmute,\r\n        onVolumeChange,\r\n    };\r\n\r\n    const isLive = (durationSeconds === null || durationSeconds === Infinity);\r\n\r\n    return (\r\n        <PlaybackControlBarContainer>\r\n            <PlaybackSlider {...playbackSliderProps} />\r\n            <PlaybackControlBarOuterWrapper>\r\n                <IconButton size=\"small\" onClick={handlePlayPauseClick}>\r\n                    {isPlaying ? <Pause fontSize=\"large\" /> : <PlayArrow fontSize=\"large\" />}\r\n                </IconButton>\r\n                <PlaybackControlBarInnerWrapper>\r\n                    <div style={{ width: '10px' }} />\r\n\r\n                    <VolumeControl {...volumeControlProps} />\r\n\r\n                    {!isLive ? (\r\n                        <PlaybackControlBarProgressTextWrapper>\r\n                            <Typography variant=\"body2\">{formatSeconds(Math.round(playedFraction * durationSeconds))}</Typography>\r\n                            <div style={{ width: '4px' }} />\r\n                            <Typography variant=\"body2\"> / </Typography>\r\n                            <div style={{ width: '4px' }} />\r\n                            <Typography variant=\"body2\">{formatSeconds(durationSeconds)}</Typography>\r\n                        </PlaybackControlBarProgressTextWrapper>\r\n                    ) : null}\r\n\r\n                    <PlaybackControlBarButtonsSpacer />\r\n\r\n                    <PlaybackControlBarActionsWrapper>\r\n                        {actions}\r\n                    </PlaybackControlBarActionsWrapper>\r\n                </PlaybackControlBarInnerWrapper>\r\n            </PlaybackControlBarOuterWrapper>\r\n        </PlaybackControlBarContainer>\r\n    );\r\n};\r\n\r\nexport default PlaybackControlBar;\r\n","import { useRef, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton, ListItemIcon, Menu, MenuItem, Tooltip, Typography } from '@material-ui/core';\r\nimport { VisibilityOff, ArrowBack, ArrowForward, ArrowUpward, ArrowDownward, CenterFocusWeak, Delete, Settings } from '@material-ui/icons';\r\nimport { State, Layout } from '../../redux/types';\r\nimport { movePlayerToSecondaryPlayers, movePlayerToMainPlayers, makePlayerMain, movePlayerLeft, movePlayerRight, removeVideo } from '../../redux/actions';\r\nimport { getLayout, getIsPlayerMain, canMovePlayerLeft, canMovePlayerRight } from '../../redux/selectors';\r\n\r\ninterface OwnProps {\r\n    id: string;\r\n    onHide?: () => void;\r\n    dense?: boolean;\r\n}\r\n\r\ninterface StateProps {\r\n    layout: Layout;\r\n    isMainPlayer: boolean;\r\n    canMoveLeft: boolean;\r\n    canMoveRight: boolean;\r\n}\r\n\r\ninterface DispatchProps {\r\n    movePlayerToMainPlayers: (id: string) => void;\r\n    movePlayerToSecondaryPlayers: (id: string) => void;\r\n    makePlayerMain: (id: string) => void;\r\n    movePlayerLeft: (id: string) => void;\r\n    movePlayerRight: (id: string) => void;\r\n    removeVideo: (id: string) => void;\r\n}\r\n\r\nexport type IndividualPlaybackControlBarActionsProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst IndividualPlaybackControlBarActions: React.FC<IndividualPlaybackControlBarActionsProps> = ({\r\n    id,\r\n    onHide,\r\n    dense,\r\n    layout,\r\n    isMainPlayer,\r\n    canMoveLeft,\r\n    canMoveRight,\r\n    movePlayerToMainPlayers,\r\n    movePlayerToSecondaryPlayers,\r\n    makePlayerMain,\r\n    movePlayerLeft,\r\n    movePlayerRight,\r\n    removeVideo,\r\n}) => {\r\n    const settingsButtonRef = useRef<HTMLButtonElement | null>(null);\r\n\r\n    const [isSettingsMenuOpen, setIsSettingsMenuOpen] = useState(false);\r\n    const [isDeleteConfirmationDialogShown, setIsDeleteConfirmationDialogShown] = useState(false);\r\n\r\n    const handleFocusButtonClick = () => {\r\n        makePlayerMain(id);\r\n    };\r\n\r\n    const handleMoveButtonClick = () => {\r\n        if (isMainPlayer) {\r\n            movePlayerToSecondaryPlayers(id);\r\n        } else {\r\n            movePlayerToMainPlayers(id);\r\n        }\r\n    };\r\n\r\n    const handleHideButtonClick = () => {\r\n        if (onHide) {\r\n            onHide();\r\n        }\r\n    };\r\n\r\n    const handleDeleteButtonClick = () => {\r\n        setIsDeleteConfirmationDialogShown(true);\r\n    };\r\n\r\n    const handleSettingsButtonClick = () => {\r\n        setIsSettingsMenuOpen(true);\r\n    };\r\n\r\n    const handleSettingsMenuHide = () => {\r\n        setIsSettingsMenuOpen(false);\r\n    };\r\n\r\n    const handleCancelDeletionButtonClick = () => {\r\n        setIsDeleteConfirmationDialogShown(false);\r\n    };\r\n\r\n    const handleConfirmDeletionButtonClick = () => {\r\n        removeVideo(id);\r\n    };\r\n\r\n    const actions = [\r\n        {\r\n            isShown: (layout === Layout.Focused || layout === Layout.Overlay) && !isMainPlayer,\r\n            title: 'Focus',\r\n            icon: <CenterFocusWeak fontSize=\"small\" />,\r\n            onClick: handleFocusButtonClick,\r\n        },\r\n        {\r\n            isShown: canMoveLeft,\r\n            title: 'Move left',\r\n            icon: <ArrowBack fontSize=\"small\" />,\r\n            onClick: () => movePlayerLeft(id),\r\n        },\r\n        {\r\n            isShown: layout === Layout.Focused,\r\n            title: isMainPlayer ? 'Move down' : 'Move up',\r\n            icon: isMainPlayer ? <ArrowDownward fontSize=\"small\" /> : <ArrowUpward fontSize=\"small\" />,\r\n            onClick: handleMoveButtonClick,\r\n        },\r\n        {\r\n            isShown: canMoveRight,\r\n            title: 'Move right',\r\n            icon: <ArrowForward fontSize=\"small\" />,\r\n            onClick: () => movePlayerRight(id),\r\n        },\r\n        {\r\n            isShown: true,\r\n            title: 'Hide controls overlay',\r\n            icon: <VisibilityOff fontSize=\"small\" />,\r\n            onClick: handleHideButtonClick,\r\n        },\r\n        {\r\n            isShown: true,\r\n            title: 'Remove video',\r\n            icon: <Delete fontSize=\"small\" />,\r\n            onClick: handleDeleteButtonClick,\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            {dense ? (\r\n                <>\r\n                    <IconButton size=\"small\" ref={settingsButtonRef} onClick={handleSettingsButtonClick}>\r\n                        <Settings fontSize=\"small\" />\r\n                    </IconButton>\r\n                    <div style={{ width: '4px' }} />\r\n\r\n                    <Menu anchorEl={settingsButtonRef.current} open={isSettingsMenuOpen} onClose={handleSettingsMenuHide} onClick={handleSettingsMenuHide}>\r\n                        {actions.map(({ isShown, title, icon, onClick }) => isShown ? (\r\n                            <MenuItem dense key=\"title\" onClick={onClick}>\r\n                                <ListItemIcon>\r\n                                    {icon}\r\n                                </ListItemIcon>\r\n                                <Typography variant=\"body1\">{title}</Typography>\r\n                            </MenuItem>\r\n                        ) : null)}\r\n                    </Menu>\r\n                </>\r\n            ) : (\r\n                actions.map(({ isShown, title, icon, onClick }) => isShown ? (\r\n                    <div key={title}>\r\n                        <Tooltip title={title}>\r\n                            <IconButton size=\"small\" onClick={onClick}>\r\n                                {icon}\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <div style={{ width: '4px' }} />\r\n                    </div>\r\n                ) : null)\r\n            )}\r\n\r\n            <div style={{ width: '4px' }} />\r\n\r\n            <Dialog open={isDeleteConfirmationDialogShown}>\r\n                <DialogTitle>Confirm deletion</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        Are you sure you want to delete this video?\r\n                    </DialogContentText>\r\n                    <DialogActions>\r\n                        <Button onClick={handleCancelDeletionButtonClick} color=\"default\">Cancel</Button>\r\n                        <Button onClick={handleConfirmDeletionButtonClick} color=\"primary\" variant=\"contained\">Delete</Button>\r\n                    </DialogActions>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, OwnProps, State>(\r\n    (state, ownProps) => ({\r\n        layout: getLayout(state),\r\n        isMainPlayer: getIsPlayerMain(ownProps.id)(state),\r\n        canMoveLeft: canMovePlayerLeft(ownProps.id)(state),\r\n        canMoveRight: canMovePlayerRight(ownProps.id)(state),\r\n    }),\r\n    {\r\n        movePlayerToMainPlayers,\r\n        movePlayerToSecondaryPlayers,\r\n        makePlayerMain,\r\n        movePlayerLeft,\r\n        movePlayerRight,\r\n        removeVideo,\r\n    },\r\n)(IndividualPlaybackControlBarActions);\r\n","import { connect } from 'react-redux';\r\nimport { State } from '../../redux/types';\r\nimport {\r\n    getIsPlayerPlaying,\r\n    getIsPlayerBuffering,\r\n    getPlayerDurationSeconds,\r\n    getPlayerVolume,\r\n    getPlayerPlayedFraction,\r\n    getPlayerLoadedFraction,\r\n    getIsPlayerMuted,\r\n} from '../../redux/selectors';\r\nimport {\r\n    playerStartPlaying,\r\n    playerStopPlaying,\r\n    playerUpdateVolume,\r\n    playerMute,\r\n    playerUnmute,\r\n    playerPushPendingSeek,\r\n    playerStartBuffering,\r\n} from '../../redux/actions';\r\nimport { PlaybackControlBar } from '../PlaybackControlBar';\r\nimport IndividualPlaybackControlBarActions from './IndividualPlaybackControlBarActions';\r\n\r\ninterface OwnProps {\r\n    id: string;\r\n    onHide?: () => void;\r\n\r\n    playerWidth?: number;\r\n    playerHeight?: number;\r\n}\r\n\r\ninterface StateProps {\r\n    isPlaying: boolean;\r\n    isBuffering: boolean;\r\n    isMuted: boolean;\r\n    volume: number;\r\n    durationSeconds: number;\r\n    playedFraction: number;\r\n    loadedFraction: number;\r\n}\r\n\r\ninterface DispatchProps {\r\n    playerStartPlaying: (id: string) => void;\r\n    playerStopPlaying: (id: string) => void;\r\n    playerUpdateVolume: (id: string, { volume }: { volume: number }) => void;\r\n    playerMute: (id: string) => void;\r\n    playerUnmute: (id: string) => void;\r\n    playerPushPendingSeek: (id: string, { seekToSeconds }: { seekToSeconds: number }) => void;\r\n    playerStartBuffering: (id: string) => void;\r\n}\r\n\r\nexport type IndividualPlaybackControlBarProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst IndividualPlaybackControlBar: React.FC<IndividualPlaybackControlBarProps> = ({\r\n    id,\r\n    isMuted,\r\n    onHide,\r\n    playerStartPlaying,\r\n    playerStopPlaying,\r\n    playerUpdateVolume,\r\n    playerMute,\r\n    playerUnmute,\r\n    playerPushPendingSeek,\r\n    playerStartBuffering,\r\n    playerWidth,\r\n    playerHeight,\r\n    ...other\r\n}) => {\r\n    const handleMuteUnmute = () => {\r\n        if (isMuted) {\r\n            playerUnmute(id);\r\n        } else {\r\n            playerMute(id);\r\n        }\r\n    };\r\n\r\n    const handleSeek = (seekToSeconds: number) => {\r\n        playerStartBuffering(id);\r\n        playerPushPendingSeek(id, { seekToSeconds });\r\n    };\r\n\r\n    const dense = playerWidth ? playerWidth < 320 : false;\r\n\r\n    const playbackControlBarProps = {\r\n        isMuted,\r\n        onPlay: () => playerStartPlaying(id),\r\n        onPause: () => playerStopPlaying(id),\r\n        onMuteUnmute: handleMuteUnmute,\r\n        onVolumeChange: (volume: number) => playerUpdateVolume(id, { volume }),\r\n        onSeek: handleSeek,\r\n\r\n        actions: <IndividualPlaybackControlBarActions id={id} onHide={onHide} dense={dense} />,\r\n\r\n        ...other,\r\n    };\r\n\r\n    return <PlaybackControlBar {...playbackControlBarProps} />\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, OwnProps, State>(\r\n    (state, { id }) => ({\r\n        isPlaying: getIsPlayerPlaying(id)(state),\r\n        isBuffering: getIsPlayerBuffering(id)(state),\r\n        isMuted: getIsPlayerMuted(id)(state),\r\n        volume: getPlayerVolume(id)(state),\r\n        durationSeconds: getPlayerDurationSeconds(id)(state),\r\n        playedFraction: getPlayerPlayedFraction(id)(state),\r\n        loadedFraction: getPlayerLoadedFraction(id)(state),\r\n    }),\r\n    {\r\n        playerStartPlaying,\r\n        playerStopPlaying,\r\n        playerUpdateVolume,\r\n        playerMute,\r\n        playerUnmute,\r\n        playerPushPendingSeek,\r\n        playerStartBuffering,\r\n    },\r\n)(IndividualPlaybackControlBar);","import styled from 'styled-components';\r\n\r\nexport const SettingsMenuContainer = styled.div`\r\n    width: 220px;\r\n    height: 500px;\r\n    padding-bottom: 16px;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-end;\r\n\r\n    overflow: hidden;\r\n    pointer-events: none;\r\n`;\r\n\r\nexport const SettingsMenuPaper = styled.div<{ height: number }>`\r\n    width: 100%;\r\n    height: ${props => props.height}px;\r\n\r\n    border-radius: 4px;\r\n    background-color: rgba(28, 28, 28, 0.9);\r\n    overflow: hidden;\r\n    pointer-events: all;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-end;\r\n\r\n    transition: height 100ms;\r\n`;\r\n\r\nexport const SettingsMenuListItemContainer = styled.div`\r\n    width: 100%;\r\n    height: 24px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n`;\r\n\r\nexport const SettingsMenuListItemValueContainer = styled.div`\r\n    margin-right: -8px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n`;\r\n\r\nexport const SettingsMenuListItemTitle = styled.span`\r\n    font-size: 0.875rem;\r\n    line-height: 24px;\r\n`;\r\n\r\nexport const SettingsMenuListItemValue = styled.span`\r\n    margin-top: 2px;\r\n    font-size: 0.75rem;\r\n    line-height: 24px;\r\n`;\r\n\r\nexport const SettingsMenuListItemSpacer = styled.div`\r\n    width: 64px;\r\n`;\r\n\r\nexport const SettingsMenuSectionHeader = styled.div`\r\n    height: 32px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n`;\r\n\r\nexport const SettingsMenuDescriptionListItemContainer = styled.div`\r\n    width: calc(100% + 20px);\r\n    margin-left: -12px;\r\n    margin-right: -8px;\r\n\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: flex-start;\r\n`;\r\n\r\nexport const SettingsMenuDescriptionListItemCheckmarContainer = styled.div`\r\n    width: 36px;\r\n    padding: 4px;\r\n    padding-right: 8px;\r\n`;\r\n\r\nexport const SettingsMenuDescriptionListItemTextContainer = styled.div`\r\n    flex: 1;\r\n    padding-top: 4px;\r\n    padding-bottom: 4px;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\n\r\nexport const SettingsMenuDescriptionListItemTitleContainer = styled.div`\r\n    font-size: 0.875rem;\r\n    margin-bottom: 2px;\r\n`;\r\n\r\nexport const SettingsMenuDescriptionListItemSubitleContainer = styled.div`\r\n    font-size: 0.75rem;\r\n    color: rgba(255, 255, 255, 0.7);\r\n`;\r\n","import { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { Icon, List, ListItem, Popper, Slide, Divider } from '@material-ui/core';\r\nimport { Check, ChevronLeft, ChevronRight } from '@material-ui/icons';\r\nimport { ControlsMode, Layout, State } from '../../redux/types';\r\nimport { getControlsMode, getLayout } from '../../redux/selectors';\r\nimport { changeControlsMode, changeLayout } from '../../redux/actions';\r\nimport {\r\n    SettingsMenuContainer,\r\n    SettingsMenuDescriptionListItemCheckmarContainer,\r\n    SettingsMenuDescriptionListItemContainer,\r\n    SettingsMenuDescriptionListItemSubitleContainer,\r\n    SettingsMenuDescriptionListItemTextContainer,\r\n    SettingsMenuDescriptionListItemTitleContainer,\r\n    SettingsMenuListItemContainer,\r\n    SettingsMenuListItemTitle,\r\n    SettingsMenuListItemValue,\r\n    SettingsMenuListItemValueContainer,\r\n    SettingsMenuPaper,\r\n    SettingsMenuSectionHeader,\r\n} from './style';\r\n\r\ninterface OwnProps {\r\n    isOpen: boolean;\r\n    anchorElement: Element | null;\r\n}\r\n\r\ninterface StateProps {\r\n    controlsMode: ControlsMode;\r\n    layout: Layout;\r\n}\r\n\r\ninterface DispatchProps {\r\n    changeControlsMode: (controlsMode: ControlsMode) => void;\r\n    changeLayout: (layout: Layout) => void;\r\n}\r\n\r\nexport type MasterPlaybackControlBarSettingsMenuProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst MasterPlaybackControlBarSettingsMenu: React.FC<MasterPlaybackControlBarSettingsMenuProps> = ({\r\n    isOpen,\r\n    anchorElement,\r\n    controlsMode,\r\n    layout,\r\n    changeControlsMode,\r\n    changeLayout,\r\n}) => {\r\n    const [selectedMenuIndex, setSelectedMenuIndex] = useState(0);\r\n\r\n    useEffect(() => {\r\n        setSelectedMenuIndex(0);\r\n    }, [isOpen]);\r\n\r\n    const popperProps = {\r\n        open: isOpen,\r\n        anchorEl: anchorElement,\r\n        placement: 'top' as 'top',\r\n        style: {\r\n            zIndex: 10000,\r\n            pointerEvents: 'none' as 'none',\r\n        },\r\n    };\r\n\r\n    const settingsMenuContainerHeight = [80, 288, 267][selectedMenuIndex];\r\n\r\n    const slideBaseProps = {\r\n        appear: false,\r\n        mountOnEnter: true,\r\n        unmountOnExit: true,\r\n    };\r\n\r\n    return (\r\n        <Popper {...popperProps}>\r\n            <SettingsMenuContainer>\r\n                <SettingsMenuPaper height={settingsMenuContainerHeight}>\r\n                    <Slide {...slideBaseProps} direction=\"right\" in={selectedMenuIndex === 0}>\r\n                        <List dense>\r\n                            <ListItem button onClick={() => setSelectedMenuIndex(1)}>\r\n                                <SettingsMenuListItemContainer>\r\n                                    <SettingsMenuListItemTitle>Layout</SettingsMenuListItemTitle>\r\n                                    <SettingsMenuListItemValueContainer>\r\n                                        <SettingsMenuListItemValue>{layout}</SettingsMenuListItemValue>\r\n                                        <Icon>\r\n                                            <ChevronRight />\r\n                                        </Icon>\r\n                                    </SettingsMenuListItemValueContainer>\r\n                                </SettingsMenuListItemContainer>\r\n                            </ListItem>\r\n                            <ListItem button onClick={() => setSelectedMenuIndex(2)}>\r\n                                <SettingsMenuListItemContainer>\r\n                                    <SettingsMenuListItemTitle>Controls</SettingsMenuListItemTitle>\r\n                                    <SettingsMenuListItemValueContainer>\r\n                                        <SettingsMenuListItemValue>{controlsMode}</SettingsMenuListItemValue>\r\n                                        <Icon>\r\n                                            <ChevronRight />\r\n                                        </Icon>\r\n                                    </SettingsMenuListItemValueContainer>\r\n                                </SettingsMenuListItemContainer>\r\n                            </ListItem>\r\n                        </List>\r\n                    </Slide>\r\n\r\n                    <Slide {...slideBaseProps} direction=\"left\" in={selectedMenuIndex === 1}>\r\n                        <List dense>\r\n                            <ListItem button onClick={() => setSelectedMenuIndex(0)}>\r\n                                <SettingsMenuSectionHeader>\r\n                                    <Icon style={{ marginLeft: '-8px', marginRight: '8px' }}>\r\n                                        <ChevronLeft />\r\n                                    </Icon>\r\n                                    <SettingsMenuListItemTitle>Layout</SettingsMenuListItemTitle>\r\n                                </SettingsMenuSectionHeader>\r\n                            </ListItem>\r\n                            <Divider style={{ backgroundColor: 'rgba(255, 255, 255, 0.3)' }} />\r\n                            <ListItem button onClick={() => changeLayout(Layout.Overlay)}>\r\n                                <SettingsMenuDescriptionListItemContainer>\r\n                                    <SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                        {layout === Layout.Overlay ? (\r\n                                            <Icon>\r\n                                                <Check />\r\n                                            </Icon>\r\n                                        ) : null}\r\n                                    </SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                    <SettingsMenuDescriptionListItemTextContainer>\r\n                                        <SettingsMenuDescriptionListItemTitleContainer>Overlay</SettingsMenuDescriptionListItemTitleContainer>\r\n                                        <SettingsMenuDescriptionListItemSubitleContainer>\r\n                                            One big player in the middle, the rest in an overlaid list at the top right.\r\n                                        </SettingsMenuDescriptionListItemSubitleContainer>\r\n                                    </SettingsMenuDescriptionListItemTextContainer>\r\n                                </SettingsMenuDescriptionListItemContainer>\r\n                            </ListItem>\r\n                            <ListItem button onClick={() => changeLayout(Layout.Focused)}>\r\n                                <SettingsMenuDescriptionListItemContainer>\r\n                                    <SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                        {layout === Layout.Focused ? (\r\n                                            <Icon>\r\n                                                <Check />\r\n                                            </Icon>\r\n                                        ) : null}\r\n                                    </SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                    <SettingsMenuDescriptionListItemTextContainer>\r\n                                        <SettingsMenuDescriptionListItemTitleContainer>Focused</SettingsMenuDescriptionListItemTitleContainer>\r\n                                        <SettingsMenuDescriptionListItemSubitleContainer>\r\n                                            One or more big players at the top, the rest in a list of small players at the bottom.\r\n                                        </SettingsMenuDescriptionListItemSubitleContainer>\r\n                                    </SettingsMenuDescriptionListItemTextContainer>\r\n                                </SettingsMenuDescriptionListItemContainer>\r\n                            </ListItem>\r\n                            <ListItem button onClick={() => changeLayout(Layout.Grid)}>\r\n                                <SettingsMenuDescriptionListItemContainer>\r\n                                    <SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                        {layout === Layout.Grid ? (\r\n                                            <Icon>\r\n                                                <Check />\r\n                                            </Icon>\r\n                                        ) : null}\r\n                                    </SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                    <SettingsMenuDescriptionListItemTextContainer>\r\n                                        <SettingsMenuDescriptionListItemTitleContainer>Grid</SettingsMenuDescriptionListItemTitleContainer>\r\n                                        <SettingsMenuDescriptionListItemSubitleContainer>\r\n                                            A grid of equally sized players.\r\n                                        </SettingsMenuDescriptionListItemSubitleContainer>\r\n                                    </SettingsMenuDescriptionListItemTextContainer>\r\n                                </SettingsMenuDescriptionListItemContainer>\r\n                            </ListItem>\r\n                        </List>\r\n                    </Slide>\r\n\r\n                    <Slide {...slideBaseProps} direction=\"left\" in={selectedMenuIndex === 2}>\r\n                        <List dense>\r\n                            <ListItem button onClick={() => setSelectedMenuIndex(0)}>\r\n                                <SettingsMenuSectionHeader>\r\n                                    <Icon style={{ marginLeft: '-8px', marginRight: '8px' }}>\r\n                                        <ChevronLeft />\r\n                                    </Icon>\r\n                                    <SettingsMenuListItemTitle>Controls</SettingsMenuListItemTitle>\r\n                                </SettingsMenuSectionHeader>\r\n                            </ListItem>\r\n                            <Divider style={{ backgroundColor: 'rgba(255, 255, 255, 0.3)' }} />\r\n                            <ListItem button onClick={() => changeControlsMode(ControlsMode.Individual)}>\r\n                                <SettingsMenuDescriptionListItemContainer>\r\n                                    <SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                        {controlsMode === ControlsMode.Individual ? (\r\n                                            <Icon>\r\n                                                <Check />\r\n                                            </Icon>\r\n                                        ) : null}\r\n                                    </SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                    <SettingsMenuDescriptionListItemTextContainer>\r\n                                        <SettingsMenuDescriptionListItemTitleContainer>Individual</SettingsMenuDescriptionListItemTitleContainer>\r\n                                        <SettingsMenuDescriptionListItemSubitleContainer>\r\n                                            Show controls for each player individually. Keyboard and mouse actions will be executed on the hovered player.\r\n                                        </SettingsMenuDescriptionListItemSubitleContainer>\r\n                                    </SettingsMenuDescriptionListItemTextContainer>\r\n                                </SettingsMenuDescriptionListItemContainer>\r\n                            </ListItem>\r\n                            <ListItem button onClick={() => changeControlsMode(ControlsMode.Grouped)}>\r\n                                <SettingsMenuDescriptionListItemContainer>\r\n                                    <SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                        {controlsMode === ControlsMode.Grouped ? (\r\n                                            <Icon>\r\n                                                <Check />\r\n                                            </Icon>\r\n                                        ) : null}\r\n                                    </SettingsMenuDescriptionListItemCheckmarContainer>\r\n                                    <SettingsMenuDescriptionListItemTextContainer>\r\n                                        <SettingsMenuDescriptionListItemTitleContainer>Grouped</SettingsMenuDescriptionListItemTitleContainer>\r\n                                        <SettingsMenuDescriptionListItemSubitleContainer>\r\n                                            Only show the main controls. Keyboard and mouse actions will affect all players at the same time.\r\n                                        </SettingsMenuDescriptionListItemSubitleContainer>\r\n                                    </SettingsMenuDescriptionListItemTextContainer>\r\n                                </SettingsMenuDescriptionListItemContainer>\r\n                            </ListItem>\r\n                        </List>\r\n                    </Slide>\r\n                </SettingsMenuPaper>\r\n            </SettingsMenuContainer>\r\n        </Popper>\r\n    );\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, OwnProps, State>(\r\n    createStructuredSelector({\r\n        controlsMode: getControlsMode,\r\n        layout: getLayout,\r\n    }),\r\n    {\r\n        changeControlsMode,\r\n        changeLayout,\r\n    },\r\n)(MasterPlaybackControlBarSettingsMenu);\r\n","import { useState, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { ClickAwayListener, IconButton } from '@material-ui/core';\r\nimport { Settings, Fullscreen, FullscreenExit } from '@material-ui/icons';\r\nimport { State } from '../../redux/types';\r\nimport { getIsFullscreen } from '../../redux/selectors';\r\nimport { toggleFullscreen } from '../../redux/actions';\r\nimport MasterPlaybackControlBarSettingsMenu from './MasterPlaybackControlBarSettingsMenu';\r\n\r\ninterface OwnProps {\r\n    isVisible: boolean;\r\n}\r\n\r\ninterface StateProps {\r\n    isFullscreen: boolean;\r\n}\r\n\r\ninterface DispatchProps {\r\n    toggleFullscreen: () => void;\r\n}\r\n\r\nexport type MasterPlaybackControlBarActionsProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst MasterPlaybackControlBarActions: React.FC<MasterPlaybackControlBarActionsProps> = ({\r\n    isVisible,\r\n    isFullscreen,\r\n    toggleFullscreen,\r\n}) => {\r\n    const settingsButtonRef = useRef<HTMLButtonElement | null>(null);\r\n    const [isSettingsMenuOpen, setIsSettingsMenuOpen] = useState(false);\r\n\r\n    const handleSettingsClick = () => setIsSettingsMenuOpen(!isSettingsMenuOpen);\r\n\r\n    const settingsMenuProps = {\r\n        isOpen: isVisible && isSettingsMenuOpen,\r\n        anchorElement: settingsButtonRef.current,\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ClickAwayListener onClickAway={() => setIsSettingsMenuOpen(false)}>\r\n                <div>\r\n                    <IconButton size=\"small\" onClick={handleSettingsClick} ref={settingsButtonRef}>\r\n                        <div style={{ width: '24px', height: '24px', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                            <Settings fontSize=\"small\" />\r\n                        </div>\r\n                    </IconButton>\r\n                    <MasterPlaybackControlBarSettingsMenu {...settingsMenuProps} />\r\n                </div>\r\n            </ClickAwayListener>\r\n\r\n            <IconButton size=\"small\" onClick={toggleFullscreen}>\r\n                {isFullscreen ? <FullscreenExit /> : <Fullscreen />}\r\n            </IconButton>\r\n\r\n            <div style={{ width: '4px' }} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, {}, State>(\r\n    createStructuredSelector({\r\n        isFullscreen: getIsFullscreen,\r\n    }),\r\n    {\r\n        toggleFullscreen,\r\n    },\r\n)(MasterPlaybackControlBarActions);\r\n","import { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { State } from '../../redux/types';\r\nimport {\r\n    getIsMasterPlayerBuffering,\r\n    getIsMasterPlayerMuted,\r\n    getIsMasterPlayerPlaying,\r\n    getMasterPlayerDurationSeconds,\r\n    getMasterPlayerLoadedFraction,\r\n    getMasterPlayerPlayedFraction,\r\n    getMasterPlayerVolume,\r\n} from '../../redux/selectors';\r\nimport {\r\n    startPlayback,\r\n    stopPlayback,\r\n    seekTo,\r\n    masterPlayerUpdateVolume,\r\n    masterPlayerMute,\r\n    masterPlayerUnmute,\r\n} from '../../redux/actions';\r\nimport { PlaybackControlBar } from '../PlaybackControlBar';\r\nimport MasterPlaybackControlBarActions from './MasterPlaybackControlBarActions';\r\n\r\ninterface OwnProps {\r\n    isVisible: boolean;\r\n    playerWidth?: number;\r\n    playerHeight?: number;\r\n}\r\n\r\ninterface StateProps {\r\n    isPlaying: boolean;\r\n    isBuffering: boolean;\r\n    isMuted: boolean;\r\n    volume: number;\r\n    durationSeconds: number;\r\n    playedFraction: number;\r\n    loadedFraction: number;\r\n}\r\n\r\ninterface DispatchProps {\r\n    startPlayback: () => void;\r\n    stopPlayback: () => void;\r\n    updateVolume: (volume: number) => void;\r\n    mute: () => void;\r\n    unmute: () => void;\r\n    seekTo: (seconds: number) => void;\r\n}\r\n\r\ntype MasterPlaybackControlBarProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst MasterPlaybackControlBar: React.FC<MasterPlaybackControlBarProps> = ({\r\n    isVisible,\r\n    isMuted,\r\n    startPlayback,\r\n    stopPlayback,\r\n    updateVolume,\r\n    mute,\r\n    unmute,\r\n    seekTo,\r\n    ...other\r\n}) => {\r\n    const handleMuteUnmute = () => {\r\n        if (isMuted) {\r\n            unmute();\r\n        } else {\r\n            mute();\r\n        }\r\n    };\r\n\r\n    const playbackControlBarProps = {\r\n        isMuted,\r\n        onPlay: startPlayback,\r\n        onPause: stopPlayback,\r\n        onMuteUnmute: handleMuteUnmute,\r\n        onVolumeChange: updateVolume,\r\n        onSeek: seekTo,\r\n\r\n        actions: <MasterPlaybackControlBarActions isVisible={isVisible} />,\r\n\r\n        ...other,\r\n    };\r\n\r\n    return <PlaybackControlBar {...playbackControlBarProps} />;\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, {}, State>(\r\n    createStructuredSelector({\r\n        isPlaying: getIsMasterPlayerPlaying,\r\n        isBuffering: getIsMasterPlayerBuffering,\r\n        isMuted: getIsMasterPlayerMuted,\r\n        volume: getMasterPlayerVolume,\r\n        durationSeconds: getMasterPlayerDurationSeconds,\r\n        playedFraction: getMasterPlayerPlayedFraction,\r\n        loadedFraction: getMasterPlayerLoadedFraction,\r\n    }),\r\n    {\r\n        startPlayback,\r\n        stopPlayback,\r\n        seekTo,\r\n        updateVolume: masterPlayerUpdateVolume,\r\n        mute: masterPlayerMute,\r\n        unmute: masterPlayerUnmute,\r\n    },\r\n)(MasterPlaybackControlBar);\r\n","import styled from 'styled-components';\r\n\r\nexport const PlayerControlOverlayContainer = styled.div<{ isBlockingPointerEvents: boolean; isCursorHidden: boolean }>`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n\r\n    pointer-events: ${props => props.isBlockingPointerEvents ? 'initial' : 'none' };\r\n    ${props => props.isCursorHidden ? 'cursor: none;' :''}\r\n\r\n    overflow: hidden;\r\n`;\r\n\r\ninterface WithVisibility {\r\n    isVisible: boolean;\r\n}\r\n\r\nexport const PlaybackControlBarWrapper = styled.div<WithVisibility>`\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    pointer-events: all;\r\n\r\n    transition: opacity 200ms;\r\n    opacity: ${props => props.isVisible ? 1 : 0};\r\n`;\r\n\r\nexport const PlaybackControlOverlayBottomShadow = styled.div<WithVisibility>`\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    pointer-events: none;\r\n\r\n    height: 30%;\r\n\r\n    background: linear-gradient(0deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.1) 70%, rgba(0, 0, 0, 0));\r\n\r\n    transition: opacity 200ms;\r\n    opacity: ${props => props.isVisible ? 1 : 0};\r\n`;\r\n\r\nexport const PlayerControlOverlayClickCapture = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n`;\r\n\r\nexport const PlaybackControlBarFlexSpacer = styled.div`\r\n    height: 46px;\r\n`;\r\n\r\nexport const MinimizedButtonContainer = styled.div`\r\n    position: absolute;\r\n\r\n    top: calc(50% - 20px);\r\n    right: 8px;\r\n\r\n    width: 40px;\r\n    height: 40px;\r\n\r\n    z-index: 10;\r\n`;\r\n","import { useEffect, useState, useRef, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Tooltip, Fab } from '@material-ui/core';\r\nimport { Visibility } from '@material-ui/icons';\r\nimport { changeFocusedPlayerId, playerStartPlaying, playerStopPlaying, startPlayback, stopPlayback } from '../../redux/actions';\r\nimport { getControlsMode, getIsFullscreen, getIsMasterPlayerPlaying, getIsPlayerPlaying } from '../../redux/selectors';\r\nimport { ControlsMode, State } from '../../redux/types';\r\nimport { IndividualPlaybackControlBar } from '../IndividualPlaybackControlBar';\r\nimport { MasterPlaybackControlBar } from '../MasterPlaybackControlBar';\r\nimport {\r\n    PlayerControlOverlayContainer,\r\n    PlaybackControlBarWrapper,\r\n    PlaybackControlBarFlexSpacer,\r\n    PlaybackControlOverlayBottomShadow,\r\n    PlayerControlOverlayClickCapture,\r\n    MinimizedButtonContainer,\r\n} from './style';\r\n\r\ninterface OwnProps {\r\n    id?: string;\r\n    width?: number;\r\n    height?: number;\r\n}\r\n\r\ninterface StateProps {\r\n    isPlaying: boolean;\r\n    isFullscreen: boolean;\r\n    controlsMode: ControlsMode;\r\n}\r\n\r\ninterface DispatchProps {\r\n    playerStartPlaying: (id: string) => void;\r\n    playerStopPlaying: (id: string) => void;\r\n    masterPlayerStartPlaying: () => void;\r\n    masterPlayerStopPlaying: () => void;\r\n    changeFocusedPlayerId: (id: string | null) => void;\r\n}\r\n\r\nexport type PlayerControlOverlayProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst PlayerControlOverlay: React.FC<PlayerControlOverlayProps> = ({\r\n    id,\r\n    width,\r\n    height,\r\n    isPlaying,\r\n    isFullscreen,\r\n    controlsMode,\r\n    playerStartPlaying,\r\n    playerStopPlaying,\r\n    masterPlayerStartPlaying,\r\n    masterPlayerStopPlaying,\r\n    changeFocusedPlayerId,\r\n}) => {\r\n    const hideControlsTimeoutId = useRef<number | null>(null);\r\n\r\n    const [isMinimized, setIsMinimized] = useState(false);\r\n    const [isMouseOverPlayer, setIsMouseOverPlayer] = useState(false);\r\n    const [isControlBarVisible, setIsControlBarVisible] = useState(true);\r\n\r\n    const updateHideTimeout = useCallback(() => {\r\n        if (hideControlsTimeoutId.current) {\r\n            window.clearTimeout(hideControlsTimeoutId.current);\r\n        }\r\n\r\n        hideControlsTimeoutId.current = window.setTimeout(() => {\r\n            if (isPlaying) {\r\n                setIsControlBarVisible(false);\r\n            }\r\n\r\n            hideControlsTimeoutId.current = null;\r\n        }, 3000);\r\n    }, [isPlaying]);\r\n\r\n    useEffect(() => {\r\n        updateHideTimeout();\r\n    }, [isPlaying, updateHideTimeout]);\r\n\r\n    useEffect(() => {\r\n        if (!id || (id && controlsMode === ControlsMode.Individual)) {\r\n            setIsControlBarVisible(!isPlaying || isMouseOverPlayer);\r\n        } else {\r\n            setIsControlBarVisible(false);\r\n        }\r\n    }, [isPlaying, isMouseOverPlayer, controlsMode, id]);\r\n\r\n    const handleMouseEnter = () => {\r\n        setIsMouseOverPlayer(true);\r\n        changeFocusedPlayerId(id || null);\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        setIsMouseOverPlayer(false);\r\n        changeFocusedPlayerId(null);\r\n    };\r\n\r\n    const handleMouseMove = () => {\r\n        if (isMouseOverPlayer) {\r\n            setIsControlBarVisible(true);\r\n        }\r\n\r\n        updateHideTimeout();\r\n    };\r\n\r\n    const handleClick = () => {\r\n        if (isPlaying) {\r\n            if (id) {\r\n                playerStopPlaying(id);\r\n            } else {\r\n                masterPlayerStopPlaying();\r\n            }\r\n        } else {\r\n            updateHideTimeout();\r\n\r\n            if (id) {\r\n                playerStartPlaying(id);\r\n            } else {\r\n                masterPlayerStartPlaying();\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleHide = () => setIsMinimized(true);\r\n    const handleShow = () => setIsMinimized(false);\r\n\r\n    const isMaster = !id;\r\n    const isOverlaid = (isMaster && isFullscreen) || !isMaster;\r\n    const isBlockingPointerEvents = (isMaster && controlsMode === ControlsMode.Grouped) || !isMaster;\r\n\r\n    const playbackControlOverlayContainerProps = {\r\n        isBlockingPointerEvents,\r\n        isCursorHidden: !isControlBarVisible,\r\n        onMouseEnter: handleMouseEnter,\r\n        onMouseLeave: handleMouseLeave,\r\n        onMouseMove: handleMouseMove,\r\n    };\r\n\r\n    if (isMinimized) {\r\n        return (\r\n            <MinimizedButtonContainer>\r\n                <Tooltip title=\"Show controls overlay\">\r\n                    <Fab size=\"small\" onClick={handleShow}>\r\n                        <Visibility fontSize=\"small\" />\r\n                    </Fab>\r\n                </Tooltip>\r\n            </MinimizedButtonContainer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <PlayerControlOverlayContainer {...playbackControlOverlayContainerProps}>\r\n                <PlaybackControlOverlayBottomShadow isVisible={isControlBarVisible && isOverlaid} />\r\n                <PlayerControlOverlayClickCapture onClick={handleClick} />\r\n                <PlaybackControlBarWrapper isVisible={isControlBarVisible || !isOverlaid}>\r\n                    {id\r\n                        ? <IndividualPlaybackControlBar id={id} onHide={handleHide} playerWidth={width} playerHeight={height} />\r\n                        : <MasterPlaybackControlBar isVisible={isControlBarVisible || !isOverlaid} playerWidth={width} playerHeight={height} />\r\n                    }\r\n                </PlaybackControlBarWrapper>\r\n            </PlayerControlOverlayContainer>\r\n\r\n            {(isMaster && !isFullscreen) ? <PlaybackControlBarFlexSpacer /> : null}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, OwnProps, State>(\r\n    (state: State, { id }: OwnProps) => ({\r\n        isPlaying: id ? getIsPlayerPlaying(id)(state) : getIsMasterPlayerPlaying(state),\r\n        isFullscreen: getIsFullscreen(state),\r\n        controlsMode: getControlsMode(state),\r\n    }),\r\n    {\r\n        playerStartPlaying,\r\n        playerStopPlaying,\r\n        masterPlayerStartPlaying: startPlayback,\r\n        masterPlayerStopPlaying: stopPlayback,\r\n        changeFocusedPlayerId,\r\n    },\r\n)(PlayerControlOverlay);\r\n","import styled from 'styled-components';\r\n\r\ninterface VideoPlayerContainerProps {\r\n    width: number;\r\n    height: number;\r\n    shadow?: boolean;\r\n}\r\n\r\nexport const VideoPlayerContainer = styled.div<VideoPlayerContainerProps>`\r\n    position: relative;\r\n\r\n    width: ${props => props.width}px;\r\n    height: ${props => props.height}px;\r\n\r\n    ${props => props.shadow ? `\r\n        box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4);\r\n    ` : null}\r\n`;\r\n\r\nexport const ReactPlayerWrapper = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n`;\r\n","import { useRef, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ReactPlayer from 'react-player';\r\nimport { State, Video } from '../../redux/types';\r\nimport {\r\n    getIsPlayerPlaying,\r\n    getPlayerVolume,\r\n    getPlayerPendingSeeks,\r\n    getIsPlayerMuted,\r\n    getIsMasterPlayerBuffering,\r\n    getIsMasterPlayerMuted,\r\n    getMasterPlayerVolume,\r\n} from '../../redux/selectors';\r\nimport {\r\n    initializePlayer,\r\n    playerReady,\r\n    playerStartPlaying,\r\n    playerStopPlaying,\r\n    playerStartBuffering,\r\n    playerStopBuffering,\r\n    playerEndVideo,\r\n    playerUpdateDuration,\r\n    playerUpdateProgress,\r\n    playerPopPendingSeek,\r\n} from '../../redux/actions';\r\nimport { PlayerControlOverlay } from '../PlayerControlOverlay';\r\nimport { ReactPlayerWrapper, VideoPlayerContainer } from './style';\r\n\r\ninterface OwnProps {\r\n    id: string;\r\n    video: Video;\r\n    width: number;\r\n    height: number;\r\n    shadow?: boolean;\r\n}\r\n\r\ninterface StateProps {\r\n    isPlaying: boolean;\r\n    isMasterBuffering: boolean;\r\n    volume: number;\r\n    masterVolume: number;\r\n    isPlayerMuted: boolean;\r\n    isMasterMuted: boolean;\r\n    pendingSeeks: number[];\r\n}\r\n\r\ninterface DispatchProps {\r\n    initializePlayer: typeof initializePlayer;\r\n    playerReady: typeof playerReady;\r\n    playerStartPlaying: typeof playerStartPlaying;\r\n    playerStopPlaying: typeof playerStopPlaying;\r\n    playerStartBuffering: typeof playerStartBuffering;\r\n    playerStopBuffering: typeof playerStopBuffering;\r\n    playerEndVideo: typeof playerEndVideo;\r\n    playerUpdateDuration: typeof playerUpdateDuration;\r\n    playerUpdateProgress: typeof playerUpdateProgress;\r\n    playerPopPendingSeek: typeof playerPopPendingSeek;\r\n}\r\n\r\ntype VideoPlayerProps = OwnProps & StateProps & DispatchProps;\r\n\r\nconst VideoPlayer: React.FC<VideoPlayerProps> = ({\r\n    id,\r\n    video,\r\n    width,\r\n    height,\r\n    shadow,\r\n    isPlaying,\r\n    isMasterBuffering,\r\n    volume,\r\n    masterVolume,\r\n    isPlayerMuted,\r\n    isMasterMuted,\r\n    pendingSeeks,\r\n    initializePlayer,\r\n    playerReady,\r\n    playerStartPlaying,\r\n    playerStopPlaying,\r\n    playerStartBuffering,\r\n    playerStopBuffering,\r\n    playerEndVideo,\r\n    playerUpdateDuration,\r\n    playerUpdateProgress,\r\n    playerPopPendingSeek,\r\n}) => {\r\n    const playerRef = useRef<ReactPlayer | null>(null);\r\n\r\n    useEffect(() => {\r\n        initializePlayer(id);\r\n    }, [id, initializePlayer]);\r\n\r\n    useEffect(() => {\r\n        const { current: player } = playerRef;\r\n\r\n        if (pendingSeeks.length > 0 && player) {\r\n            player.seekTo(pendingSeeks[0], 'seconds');\r\n            playerStartBuffering(id);\r\n            playerPopPendingSeek(id);\r\n        }\r\n    }, [id, pendingSeeks, playerStartBuffering, playerPopPendingSeek]);\r\n\r\n    const handlePlayerBuffer = () => playerStartBuffering(id);\r\n    const handlePlayerBufferEnd = () => playerStopBuffering(id);\r\n    const handlePlayerEnded = () => playerEndVideo(id);\r\n\r\n    const handlePlayerReady = () => {\r\n        playerReady(id);\r\n    };\r\n\r\n    const handlePlayerPlay = () => {\r\n        playerStartPlaying(id);\r\n    };\r\n\r\n    const handlePlayerPause = () => {\r\n        if (!isMasterBuffering) {\r\n            playerStopPlaying(id);\r\n        }\r\n    };\r\n\r\n    const handlePlayerDuration = (durationSeconds: number) => playerUpdateDuration(id, { durationSeconds });\r\n\r\n    const handlePlayerProgress = ({ played, loaded, playedSeconds, loadedSeconds }: { played: number; loaded: number; playedSeconds: number; loadedSeconds: number }) => {\r\n        playerUpdateProgress(id, { playedSeconds, playedFraction: played, loadedSeconds, loadedFraction: loaded });\r\n\r\n        if (loadedSeconds < playedSeconds) {\r\n            playerStartBuffering(id);\r\n        }\r\n\r\n        if (loadedSeconds >= playedSeconds) {\r\n            playerStopBuffering(id);\r\n        }\r\n    };\r\n\r\n    const isMuted = isPlayerMuted || isMasterMuted;\r\n\r\n    const playerProps = {\r\n        url: video.url,\r\n        ref: playerRef,\r\n        controls: false,\r\n        width,\r\n        height,\r\n        volume: isMuted ? 0 : (volume * masterVolume),\r\n        playing: isPlaying && !isMasterBuffering,\r\n        onReady: handlePlayerReady,\r\n        onPlay: handlePlayerPlay,\r\n        onPause: handlePlayerPause,\r\n        onBuffer: handlePlayerBuffer,\r\n        onBufferEnd: handlePlayerBufferEnd,\r\n        onEnded: handlePlayerEnded,\r\n        onDuration: handlePlayerDuration,\r\n        onProgress: handlePlayerProgress,\r\n        config: {\r\n            youtube: {\r\n                playerVars: {\r\n                    disablekb: 1,\r\n                },\r\n            },\r\n        },\r\n    };\r\n\r\n    return (\r\n        <VideoPlayerContainer width={width} height={height} shadow={shadow}>\r\n            <ReactPlayerWrapper>\r\n                <ReactPlayer {...playerProps}/>\r\n            </ReactPlayerWrapper>\r\n            <PlayerControlOverlay id={id} width={width} height={height} />\r\n        </VideoPlayerContainer>\r\n    );\r\n};\r\n\r\nexport default connect<StateProps, DispatchProps, OwnProps, State>(\r\n    (state, { id }) => ({\r\n        isPlaying: getIsPlayerPlaying(id)(state),\r\n        isMasterBuffering: getIsMasterPlayerBuffering(state),\r\n        volume: getPlayerVolume(id)(state),\r\n        masterVolume: getMasterPlayerVolume(state),\r\n        isPlayerMuted: getIsPlayerMuted(id)(state),\r\n        isMasterMuted: getIsMasterPlayerMuted(state),\r\n        pendingSeeks: getPlayerPendingSeeks(id)(state),\r\n    }),\r\n    {\r\n        initializePlayer,\r\n        playerReady,\r\n        playerStartPlaying,\r\n        playerStopPlaying,\r\n        playerStartBuffering,\r\n        playerStopBuffering,\r\n        playerEndVideo,\r\n        playerUpdateDuration,\r\n        playerUpdateProgress,\r\n        playerPopPendingSeek,\r\n    },\r\n)(VideoPlayer);\r\n","import styled from 'styled-components';\r\nimport { PlayerPosition } from './types';\r\n\r\nexport const PlayersViewContainer = styled.div`\r\n    position: relative;\r\n\r\n    width: 100%;\r\n    flex-grow: 1;\r\n\r\n    overflow: hidden;\r\n`;\r\n\r\ninterface PlayersViewPlayerWrapperProps extends PlayerPosition {\r\n    padding: number;\r\n    zIndex?: number;\r\n}\r\n\r\nexport const PlayersViewPlayerWrapper = styled.div<PlayersViewPlayerWrapperProps>`\r\n    position: absolute;\r\n    top: ${props => props.top}px;\r\n    left: ${props => props.left}px;\r\n    width: ${props => props.width}px;\r\n    height: ${props => props.height}px;\r\n    padding: ${props => props.padding}px;\r\n\r\n    ${props => props.zIndex ? `z-index: ${props.zIndex};` : ''}\r\n\r\n    transition: 300ms;\r\n`;\r\n\r\ninterface PlayersFocusedViewGrabberProps {\r\n    heightFraction: number;\r\n}\r\n\r\nexport const PlayersFocusedViewGrabber = styled.div<PlayersFocusedViewGrabberProps>`\r\n    position: absolute;\r\n    top: ${props => props.heightFraction * 100}%;\r\n    left: 0;\r\n    right: 0;\r\n    height: 10px;\r\n\r\n    opacity: 0;\r\n    transition: opacity 200ms;\r\n\r\n    &:hover {\r\n        opacity: 1;\r\n    }\r\n\r\n    cursor: ns-resize;\r\n    z-index: 1;\r\n`;\r\n\r\nexport const PlayersFocusedViewGrabberDashes = styled.div`\r\n    position: absolute;\r\n    top: 3.5px;\r\n    left: 16px;\r\n    right: 16px;\r\n    height: 0;\r\n\r\n    border-top: 3px dashed rgba(255, 255, 255, 0.3);\r\n`;\r\n\r\ninterface PlayersOverlayViewGrabberProps {\r\n    top: number;\r\n    left: number;\r\n    height: number;\r\n}\r\n\r\nexport const PlayersOverlayViewGrabber = styled.div<PlayersOverlayViewGrabberProps>`\r\n    position: absolute;\r\n    top: ${props => props.top}px;\r\n    left: ${props => props.left}px;\r\n\r\n    width: 10px;\r\n    height: ${props => props.height}px;\r\n\r\n    opacity: 0;\r\n    transition: opacity 200ms;\r\n\r\n    &:hover {\r\n        opacity: 1;\r\n    }\r\n\r\n    cursor: ew-resize;\r\n    z-index: 1;\r\n`;\r\n\r\nexport const PlayersOverlayViewGrabberDashes = styled.div<{ color: string }>`\r\n    position: absolute;\r\n    top: 4px;\r\n    left: 2px;\r\n    bottom: 4px;\r\n    width: 0;\r\n\r\n    border-left: 4px dashed ${props => props.color};\r\n`;\r\n","import { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { useTheme } from '@material-ui/core';\r\nimport { getOptimalGridPlayerSize, getPlayerGridPositions, getPlayerLinePositions } from '../../utils';\r\nimport { State, VideosState, Layout } from '../../redux/types';\r\nimport { getIsFullscreen, getLayout, getMainPlayerIds, getSecondaryPlayerIds, getVideos } from '../../redux/selectors';\r\nimport { VideoPlayer } from '../VideoPlayer';\r\nimport { PlayerPosition } from './types';\r\nimport { PlayersViewContainer, PlayersFocusedViewGrabber, PlayersFocusedViewGrabberDashes, PlayersViewPlayerWrapper, PlayersOverlayViewGrabber, PlayersOverlayViewGrabberDashes } from './style';\r\n\r\ninterface OwnProps {\r\n    padding?: number;\r\n    minPlayerHeight?: number;\r\n}\r\n\r\ninterface StateProps {\r\n    layout: Layout;\r\n    videos: VideosState;\r\n    isFullscreen: boolean;\r\n    mainPlayerIds: string[];\r\n    secondaryPlayerIds: string[];\r\n}\r\n\r\nexport type PlayersViewProps = OwnProps & StateProps;\r\n\r\nconst PlayersView: React.FC<PlayersViewProps> = ({\r\n    padding = 8,\r\n    minPlayerHeight = 150,\r\n    layout,\r\n    videos,\r\n    isFullscreen,\r\n    mainPlayerIds,\r\n    secondaryPlayerIds,\r\n}) => {\r\n    const theme = useTheme();\r\n    \r\n    const containerRef = useRef<HTMLDivElement | null>(null);\r\n    \r\n    const [playerPositions, setPlayerPositions] = useState<Record<string, PlayerPosition>>({});\r\n    const [isGrabberGrabbed, setIsGrabberGrabbed] = useState(false);\r\n    const [focusedGrabberHeightFraction, setFocusedGrabberHeightFraction] = useState(0.75);\r\n    const [overlayGrabberWidthFraction, setOverlayGrabberWidthFraction] = useState(0.3);\r\n    const [overlayDimensions, setOverlayDimensions] = useState<{ rows: number; cols: number }>({ rows: 0, cols: 0 });\r\n\r\n    const updatePlayersFocusedPosition = useCallback(() => {\r\n        const { current: container } = containerRef;\r\n        if (container) {\r\n            const { width: containerWidth, height: containerHeight } = container.getBoundingClientRect();\r\n\r\n            const mainContainerHeight = containerHeight * focusedGrabberHeightFraction;\r\n            const secondaryContainerHeight = containerHeight * (1 - focusedGrabberHeightFraction) - 10;\r\n\r\n            const mainPlayersSize = getOptimalGridPlayerSize({\r\n                containerWidth,\r\n                containerHeight: mainContainerHeight,\r\n                numberOfPlayers: mainPlayerIds.length,\r\n            });\r\n\r\n            const secondaryPlayersSize = getOptimalGridPlayerSize({\r\n                containerWidth,\r\n                containerHeight: secondaryContainerHeight,\r\n                numberOfPlayers: secondaryPlayerIds.length,\r\n            });\r\n\r\n            const mainPlayerPositions = getPlayerGridPositions({\r\n                ...mainPlayersSize,\r\n                containerWidth,\r\n                containerHeight: mainContainerHeight,\r\n                numberOfPlayers: mainPlayerIds.length,\r\n            });\r\n\r\n            const offsetSecondaryPlayerPositions = getPlayerGridPositions({\r\n                ...secondaryPlayersSize,\r\n                containerWidth,\r\n                containerHeight: secondaryContainerHeight,\r\n                numberOfPlayers: secondaryPlayerIds.length,\r\n            });\r\n\r\n            const secondaryPlayerPositions = offsetSecondaryPlayerPositions.map(pos => ({ ...pos, top: pos.top + mainContainerHeight + 10 }));\r\n\r\n            const keyedMainPlayerPositions = mainPlayerIds.reduce(\r\n                (positions, id, index) => ({\r\n                    ...positions,\r\n                    [id]: mainPlayerPositions[index],\r\n                }),\r\n                {},\r\n            );\r\n\r\n            const keyedSecondaryPlayerPositions = secondaryPlayerIds.reduce(\r\n                (positions, id, index) => ({\r\n                    ...positions,\r\n                    [id]: secondaryPlayerPositions[index],\r\n                }),\r\n                {},\r\n            );\r\n\r\n            setPlayerPositions({ ...keyedMainPlayerPositions, ...keyedSecondaryPlayerPositions });\r\n        }\r\n    }, [mainPlayerIds, secondaryPlayerIds, focusedGrabberHeightFraction]);\r\n\r\n    const updatePlayersOverlayPosition = useCallback(() => {\r\n        if (mainPlayerIds.length === 0) {\r\n            setPlayerPositions({});\r\n        }\r\n\r\n        const { current: container } = containerRef;\r\n        if (container) {\r\n            const { width: containerWidth, height: containerHeight } = container.getBoundingClientRect();\r\n\r\n            const mainPlayerSize = getOptimalGridPlayerSize({\r\n                containerWidth,\r\n                containerHeight,\r\n                numberOfPlayers: 1\r\n            });\r\n\r\n            const mainPlayerPosition = getPlayerGridPositions({\r\n                ...mainPlayerSize,\r\n                containerWidth,\r\n                containerHeight,\r\n                numberOfPlayers: 1\r\n            })[0];\r\n\r\n            const lineWidth = mainPlayerPosition.width * overlayGrabberWidthFraction;\r\n\r\n            const {\r\n                positions: offsetSecondaryPlayerPositions,\r\n                rows: overlayRows,\r\n                cols: overlayCols,\r\n            } = getPlayerLinePositions({\r\n                lineWidth,\r\n                minPlayerHeight,\r\n                containerHeight: mainPlayerSize.playerHeight - padding * 2 - 40,\r\n                numberOfPlayers: secondaryPlayerIds.length,\r\n            });\r\n\r\n            const secondaryPlayerPositions = offsetSecondaryPlayerPositions.map(pos => ({\r\n                ...pos,\r\n                top: pos.top + mainPlayerPosition.top + padding,\r\n                left: pos.left + (mainPlayerPosition.width - lineWidth) + mainPlayerPosition.left - padding,\r\n            }));\r\n\r\n            const keyedSecondaryPlayerPositions = secondaryPlayerIds.reduce(\r\n                (positions, id, index) => ({\r\n                    ...positions,\r\n                    [id]: secondaryPlayerPositions[index],\r\n                }),\r\n                {},\r\n            );\r\n\r\n            setOverlayDimensions({\r\n                rows: overlayRows,\r\n                cols: overlayCols,\r\n            });\r\n\r\n            setPlayerPositions({\r\n                [mainPlayerIds[0]]: mainPlayerPosition,\r\n                ...keyedSecondaryPlayerPositions,\r\n            });\r\n        }\r\n    }, [padding, mainPlayerIds, secondaryPlayerIds, minPlayerHeight, overlayGrabberWidthFraction]);\r\n\r\n    const updatePlayersGridPosition = useCallback(() => {\r\n        const { current: container } = containerRef;\r\n        if (container) {\r\n            const { width: containerWidth, height: containerHeight } = container.getBoundingClientRect();\r\n\r\n            const playersSize = getOptimalGridPlayerSize({\r\n                containerWidth,\r\n                containerHeight,\r\n                numberOfPlayers: Object.keys(videos).length,\r\n            })\r\n\r\n            const playerPositions = getPlayerGridPositions({\r\n                ...playersSize,\r\n                containerWidth,\r\n                containerHeight,\r\n                numberOfPlayers: Object.keys(videos).length,\r\n            });\r\n\r\n            const keyedPlayerPositions = [...mainPlayerIds, ...secondaryPlayerIds].reduce(\r\n                (positions, id, index) => ({\r\n                    ...positions,\r\n                    [id]: playerPositions[index],\r\n                }),\r\n                {},\r\n            );\r\n\r\n            setPlayerPositions(keyedPlayerPositions);\r\n        }\r\n    }, [videos, mainPlayerIds, secondaryPlayerIds]);\r\n\r\n    useEffect(() => {\r\n        switch (layout) {\r\n            case Layout.Focused:\r\n                updatePlayersFocusedPosition();\r\n                break;\r\n            case Layout.Overlay:\r\n                updatePlayersOverlayPosition();\r\n                break;\r\n            case Layout.Grid:\r\n                updatePlayersGridPosition();\r\n                break;\r\n        }\r\n    }, [containerRef, layout, videos, isFullscreen, updatePlayersFocusedPosition, updatePlayersOverlayPosition, updatePlayersGridPosition]);\r\n\r\n    const getPlayerPosition = useCallback((id: string) => {\r\n        return playerPositions[id] || { top: -100000, left: -100000, width: 0, height: 0 };\r\n    }, [playerPositions]);\r\n\r\n    const getOverlayGrabberPosition = () => {\r\n        const { current: container } = containerRef;\r\n        if (secondaryPlayerIds.length === 0 || mainPlayerIds.length === 0 || !container) {\r\n            return { top: -10000, left: -10000, height: 10000 };\r\n        }\r\n\r\n        const { top: mainPlayerTop, left: mainPlayerLeft, width: mainPlayerWidth } = getPlayerPosition(mainPlayerIds[0]);\r\n        const { height: secondaryPlayerHeight } = getPlayerPosition(secondaryPlayerIds[0]);\r\n        const { rows } = overlayDimensions;\r\n\r\n        return {\r\n            top: mainPlayerTop + padding,\r\n            left: mainPlayerLeft + mainPlayerWidth * (1 - overlayGrabberWidthFraction) - padding,\r\n            height: secondaryPlayerHeight * rows,\r\n        };\r\n    };\r\n\r\n    const updateOverlayGrabberWidthFraction = useCallback(() => {\r\n        const { cols } = overlayDimensions;\r\n\r\n        if (mainPlayerIds.length > 0 && secondaryPlayerIds.length > 0) {\r\n            const { width: mainPlayerWidth } = getPlayerPosition(mainPlayerIds[0]);\r\n            const { width: secondaryPlayerWidth } = getPlayerPosition(secondaryPlayerIds[0]);\r\n\r\n            const overlayWidth = cols * secondaryPlayerWidth;\r\n\r\n            if (mainPlayerWidth > 0 && overlayWidth > 0) {\r\n                const newOverlayGrabberWidthFraction = overlayWidth / mainPlayerWidth;\r\n                if (newOverlayGrabberWidthFraction <= 1) {\r\n                    setOverlayGrabberWidthFraction(overlayWidth / mainPlayerWidth);\r\n                }\r\n            }\r\n        }\r\n    }, [getPlayerPosition, mainPlayerIds, secondaryPlayerIds, overlayDimensions]);\r\n\r\n    useEffect(() => {\r\n        if (!isGrabberGrabbed) {\r\n            updateOverlayGrabberWidthFraction();\r\n        }\r\n    }, [overlayDimensions, isGrabberGrabbed, updateOverlayGrabberWidthFraction]);\r\n\r\n    const handleWindowMouseMove = useCallback((event: MouseEvent) => {\r\n        const { current: container } = containerRef;\r\n        if (container && isGrabberGrabbed) {\r\n            if (layout === Layout.Focused) {\r\n                const mouseY = event.clientY;\r\n                const { height: containerHeight, y: containerY } = container.getBoundingClientRect();\r\n\r\n                const relativeMouseY = mouseY - containerY;\r\n                const clampedMouseY = Math.max(minPlayerHeight, Math.min(containerHeight - minPlayerHeight, relativeMouseY));\r\n\r\n                setFocusedGrabberHeightFraction(clampedMouseY / containerHeight);\r\n            }\r\n\r\n            if (layout === Layout.Overlay && mainPlayerIds.length > 0) {\r\n                const mouseX = event.clientX;\r\n                const { left: mainPlayerLeft, width: mainPlayerWidth } = getPlayerPosition(mainPlayerIds[0]);\r\n\r\n                const minPlayerWidth = minPlayerHeight / 9 * 16;\r\n                const relativeMouseX = mouseX - mainPlayerLeft;\r\n                const clampedMouseX = Math.max(0, Math.min(mainPlayerWidth - minPlayerWidth, relativeMouseX));\r\n\r\n                setOverlayGrabberWidthFraction(1 - clampedMouseX / mainPlayerWidth);\r\n            }\r\n        }\r\n    }, [getPlayerPosition, layout, mainPlayerIds, minPlayerHeight, isGrabberGrabbed]);\r\n\r\n    const handleGrabberMouseDown = () => {\r\n        setIsGrabberGrabbed(true);\r\n    };\r\n\r\n    const handleGrabberMouseUp = useCallback(() => {\r\n        if (layout === Layout.Overlay) {\r\n            updateOverlayGrabberWidthFraction();\r\n        }\r\n        setIsGrabberGrabbed(false);\r\n    }, [layout, updateOverlayGrabberWidthFraction]);\r\n\r\n    useEffect(() => {\r\n        if (isGrabberGrabbed) {\r\n            window.addEventListener('mousemove', handleWindowMouseMove);\r\n            window.addEventListener('mouseup', handleGrabberMouseUp);\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('mousemove', handleWindowMouseMove);\r\n            window.removeEventListener('mouseup', handleGrabberMouseUp);\r\n        };\r\n    }, [isGrabberGrabbed, handleWindowMouseMove, handleGrabberMouseUp]);\r\n\r\n    const focusedGrabberProps = {\r\n        heightFraction: focusedGrabberHeightFraction,\r\n        onMouseDown: handleGrabberMouseDown,\r\n        onMouseUp: handleGrabberMouseUp,\r\n    };\r\n\r\n    const overlayGrabberProps = {\r\n        ...getOverlayGrabberPosition(),\r\n        onMouseDown: handleGrabberMouseDown,\r\n        onMouseUp: handleGrabberMouseUp,\r\n    };\r\n\r\n    return (\r\n        <PlayersViewContainer ref={containerRef}>\r\n            {layout === Layout.Focused ? (\r\n                <PlayersFocusedViewGrabber {...focusedGrabberProps}>\r\n                    <PlayersFocusedViewGrabberDashes />\r\n                </PlayersFocusedViewGrabber>\r\n            ) : null}\r\n\r\n            {layout === Layout.Overlay ? (\r\n                <PlayersOverlayViewGrabber {...overlayGrabberProps}>\r\n                    <PlayersOverlayViewGrabberDashes color={theme.palette.primary.main} />\r\n                </PlayersOverlayViewGrabber>\r\n            ) : null}\r\n\r\n            {Object.entries(videos).map(([id, video]) => {\r\n                const playerPosition = getPlayerPosition(id);\r\n                const isOverlaidSecondary = layout === Layout.Overlay && secondaryPlayerIds.indexOf(id) !== -1;\r\n\r\n                const wrapperProps = {\r\n                    key: id,\r\n                    padding,\r\n                    zIndex: isOverlaidSecondary ? 2 : undefined,\r\n                    ...playerPosition,\r\n                };\r\n\r\n                const playerProps = {\r\n                    id,\r\n                    video,\r\n                    width: playerPosition.width - padding * 2,\r\n                    height: playerPosition.height - padding * 2,\r\n                    shadow: isOverlaidSecondary,\r\n                };\r\n\r\n                return (\r\n                    <PlayersViewPlayerWrapper {...wrapperProps}>\r\n                        <VideoPlayer {...playerProps} />\r\n                    </PlayersViewPlayerWrapper>\r\n                );\r\n            })}\r\n        </PlayersViewContainer>\r\n    );\r\n};\r\n\r\nexport default connect<StateProps, {}, OwnProps, State>(\r\n    createStructuredSelector({\r\n        layout: getLayout,\r\n        videos: getVideos,\r\n        isFullscreen: getIsFullscreen,\r\n        mainPlayerIds: getMainPlayerIds,\r\n        secondaryPlayerIds: getSecondaryPlayerIds,\r\n    }),\r\n)(PlayersView);\r\n","import { State } from '../types';\r\n\r\nexport const getVideos = (state: State) => state.videos;\r\n","import { getOptimalGridPlayerSize } from './getOptimalGridPlayerSize';\r\nimport { getPlayerGridPositions } from './getPlayerGridPositions';\r\n\r\ninterface GetPlayerLinePositionsProps {\r\n    lineWidth: number;\r\n    minPlayerHeight: number;\r\n    containerHeight: number;\r\n    numberOfPlayers: number;\r\n}\r\n\r\nexport const getPlayerLinePositions = ({ lineWidth, minPlayerHeight, containerHeight, numberOfPlayers }: GetPlayerLinePositionsProps) => {\r\n    const minPlayerWidth = minPlayerHeight / 9 * 16;\r\n\r\n    const playerWidth = lineWidth / numberOfPlayers;\r\n    const playerHeight = playerWidth / 16 * 9;\r\n\r\n    if (playerHeight < minPlayerHeight) {\r\n        const cols = Math.floor(lineWidth / minPlayerWidth);\r\n        const rows = Math.ceil(numberOfPlayers / cols);\r\n\r\n        if (rows * minPlayerHeight < containerHeight) {\r\n            const positions = getPlayerGridPositions({\r\n                playerWidth: minPlayerWidth,\r\n                playerHeight: minPlayerHeight,\r\n                containerWidth: lineWidth,\r\n                containerHeight: rows * minPlayerHeight,\r\n                numberOfPlayers,\r\n                alignToRight: true,\r\n            });\r\n\r\n            return {\r\n                positions,\r\n                rows,\r\n                cols\r\n            };\r\n        }\r\n\r\n        const { playerWidth, playerHeight } = getOptimalGridPlayerSize({\r\n            containerWidth: lineWidth,\r\n            containerHeight,\r\n            numberOfPlayers,\r\n        });\r\n\r\n        const newCols = Math.floor(lineWidth / playerWidth);\r\n        const newRows = Math.ceil(numberOfPlayers / newCols);\r\n\r\n        const positions = getPlayerGridPositions({\r\n            playerWidth,\r\n            playerHeight,\r\n            containerWidth: lineWidth,\r\n            containerHeight: Math.min(containerHeight, newRows * playerHeight),\r\n            numberOfPlayers,\r\n            alignToRight: true,\r\n        });\r\n\r\n        return {\r\n            positions,\r\n            rows: newRows,\r\n            cols: newCols,\r\n        };\r\n    }\r\n\r\n    const positions = Array.from({ length: numberOfPlayers }).map((_, i) => ({\r\n        top: 0,\r\n        left: i * playerWidth,\r\n        width: playerWidth,\r\n        height: playerHeight,\r\n    }));\r\n\r\n    return {\r\n        positions,\r\n        rows: 1,\r\n        cols: numberOfPlayers,\r\n    };\r\n};\r\n","import styled, { createGlobalStyle } from 'styled-components';\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n    * {\r\n        margin: 0;\r\n        padding: 0;\r\n        outline: none;\r\n    }\r\n\r\n    html {\r\n        position: relative;\r\n        width: 100vw;\r\n        height: 100vh;\r\n    }\r\n\r\n    body {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        -webkit-tap-highlight-color:  rgba(255, 255, 255, 0); \r\n    }\r\n\r\n    #root {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: black;\r\n    }\r\n`;\r\n\r\nexport const AppContainer = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\n","import { useState } from 'react';\r\nimport { unstable_createMuiStrictModeTheme as createMuiTheme, ThemeProvider, CssBaseline } from '@material-ui/core';\r\nimport { red } from '@material-ui/core/colors';\r\nimport { AddVideosDialog, AppBar, PlayerControlOverlay, KeyboardEventHandler, PlayersView } from './components';\r\nimport { AppContainer, GlobalStyle } from './style';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        type: 'dark',\r\n        primary: {\r\n            main: red['700'],\r\n            light: red['A700'],\r\n        },\r\n    },\r\n});\r\n\r\nconst App: React.FC = () => {\r\n    const [isAddVideosDialogOpen, setIsAddVideosDialogOpen] = useState(true);\r\n\r\n    const openAddVideosDialog = () => setIsAddVideosDialogOpen(true);\r\n    const closeAddVideosDialog = () => setIsAddVideosDialogOpen(false);\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <GlobalStyle />\r\n            <CssBaseline />\r\n            <KeyboardEventHandler isActive={!isAddVideosDialogOpen} />\r\n            <AppContainer>\r\n                <AppBar onAddVideosClick={openAddVideosDialog} />\r\n                <PlayersView />\r\n                <PlayerControlOverlay />\r\n            </AppContainer>\r\n            <AddVideosDialog open={isAddVideosDialogOpen} onClose={closeAddVideosDialog} />\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './redux';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.register();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","export interface PlayerInfo {\r\n    isReady: boolean;\r\n    isPlaying: boolean;\r\n    isBuffering: boolean;\r\n    hasEnded: boolean;\r\n\r\n    durationSeconds: number;\r\n    playedSeconds: number;\r\n    playedFraction: number;\r\n    loadedSeconds: number;\r\n    loadedFraction: number;\r\n\r\n    volume: number;\r\n    isMuted: boolean;\r\n\r\n    pendingSeeks: number[];\r\n}\r\nexport type PlayersInfoState = Record<string, PlayerInfo>;\r\n\r\nexport const PLAYER_INITIALIZED = 'PLAYER_INITIALIZED';\r\nexport const PLAYER_READY = 'PLAYER_READY';\r\nexport const PLAYER_STARTED_PLAYING = 'PLAYER_STARTED_PLAYING';\r\nexport const PLAYER_STOPPED_PLAYING = 'PLAYER_STOPPED_PLAYING';\r\nexport const PLAYER_STARTED_BUFFERING = 'PLAYER_STARTED_BUFFERING';\r\nexport const PLAYER_STOPPED_BUFFERING = 'PLAYER_STOPPED_BUFFERING';\r\nexport const PLAYER_VIDEO_ENDED = 'PLAYER_VIDEO_ENDED';\r\nexport const PLAYER_VIDEO_RESTARTED = 'PLAYER_VIDEO_RESTARTED';\r\nexport const PLAYER_DURATION_UPDATED = 'PLAYER_DURATION_UPDATED';\r\nexport const PLAYER_PLAYED_TIME_UPDATED = 'PLAYER_PLAYED_TIME_UPDATED';\r\nexport const PLAYER_LOADED_TIME_UPDATED = 'PLAYER_LOADED_TIME_UPDATED';\r\nexport const PLAYER_PROGRESS_UPDATED = 'PLAYER_PROGRESS_UPDATED';\r\nexport const PLAYER_VOLUME_UPDATED = 'PLAYER_VOLUME_UPDATED';\r\nexport const PLAYER_MUTED = 'PLAYER_MUTED';\r\nexport const PLAYER_UNMUTED = 'PLAYER_UNMUTED';\r\nexport const PLAYER_PENDING_SEEK_PUSHED = 'PLAYER_PENDING_SEEK_PUSHED';\r\nexport const PLAYER_PENDING_SEEK_POPPED = 'PLAYER_PENDING_SEEK_POPPED';\r\n\r\ninterface WithId {\r\n    id: string;\r\n}\r\n\r\nexport interface PlayerInitializedAction {\r\n    type: typeof PLAYER_INITIALIZED;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerReadyAction {\r\n    type: typeof PLAYER_READY;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerStartedPlayingAction {\r\n    type: typeof PLAYER_STARTED_PLAYING;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerStoppedPlayingAction {\r\n    type: typeof PLAYER_STOPPED_PLAYING;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerStartedBufferingAction {\r\n    type: typeof PLAYER_STARTED_BUFFERING;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerStoppedBufferingAction {\r\n    type: typeof PLAYER_STOPPED_BUFFERING;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerVideoEndedAction {\r\n    type: typeof PLAYER_VIDEO_ENDED;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerVideoRestartedAction {\r\n    type: typeof PLAYER_VIDEO_RESTARTED;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerDurationUpdatedAction {\r\n    type: typeof PLAYER_DURATION_UPDATED;\r\n    payload: WithId & {\r\n        durationSeconds: number;\r\n    };\r\n}\r\n\r\nexport interface PlayerPlayedTimeUpdatedAction {\r\n    type: typeof PLAYER_PLAYED_TIME_UPDATED;\r\n    payload: WithId & {\r\n        playedSeconds: number;\r\n        playedFraction: number;\r\n    };\r\n}\r\n\r\nexport interface PlayerLoadedTimeUpdatedAction {\r\n    type: typeof PLAYER_LOADED_TIME_UPDATED;\r\n    payload: WithId & {\r\n        loadedSeconds: number;\r\n        loadedFraction: number;\r\n    };\r\n}\r\n\r\nexport interface PlayerProgressUpdatedAction {\r\n    type: typeof PLAYER_PROGRESS_UPDATED;\r\n    payload: WithId & {\r\n        playedSeconds: number;\r\n        playedFraction: number;\r\n        loadedSeconds: number;\r\n        loadedFraction: number;\r\n    };\r\n}\r\n\r\nexport interface PlayerVolumeUpdatedAction {\r\n    type: typeof PLAYER_VOLUME_UPDATED;\r\n    payload: WithId & {\r\n        volume: number;\r\n    };\r\n}\r\n\r\nexport interface PlayerMutedAction {\r\n    type: typeof PLAYER_MUTED;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerUnmutedAction {\r\n    type: typeof PLAYER_UNMUTED;\r\n    payload: WithId;\r\n}\r\n\r\nexport interface PlayerPendingSeekPushedAction {\r\n    type: typeof PLAYER_PENDING_SEEK_PUSHED;\r\n    payload: WithId & {\r\n        seekToSeconds: number;\r\n    };\r\n}\r\n\r\nexport interface PlayerPendingSeekPoppedAction {\r\n    type: typeof PLAYER_PENDING_SEEK_POPPED;\r\n    payload: WithId;\r\n}\r\n\r\nexport type PlayersInfoAction = (\r\n    PlayerInitializedAction | PlayerReadyAction | PlayerStartedPlayingAction | PlayerStoppedPlayingAction |\r\n    PlayerStartedBufferingAction | PlayerStoppedBufferingAction | PlayerVideoEndedAction | PlayerVideoRestartedAction |\r\n    PlayerDurationUpdatedAction | PlayerPlayedTimeUpdatedAction | PlayerLoadedTimeUpdatedAction | PlayerProgressUpdatedAction |\r\n    PlayerVolumeUpdatedAction | PlayerPendingSeekPushedAction | PlayerPendingSeekPoppedAction | PlayerMutedAction | PlayerUnmutedAction\r\n);\r\n","export interface MasterPlayerInfoState {\r\n    isReady: boolean;\r\n    isPlaying: boolean;\r\n    isBuffering: boolean;\r\n    hasEnded: boolean;\r\n\r\n    durationSeconds: number;\r\n    playedSeconds: number;\r\n    playedFraction: number;\r\n    loadedSeconds: number;\r\n    loadedFraction: number;\r\n\r\n    volume: number;\r\n    isMuted: boolean;\r\n\r\n    pendingSeek: number | null;\r\n}\r\n\r\nexport const MASTER_PLAYER_READY = 'MASTER_PLAYER_READY';\r\nexport const MASTER_PLAYER_NOT_READY = 'MASTER_PLAYER_NOT_READY';\r\nexport const MASTER_PLAYER_STARTED_PLAYING = 'MASTER_PLAYER_STARTED_PLAYING';\r\nexport const MASTER_PLAYER_STOPPED_PLAYING = 'MASTER_PLAYER_STOPPED_PLAYING';\r\nexport const MASTER_PLAYER_STARTED_BUFFERING = 'MASTER_PLAYER_STARTED_BUFFERING';\r\nexport const MASTER_PLAYER_STOPPED_BUFFERING = 'MASTER_PLAYER_STOPPED_BUFFERING';\r\nexport const MASTER_PLAYER_ENDED = 'MASTER_PLAYER_ENDED';\r\nexport const MASTER_PLAYER_DURATION_UPDATED = 'MASTER_PLAYER_DURATION_UPDATED';\r\nexport const MASTER_PLAYER_PLAYED_TIME_UPDATED = 'MASTER_PLAYER_PLAYED_TIME_UPDATED';\r\nexport const MASTER_PLAYER_LOADED_TIME_UPDATED = 'MASTER_PLAYER_LOADED_TIME_UPDATED';\r\nexport const MASTER_PLAYER_PROGRESS_UPDATED = 'MASTER_PLAYER_PROGRESS_UPDATED';\r\nexport const MASTER_PLAYER_VOLUME_UPDATED = 'MASTER_PLAYER_VOLUME_UPDATED';\r\nexport const MASTER_PLAYER_MUTED = 'MASTER_PLAYER_MUTED';\r\nexport const MASTER_PLAYER_UNMUTED = 'MASTER_PLAYER_UNMUTED';\r\nexport const MASTER_PLAYER_PENDING_SEEK_SET = 'MASTER_PLAYER_PENDING_SEEK_SET';\r\nexport const MASTER_PLAYER_PENDING_SEEK_REMOVED = 'MASTER_PLAYER_PENDING_SEEK_REMOVED';\r\n\r\nexport interface MasterPlayerReadyAction {\r\n    type: typeof MASTER_PLAYER_READY;\r\n}\r\n\r\nexport interface MasterPlayerNotReadyAction {\r\n    type: typeof MASTER_PLAYER_NOT_READY;\r\n}\r\n\r\nexport interface MasterPlayerStartedPlayingAction {\r\n    type: typeof MASTER_PLAYER_STARTED_PLAYING;\r\n}\r\n\r\nexport interface MasterPlayerStoppedPlayingAction {\r\n    type: typeof MASTER_PLAYER_STOPPED_PLAYING;\r\n}\r\n\r\nexport interface MasterPlayerStartedBufferingAction {\r\n    type: typeof MASTER_PLAYER_STARTED_BUFFERING;\r\n}\r\n\r\nexport interface MasterPlayerStoppedBufferingAction {\r\n    type: typeof MASTER_PLAYER_STOPPED_BUFFERING;\r\n}\r\n\r\nexport interface MasterPlayerEndedAction {\r\n    type: typeof MASTER_PLAYER_ENDED;\r\n}\r\n\r\nexport interface MasterPlayerDurationUpdatedAction {\r\n    type: typeof MASTER_PLAYER_DURATION_UPDATED;\r\n    payload: {\r\n        durationSeconds: number;\r\n    };\r\n}\r\n\r\nexport interface MasterPlayerPlayedTimeUpdatedAction {\r\n    type: typeof MASTER_PLAYER_PLAYED_TIME_UPDATED;\r\n    payload: {\r\n        playedSeconds: number;\r\n        playedFraction: number;\r\n    };\r\n}\r\n\r\nexport interface MasterPlayerLoadedTimeUpdatedAction {\r\n    type: typeof MASTER_PLAYER_LOADED_TIME_UPDATED;\r\n    payload: {\r\n        loadedSeconds: number;\r\n        loadedFraction: number;\r\n    };\r\n}\r\n\r\nexport interface MasterPlayerProgressUpdatedAction {\r\n    type: typeof MASTER_PLAYER_PROGRESS_UPDATED;\r\n    payload: {\r\n        playedSeconds: number;\r\n        playedFraction: number;\r\n        loadedSeconds: number;\r\n        loadedFraction: number;\r\n    };\r\n}\r\n\r\nexport interface MasterPlayerVolumeUpdatedAction {\r\n    type: typeof MASTER_PLAYER_VOLUME_UPDATED;\r\n    payload: {\r\n        volume: number;\r\n    };\r\n}\r\n\r\nexport interface MasterPlayerMutedAction {\r\n    type: typeof MASTER_PLAYER_MUTED;\r\n}\r\n\r\nexport interface MasterPlayerUnmutedAction {\r\n    type: typeof MASTER_PLAYER_UNMUTED;\r\n}\r\n\r\nexport interface MasterPlayerPendingSeekSetAction {\r\n    type: typeof MASTER_PLAYER_PENDING_SEEK_SET;\r\n    payload: {\r\n        seekToSeconds: number;\r\n    };\r\n}\r\n\r\nexport interface MasterPlayerPendingSeekRemovedAction {\r\n    type: typeof MASTER_PLAYER_PENDING_SEEK_REMOVED;\r\n}\r\n\r\nexport type MasterPlayerInfoAction = (\r\n    MasterPlayerReadyAction | MasterPlayerNotReadyAction | MasterPlayerStartedPlayingAction | MasterPlayerStoppedPlayingAction |\r\n    MasterPlayerStartedBufferingAction | MasterPlayerStoppedBufferingAction | MasterPlayerEndedAction | MasterPlayerDurationUpdatedAction |\r\n    MasterPlayerPlayedTimeUpdatedAction | MasterPlayerLoadedTimeUpdatedAction | MasterPlayerProgressUpdatedAction |\r\n    MasterPlayerVolumeUpdatedAction | MasterPlayerMutedAction | MasterPlayerUnmutedAction | MasterPlayerPendingSeekSetAction | MasterPlayerPendingSeekRemovedAction\r\n);","export enum ControlsMode {\r\n    Grouped = 'Grouped',\r\n    Individual = 'Individual',\r\n}\r\n\r\nexport enum Layout {\r\n    Overlay = 'Overlay',\r\n    Focused = 'Focused',\r\n    Grid = 'Grid',\r\n}\r\n\r\nexport interface SettingsState {\r\n    isFullscreen: boolean;\r\n    controlsMode: ControlsMode;\r\n    layout: Layout;\r\n    focusedPlayerId: string | null;\r\n    \r\n    mainPlayerIds: string[];\r\n    secondaryPlayerIds: string[];\r\n}\r\n\r\nexport const SETTINGS_FULLSCREEN_ENTERED = 'SETTINGS_FULLSCREEN_ENTERED';\r\nexport const SETTINGS_FULLSCREEN_EXITED = 'SETTINGS_FULLSCREEN_EXITED';\r\nexport const SETTINGS_CONTROLS_MODE_CHANGED = 'SETTINGS_CONTROLS_MODE_CHANGED';\r\nexport const SETTINGS_LAYOUT_CHANGED = 'SETTINGS_LAYOUT_CHANGED';\r\nexport const SETTINGS_FOCUSED_PLAYER_ID_CHANGED = 'SETTINGS_FOCUSED_PLAYER_ID_CHANGED';\r\nexport const SETTINGS_MAIN_PLAYER_IDS_CHANGED = 'SETTINGS_MAIN_PLAYER_IDS_CHANGED';\r\nexport const SETTINGS_SECONDARY_PLAYER_IDS_CHANGED = 'SETTINGS_MAIN_SECONDARY_IDS_CHANGED';\r\nexport const SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED = 'SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED';\r\n\r\nexport interface SettingsFullscreenEnteredAction {\r\n    type: typeof SETTINGS_FULLSCREEN_ENTERED;\r\n}\r\n\r\nexport interface SettingsFullscreenExitedAction {\r\n    type: typeof SETTINGS_FULLSCREEN_EXITED;\r\n}\r\n\r\nexport interface SettingsControlsModeChangedAction {\r\n    type: typeof SETTINGS_CONTROLS_MODE_CHANGED;\r\n    payload: {\r\n        controlsMode: ControlsMode;\r\n    };\r\n}\r\n\r\nexport interface SettingsLayoutChangedAction {\r\n    type: typeof SETTINGS_LAYOUT_CHANGED;\r\n    payload: {\r\n        layout: Layout;\r\n    };\r\n}\r\n\r\nexport interface SettingsFocusedPlayerIdChangedAction {\r\n    type: typeof SETTINGS_FOCUSED_PLAYER_ID_CHANGED;\r\n    payload: {\r\n        focusedPlayerId: string | null;\r\n    };\r\n}\r\n\r\nexport interface SettingsMainPlayerIdsChangedAction {\r\n    type: typeof SETTINGS_MAIN_PLAYER_IDS_CHANGED;\r\n    payload: {\r\n        mainPlayerIds: string[];\r\n    };\r\n}\r\n\r\nexport interface SettingsSecondaryPlayerIdsChangedAction {\r\n    type: typeof SETTINGS_SECONDARY_PLAYER_IDS_CHANGED;\r\n    payload: {\r\n        secondaryPlayerIds: string[];\r\n    };\r\n}\r\n\r\nexport interface SettingsMainAndSecondaryPlayerIdsChanged {\r\n    type: typeof SETTINGS_MAIN_AND_SECONDARY_PLAYER_IDS_CHANGED;\r\n    payload: {\r\n        mainPlayerIds: string[];\r\n        secondaryPlayerIds: string[];\r\n    };\r\n}\r\n\r\nexport type SettingsAction = (\r\n    SettingsFullscreenEnteredAction | SettingsFullscreenExitedAction | SettingsControlsModeChangedAction |\r\n    SettingsLayoutChangedAction | SettingsFocusedPlayerIdChangedAction | SettingsMainPlayerIdsChangedAction |\r\n    SettingsSecondaryPlayerIdsChangedAction | SettingsMainAndSecondaryPlayerIdsChanged\r\n);","export interface OffsetsState {\r\n    // Reference player always is the first one to play (\"the least offset\").\r\n    referencePlayerId: string | null;\r\n\r\n    // All offsets should be negative (meaning all non-reference players will be offset \"to the future\")\r\n    offsets: Record<string, number>;\r\n}\r\n\r\nexport const OFFSETS_REFERENCE_PLAYER_ID_CHANGED = 'OFFSETS_REFERENCE_PLAYER_ID_CHANGED';\r\nexport const PLAYER_OFFSET_CHANGED = 'PLAYER_OFFSET_CHANGED';\r\n\r\nexport interface OffsetsReferencePlayerIdChangedAction {\r\n    type: typeof OFFSETS_REFERENCE_PLAYER_ID_CHANGED;\r\n    payload: {\r\n        referenceId: string;\r\n    };\r\n}\r\n\r\nexport interface PlayerOffsetChangedAction {\r\n    type: typeof PLAYER_OFFSET_CHANGED;\r\n    payload: {\r\n        id: string;\r\n        offset: number;\r\n    };\r\n}\r\n\r\nexport type OffsetsAction = OffsetsReferencePlayerIdChangedAction | PlayerOffsetChangedAction;\r\n","export interface Video {\r\n    url: string;\r\n}\r\n\r\nexport type VideosState = Record<string, Video>;\r\n\r\nexport const VIDEOS_ADDED = 'VIDEOS_ADDED';\r\nexport const VIDEO_REMOVED = 'VIDEO_REMOVED';\r\n\r\nexport interface VideosAddedAction {\r\n    type: typeof VIDEOS_ADDED;\r\n    payload: Record<string, Video>;\r\n}\r\n\r\nexport interface VideoRemovedAction {\r\n    type: typeof VIDEO_REMOVED;\r\n    payload: {\r\n        id: string;\r\n    };\r\n}\r\n\r\nexport type VideosAction = VideosAddedAction | VideoRemovedAction;\r\n"],"sourceRoot":""}